(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./stories/ReactDraw.stories.tsx":"./src/stories/ReactDraw.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$":function(module,exports,__webpack_require__){var map={"./stories/Introduction.stories.mdx":"./src/stories/Introduction.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"},"./src/stories/Introduction.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Introduction",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("style",null,"\n    .subheading {\n      --mediumdark: '#999999';\n      font-weight: 900;\n      font-size: 13px;\n      color: #999;\n      letter-spacing: 6px;\n      line-height: 24px;\n      text-transform: uppercase;\n      margin-bottom: 12px;\n      margin-top: 40px;\n    }\n\n    .link-list {\n      display: grid;\n      grid-template-columns: 1fr;\n      grid-template-rows: 1fr 1fr;\n      row-gap: 10px;\n    }\n\n    @media (min-width: 620px) {\n      .link-list {\n        row-gap: 20px;\n        column-gap: 20px;\n        grid-template-columns: 1fr 1fr;\n      }\n    }\n\n    @media all and (-ms-high-contrast:none) {\n    .link-list {\n        display: -ms-grid;\n        -ms-grid-columns: 1fr 1fr;\n        -ms-grid-rows: 1fr 1fr;\n      }\n    }\n\n    .link-item {\n      display: block;\n      padding: 20px 30px 20px 15px;\n      border: 1px solid #00000010;\n      border-radius: 5px;\n      transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n      color: #333333;\n      display: flex;\n      align-items: flex-start;\n    }\n\n    .link-item:hover {\n      border-color: #1EA7FD50;\n      transform: translate3d(0, -3px, 0);\n      box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n    }\n\n    .link-item:active {\n      border-color: #1EA7FD;\n      transform: translate3d(0, 0, 0);\n    }\n\n    .link-item strong {\n      font-weight: 700;\n      display: block;\n      margin-bottom: 2px;\n    }\n\n    .link-item img {\n      height: 40px;\n      width: 40px;\n      margin-right: 15px;\n      flex: none;\n    }\n\n    .link-item span {\n      font-size: 14px;\n      line-height: 20px;\n    }\n\n    .tip {\n      display: inline-block;\n      border-radius: 1em;\n      font-size: 11px;\n      line-height: 12px;\n      font-weight: 700;\n      background: #E7FDD8;\n      color: #66BF3C;\n      padding: 4px 12px;\n      margin-right: 10px;\n      vertical-align: top;\n    }\n\n    .tip-wrapper {\n      font-size: 13px;\n      line-height: 20px;\n      margin-top: 40px;\n      margin-bottom: 40px;\n    }\n\n    .tip-wrapper code {\n      font-size: 12px;\n      display: inline-block;\n    }\n  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Welcome to @jzohdi/react-draw Storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"This is a fully customizable drawing area library written in react + typescript.\nIncluded only the tools you want for the smallest bundle size or add your own."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Installation"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"Install using ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"npm")," or ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"yarn")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"npm install @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"yarn add @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Roadmap"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","allow for custom data on current drawing data;"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","show or hide top bar/bottom bar"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("a",{parentName:"li",href:"https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74"},"free draw bezier curve"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Stack"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","react"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","typescript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","styled-components"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","rollup")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./src/stories/ReactDraw.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultLayoutWithoutChildren",(function(){return DefaultLayoutWithoutChildren})),__webpack_require__.d(__webpack_exports__,"HideTopBar",(function(){return HideTopBar})),__webpack_require__.d(__webpack_exports__,"DefaultLayoutWithChildren",(function(){return DefaultLayoutWithChildren})),__webpack_require__.d(__webpack_exports__,"FitLayoutWithChildren",(function(){return FitLayoutWithChildren}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));var defaultStyles={boxShadow:"#000000 0px 1px 3px 0px",borderRadius:4,overflow:"hidden",display:"flex",flexDirection:"column"};function Container(_ref){var children=_ref.children,styles=function getStyles(layout){return"default"===layout?{width:500,height:500,maxWidth:"100%"}:"fit"===layout?{maxWidth:"100%"}:void 0}(_ref.layout);return Object(jsx_runtime.jsx)("div",{style:Object.assign({},defaultStyles,styles),children:children})}Container.displayName="Container";try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"LayoutOption"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/Container.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/ReactDraw/Container.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}var _templateObject,_templateObject2,styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),CURSOR_ID="react-draw-cursor",COLORS_primary={light:"#bddefb",main:"#228be6"},COLORS_grey={light:"#ececec"},SELECT_FRAME_DIV_STYLES={width:"calc(100% + 16px)",height:"calc(100% + 16px)",position:"absolute",border:"2px dotted "+COLORS_primary.main,top:"-6px",left:"-6px",cursor:"all-scroll",pointerEvents:"all"},ROTATE_BUTTON_STYLES={top:"-45px",cursor:"grab",left:"calc(50% - 8px)"},ROTATE_DOTTED_LINE_STYLES={width:"0px",height:"35px",borderLeft:"2px dotted black",position:"absolute",left:"5px",pointerEvents:"none"},SELECTED_CORNER_BUTTON={position:"absolute",borderRadius:"50%",width:"16px",height:"16px"};function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var TopToolBar_templateObject,Wrapper=styled_components_browser_esm.b.button(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),450,450,COLORS_grey.light,(function(props){return props.selected&&Object(styled_components_browser_esm.a)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n      background-color: "," !important;\n      > svg path {\n        fill: white;\n      }\n    "])),COLORS_primary.main)}));function ToolIconWrapper(_ref){var children=_ref.children,selected=_ref.selected,onSelect=_ref.onSelect;return Object(jsx_runtime.jsx)(Wrapper,{selected:selected,onClick:onSelect,children:children})}ToolIconWrapper.displayName="ToolIconWrapper";try{ToolIconWrapper.displayName="ToolIconWrapper",ToolIconWrapper.__docgenInfo={description:"",displayName:"ToolIconWrapper",props:{selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"]={docgenInfo:ToolIconWrapper.__docgenInfo,name:"ToolIconWrapper",path:"src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"})}catch(__react_docgen_typescript_loader_error){}var TopBarContainer=styled_components_browser_esm.b.div(TopToolBar_templateObject||(TopToolBar_templateObject=function TopToolBar_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  display: flex;\n  background-color: ",";\n  z-index: 1;\n"])),COLORS_primary.light);function TopToolBar(_ref){var tools=_ref.tools,onSelectTool=_ref.onSelectTool,currentTool=_ref.currentTool;return Object(jsx_runtime.jsx)(TopBarContainer,{children:tools.map((function(tool){return Object(jsx_runtime.jsx)(ToolIconWrapper,{selected:tool.id===currentTool,onSelect:function onSelect(){return onSelectTool(tool.id)},children:tool.icon},tool.id)}))})}TopToolBar.displayName="TopToolBar";try{TopToolBar.displayName="TopToolBar",TopToolBar.__docgenInfo={description:"",displayName:"TopToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"TopBarTool[]"}},onSelectTool:{defaultValue:null,description:"",name:"onSelectTool",required:!0,type:{name:"(id: string) => void"}},currentTool:{defaultValue:null,description:"",name:"currentTool",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/TopToolBar.tsx#TopToolBar"]={docgenInfo:TopToolBar.__docgenInfo,name:"TopToolBar",path:"src/ReactDraw/TopToolBar.tsx#TopToolBar"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeid(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}function getTouchCoords(e){var touch=e.touches[0];return touch||(touch=e.targetTouches[0]),touch||(touch=e.changedTouches[0]),[touch.clientX,touch.clientY]}function getRelativePoint(point,container){if(!container)throw new Error("Container not set.");var rect=container.getBoundingClientRect();return[point[0]-rect.left,point[1]-rect.top]}function isBrowser(){return void 0!==typeof window}function makeNewBoundingDiv(relativePoint,lineWidth,toolId){if(!isBrowser())throw new Error("new bounding div called on the server.");var _relativePoint=_slicedToArray(relativePoint,2),_makeNewDiv=function makeNewDiv(pointX,pointY,lineWidth,toolId){var id=makeid(6),div=document.createElement("div"),left=pointX-lineWidth,top=pointY-lineWidth;return div.id=toolId+"-"+id,div.style.width=2*lineWidth+"px",div.style.height=2*lineWidth+"px",div.style.position="absolute",div.style.left=left+"px",div.style.top=top+"px",div.style.pointerEvents="none",div.style.zIndex="1",{div:div,id:id,top:top,left:left,right:left+lineWidth+lineWidth,bottom:top+lineWidth+lineWidth}}(_relativePoint[0],_relativePoint[1],lineWidth,toolId);return{coords:[relativePoint],element:null,toolId:toolId,container:{id:_makeNewDiv.id,div:_makeNewDiv.div,bounds:{top:_makeNewDiv.top,left:_makeNewDiv.left,right:_makeNewDiv.right,bottom:_makeNewDiv.bottom}},style:{zIndex:1,lineWidth:lineWidth}}}function createSvg(w,h){if(!isBrowser())throw new Error("createSVG called on server");var newSVG=document.createElementNS("http://www.w3.org/2000/svg","svg");return newSVG.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),newSVG.setAttribute("viewbox","0 0 "+w+" "+h),newSVG.style.width="100%",newSVG.style.height="100%",newSVG}function mapPointToRect(point,container,viewContainer){var containerBounds=container.div.getBoundingClientRect(),viewBounds=viewContainer.getBoundingClientRect(),topOfCotainerRelativeToView=containerBounds.top-viewBounds.top,pointYRelativeToContainer=point[1]-topOfCotainerRelativeToView,leftOfContainerRelativeToView=containerBounds.left-viewBounds.left;return[point[0]-leftOfContainerRelativeToView,pointYRelativeToContainer]}function setContainerRect(data){if(data.coords.length<2)throw new Error("data coords must be at least length 2");var _data$coords$=_slicedToArray(data.coords[0],2),firstX=_data$coords$[0],firstY=_data$coords$[1],_data$coords2=_slicedToArray(data.coords[data.coords.length-1],2),lastX=_data$coords2[0],lastY=_data$coords2[1],minX=Math.min(firstX,lastX),minY=Math.min(firstY,lastY),maxX=Math.max(firstX,lastX),maxY=Math.max(firstY,lastY),_data$container=data.container,bounds=_data$container.bounds,div=_data$container.div;return bounds.left=minX,bounds.right=maxX,bounds.top=minY,bounds.bottom=maxY,div.style.top=minY+"px",div.style.left=minX+"px",div.style.width=maxX-minX+"px",div.style.height=maxY-minY+"px",data.coords}function isRectBounding(bounds,object){return bounds.top<=object.top&&bounds.bottom>=object.bottom&&bounds.left<=object.left&&bounds.right>=object.right}function dragDivs(objects,prevPoint,newPoint){var _step,_newPoint=_slicedToArray(newPoint,2),currentMouseX=_newPoint[0],currentMouseY=_newPoint[1],_prevPoint=_slicedToArray(prevPoint,2),newLeft=currentMouseX-_prevPoint[0],newTop=currentMouseY-_prevPoint[1],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(objects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _obj$container=_step.value.container,bounds=_obj$container.bounds,div=_obj$container.div,left=bounds.left,top=bounds.top,right=bounds.right,bottom=bounds.bottom;bounds.left=left+newLeft,bounds.top=top+newTop,bounds.right=bounds.left+(right-left),bounds.bottom=bounds.top+(bottom-top),div.style.top=bounds.top+"px",div.style.left=bounds.left+"px"}}catch(err){_iterator.e(err)}finally{_iterator.f()}}__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js");function utils_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function utils_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return utils_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function utils_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeSelectFrameDiv(data){var containerDiv=data.container.div,eleId=data.container.id;if(isElementSelected(containerDiv))return null;var div=document.createElement("div");return div.setAttribute("id","select-frame-"+eleId),setStyles(div,SELECT_FRAME_DIV_STYLES),div}function selectElement(data){var selectFrame=makeSelectFrameDiv(data);selectFrame&&(!function addToolsToSelectionDiv(div,eleId){var topLeftCorner=cornerButton(eleId,!0,!1,!1,!0),topRightCorner=cornerButton(eleId,!0,!0),bottomRightCorner=cornerButton(eleId,!1,!0,!0),bottomLeftCorner=cornerButton(eleId,!1,!1,!0,!0);div.appendChild(topLeftCorner),div.appendChild(topRightCorner),div.appendChild(bottomRightCorner),div.appendChild(bottomLeftCorner);var rotateButton=cornerButton(eleId);rotateButton.id="button-rotate-"+eleId,setStyles(rotateButton,ROTATE_BUTTON_STYLES);var divLine=document.createElement("div");setStyles(divLine,ROTATE_DOTTED_LINE_STYLES),divLine.id="line-div-"+eleId,rotateButton.appendChild(divLine),div.appendChild(rotateButton)}(selectFrame,data.container.id),data.container.div.appendChild(selectFrame))}function cornerButton(eleId,top,right,bottom,left){var button=document.createElement("button");setStyles(button,SELECTED_CORNER_BUTTON);var buttonId="";return top?(button.style.top="-12px",buttonId+="n"):bottom&&(button.style.bottom="-12px",buttonId+="s"),right?(button.style.right="-12px",buttonId+="e"):left&&(button.style.left="-12px",buttonId+="w"),button.id="corner-button-"+buttonId+"-"+eleId,button.style.cursor=buttonId+"-resize",button}function unselectElement(data){var _data$container=data.container,div=_data$container.div;_data$container.id;isElementSelected(div)&&div.lastElementChild&&div.removeChild(div.lastElementChild)}function isElementSelected(div){var _div$lastElementChild;return null===(_div$lastElementChild=div.lastElementChild)||void 0===_div$lastElementChild?void 0:_div$lastElementChild.id.includes("select-frame")}function setStyles(div,styles){for(var key in styles)div.style[key]=styles[key];return div}function resizeObject_slicedToArray(arr,i){return function resizeObject_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeObject_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function resizeObject_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeObject_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeObject_arrayLikeToArray(o,minLen)}(arr,i)||function resizeObject_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeObject_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _excluded=["children","topBarTools","hideTopBar"];function ReactDraw_slicedToArray(arr,i){return function ReactDraw_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReactDraw_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ReactDraw_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ReactDraw_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ReactDraw_arrayLikeToArray(o,minLen)}(arr,i)||function ReactDraw_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReactDraw_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ReactDraw(_ref){var children=_ref.children,topBarTools=_ref.topBarTools,hideTopBar=_ref.hideTopBar,props=_objectWithoutProperties(_ref,_excluded),drawingAreaRef=Object(react.useRef)(null),_useState2=ReactDraw_slicedToArray(Object(react.useState)(topBarTools[0]),2),currentDrawingTool=_useState2[0],setCurrentDrawingTool=_useState2[1],_validateProps=function validateProps(children,layout){var numChildren=react.Children.count(children);if(numChildren>1)throw new Error("ReactDraw expects either 0 or 1 children, detected more.");void 0===layout&&(layout="default");return{numChildren:numChildren,layout:layout}}(children,props.layout),layout=_validateProps.layout,renderedElementsMap=Object(react.useRef)({}),currDrawObj=Object(react.useRef)(null),_useState4=ReactDraw_slicedToArray(Object(react.useState)(4),2),currentLineWidth=_useState4[0],drawingAreaId=(_useState4[1],Object(react.useRef)("drawing-area-container-"+makeid(6))),currentlySelectedElements=Object(react.useRef)([]),previousMousePos=Object(react.useRef)(null),currentSelectMode=Object(react.useRef)(null),getViewContainer=function getViewContainer(){var viewContainer=drawingAreaRef.current;if(!viewContainer)throw new Error("no view container while resizing");return viewContainer},isUsingSelectTool=function isUsingSelectTool(){return CURSOR_ID===currentDrawingTool.id},isPerformingSelectAction=function isPerformingSelectAction(){return null!==previousMousePos.current&&null!==currentSelectMode.current},handleResize=function handleResize(mode,data,ctx){var pointDiff=function getPointDiff(pointA,pointB){return[pointA[0]-pointB[0],pointA[1]-pointB[1]]}(ctx.newPoint,ctx.previousPoint);if("resize-ne"===mode)!function resizeNE(data,point){var _point=resizeObject_slicedToArray(point,2),xDiff=_point[0],yDiff=_point[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.right+=xDiff,div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}(data,pointDiff);else if("resize-nw"===mode)!function resizeNW(data,point){var _point2=resizeObject_slicedToArray(point,2),xDiff=_point2[0],yDiff=_point2[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.left+=xDiff,div.style.top=bounds.top+"px",div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}(data,pointDiff);else if("resize-se"===mode)!function resizeSE(data,point){var _point3=resizeObject_slicedToArray(point,2),xDiff=_point3[0],yDiff=_point3[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom+yDiff<=bounds.top+5||(bounds.right+=xDiff,bounds.bottom+=yDiff,div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}(data,pointDiff);else{if("resize-sw"!==mode)throw new Error("resize mode not recognized");!function resizeSW(data,point){var _point4=resizeObject_slicedToArray(point,2),xDiff=_point4[0],yDiff=_point4[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom+yDiff<=bounds.top+5||(bounds.bottom+=yDiff,bounds.left+=xDiff,div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}(data,pointDiff)}getToolById(topBarTools,data.toolId).onUpdate(data,ctx)},didHandleRotate=function didHandleRotate(mode,data,newPoint){return"rotate"===mode&&(function rotateDiv(object,newPoint,referenceCenter){var div=object.container.div,x=newPoint[0]-referenceCenter[0],y=newPoint[1]-referenceCenter[1],angleDeg=180*Math.atan2(y,x)/Math.PI+90;div.style.transform="rotate("+angleDeg+"deg)"}(data,newPoint,function getCenterPoint(bounds){var height=bounds.bottom-bounds.top,y=bounds.top+height/2,width=bounds.right-bounds.left;return[bounds.left+width/2,y]}(data.container.bounds)),!0)},handleSelectToolOperation=function handleSelectToolOperation(newPoint){var prevPoint=previousMousePos.current;if(prevPoint){var objects=getSelectedDrawingObjects().objects,mode=currentSelectMode.current;if(null!==mode){if("drag"===mode)return dragDivs(objects,prevPoint,newPoint);!function requireLength1(arr){if(arr.length>1)throw new Error("should not be able to preform this action on more than object")}(objects);var item=objects[0];if(!didHandleRotate(mode,item,newPoint))return handleResize(mode,item,{viewContainer:getViewContainer(),previousPoint:prevPoint,newPoint:newPoint,mode:mode})}}};function starDraw(eventTarget,relativePoint,didPressShift){var container=getViewContainer();if(!didStartSelectAction(eventTarget,relativePoint)){isUsingSelectTool()&&didPressShift||unselectEverythingAndReturnPrevious();var newDrawingData=makeNewBoundingDiv(relativePoint,currentLineWidth,currentDrawingTool.id);currDrawObj.current=newDrawingData,container.append(newDrawingData.container.div),currentDrawingTool.onDrawStart(newDrawingData,container)}}function drawing(relativePoint){var currentDrawingData=currDrawObj.current;if(!isPerformingSelectAction()&&currentDrawingData){var container=getViewContainer();currentDrawingData.coords.push(relativePoint),currentDrawingTool.onDrawing(currentDrawingData,container),CURSOR_ID===currentDrawingTool.id&&handleTrySelectObjects(currentDrawingData,renderedElementsMap.current)}}function endDraw(relativePoint,didPressShift){var currentDrawingData=currDrawObj.current;currentSelectMode.current=null,previousMousePos.current=null,currDrawObj.current=null,currentDrawingData&&(currentDrawingTool.onDrawEnd(currentDrawingData,getViewContainer()),isUsingSelectTool()?tryClickObject(currentDrawingData,relativePoint,didPressShift):renderedElementsMap.current[currentDrawingData.container.id]=currentDrawingData)}var tryClickObject=function tryClickObject(drawingData,lastPoint,didPressShift){var firstPoint=drawingData.coords[0];if(function distance(pointA,pointB){return Math.sqrt(Math.pow(Math.abs(pointA[0]-pointB[0]),2)+Math.pow(Math.abs(pointA[1]-pointB[1]),2))}(lastPoint,firstPoint)<75){var bounds=function addPointToBounds(bounds,point){var top=bounds.top,right=bounds.right,bottom=bounds.bottom,left=bounds.left,_point2=_slicedToArray(point,2),x=_point2[0],y=_point2[1];return y>bottom?bottom=y:y<top&&(top=y),x<left?left=x:x>right&&(right=x),{top:top,right:right,bottom:bottom,left:left}}(function makeBoundingRect(point){var _point=_slicedToArray(point,2),x=_point[0],y=_point[1];return{top:y,right:x,bottom:y,left:x}}(firstPoint),lastPoint);handleTryClickObject(renderedElementsMap.current,bounds,didPressShift)}},didStartSelectAction=function didStartSelectAction(target,relativePoint){if(!target)throw new Error("Did start select action recieved null as target");return target.id.includes("select-frame")?(previousMousePos.current=relativePoint,currentSelectMode.current="drag",!0):target.id.includes("button-rotate")?(previousMousePos.current=relativePoint,currentSelectMode.current="rotate",!0):!!target.id.includes("corner-button")&&(previousMousePos.current=relativePoint,currentSelectMode.current=function getCornerMode(id){var direction=id.split("-")[2];if("sw"===direction)return"resize-sw";if("nw"===direction)return"resize-nw";if("se"===direction)return"resize-se";if("ne"===direction)return"resize-ne";throw new Error("corner mode id not valid")}(target.id),!0)};function moveObject(relativePoint){isPerformingSelectAction()&&(handleSelectToolOperation(relativePoint),previousMousePos.current=relativePoint)}Object(react.useEffect)((function(){var container=drawingAreaRef.current;if(container)return container.addEventListener("mousedown",startDrawMouse),container.addEventListener("mouseup",endDrawMouse),container.addEventListener("mousemove",drawMouse),container.addEventListener("touchstart",startDrawTouch,{passive:!1}),container.addEventListener("touchmove",drawTouch,{passive:!1}),container.addEventListener("touchcancel",endDrawTouch),container.addEventListener("touchend",endDrawTouch),container.addEventListener("mouseleave",endDrawMouse),window.addEventListener("mousemove",handleMouseMoveObject),window.addEventListener("mouseup",handleStopMoveObject),window.addEventListener("touchmove",handleTouchMoveObject,{passive:!1}),window.addEventListener("touchend",handleStopMoveObject),window.addEventListener("touchcancel",handleStopMoveObject),function(){container.removeEventListener("mousedown",startDrawMouse),container.removeEventListener("mouseup",endDrawMouse),container.removeEventListener("mousemove",drawMouse),container.removeEventListener("touchstart",startDrawTouch),container.removeEventListener("touchmove",drawTouch),container.removeEventListener("touchcancel",endDrawTouch),container.removeEventListener("touchend",endDrawTouch),container.removeEventListener("mouseleave",endDrawMouse),window.removeEventListener("mousemove",handleMouseMoveObject),window.removeEventListener("mouseup",handleStopMoveObject),window.removeEventListener("touchmove",handleTouchMoveObject),window.removeEventListener("touchend",handleStopMoveObject),window.removeEventListener("touchcancel",handleStopMoveObject)};function handleMouseMoveObject(e){moveObject(getRelativePoint([e.clientX,e.clientY],container))}function handleTouchMoveObject(e){moveObject(getRelativePoint(getTouchCoords(e),container))}function handleStopMoveObject(){currentSelectMode.current=null,previousMousePos.current=null}function startDrawMouse(e){var relativePoint=getRelativePoint([e.clientX,e.clientY],container);starDraw(e.target,relativePoint,e.shiftKey)}function drawMouse(e){drawing(getRelativePoint([e.clientX,e.clientY],container))}function endDrawMouse(e){endDraw(getRelativePoint([e.clientX,e.clientY],container),e.shiftKey)}function startDrawTouch(e){var relativePoint=getRelativePoint(getTouchCoords(e),container);starDraw(e.target,relativePoint,e.shiftKey)}function drawTouch(e){drawing(getRelativePoint(getTouchCoords(e),container))}function endDrawTouch(e){endDraw(getRelativePoint(getTouchCoords(e),container),e.shiftKey)}}),[currentDrawingTool]);var handleTrySelectObjects=function handleTrySelectObjects(currData,renderedMap){var elementIdsToSelect=function getElementIdsInsideOfBounds(renderedMap,bounds){var elementIdsToSelect=[];for(var elementId in renderedMap){var eleData=renderedMap[elementId];unselectElement(eleData),isRectBounding(bounds,eleData.container.bounds)&&elementIdsToSelect.push(elementId)}return elementIdsToSelect}(renderedMap,currData.container.bounds);handleSelectIds(elementIdsToSelect)},handleTryClickObject=function handleTryClickObject(renderedMap,bounds,didPressShift){var clickedEle=function getElementsThatBoundsAreWithin(renderedMap,bounds){var itemToSelect=null;for(var eleId in renderedMap){var _itemToSelect$style$z,_itemToSelect,eleData=renderedMap[eleId];if(isRectBounding(eleData.container.bounds,bounds))(null!==(_itemToSelect$style$z=null===(_itemToSelect=itemToSelect)||void 0===_itemToSelect?void 0:_itemToSelect.style.zIndex)&&void 0!==_itemToSelect$style$z?_itemToSelect$style$z:0<eleData.style.zIndex)&&(itemToSelect=eleData)}return itemToSelect}(renderedMap,bounds),ids=unselectEverythingAndReturnPrevious().ids;didPressShift||(ids=[]),null!==clickedEle&&(ids=ids.concat([clickedEle.container.id])),handleSelectIds(ids)},handleSelectIds=function handleSelectIds(objectIds){currentlySelectedElements.current=objectIds;var objects=getElementsByIds(objectIds);return 1===objects.length?selectElement(objects[0]):objects.length>1?function selectManyElements(selectObjects){var _step2,_iterator2=utils_createForOfIteratorHelper(selectObjects);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var data=_step2.value,selectFrame=makeSelectFrameDiv(data);selectFrame&&data.container.div.appendChild(selectFrame)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}(objects):void 0},getElementsByIds=function getElementsByIds(ids){return ids.map((function(id){return renderedElementsMap.current[id]}))},unselectEverythingAndReturnPrevious=function unselectEverythingAndReturnPrevious(){var _getSelectedDrawingOb2=getSelectedDrawingObjects(),objects=_getSelectedDrawingOb2.objects,ids=_getSelectedDrawingOb2.ids;return function unselectAll(selectedObjects){var _step,_iterator=utils_createForOfIteratorHelper(selectedObjects);try{for(_iterator.s();!(_step=_iterator.n()).done;)unselectElement(_step.value)}catch(err){_iterator.e(err)}finally{_iterator.f()}}(objects),currentSelectMode.current=null,previousMousePos.current=null,currentlySelectedElements.current=[],{ids:ids,objects:objects}},getSelectedDrawingObjects=function getSelectedDrawingObjects(){var ids=currentlySelectedElements.current;return{objects:getElementsByIds(ids),ids:ids}};return Object(jsx_runtime.jsxs)(Container,{layout:layout,children:[!hideTopBar&&Object(jsx_runtime.jsx)(TopToolBar,{tools:topBarTools,onSelectTool:function handleSelectTopTool(toolId){if(currentDrawingTool.id!==toolId){var selectedTool=getToolById(topBarTools,toolId);selectedTool&&setCurrentDrawingTool(selectedTool)}toolId!==CURSOR_ID&&unselectEverythingAndReturnPrevious()},currentTool:currentDrawingTool.id}),Object(jsx_runtime.jsx)("div",{id:drawingAreaId.current,style:{position:"relative",width:"100%",flex:1,boxSizing:"border-box"},ref:drawingAreaRef,children:children}),Object(jsx_runtime.jsx)("div",{}),Object(jsx_runtime.jsx)("style",{children:"\n\t\t#"+drawingAreaId.current+" {\n\t\t\tcursor: "+(currentDrawingTool.cursor||"defautl")+";\n\t\t}\n\t  "})]})}function getToolById(tools,id){var tool=tools.find((function(t){return t.id===id}));if(!tool)throw new Error("could not find the used tool");return tool}ReactDraw.displayName="ReactDraw";try{ReactDraw.displayName="ReactDraw",ReactDraw.__docgenInfo={description:"",displayName:"ReactDraw",props:{layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"LayoutOption"}},topBarTools:{defaultValue:null,description:"",name:"topBarTools",required:!0,type:{name:"DrawingTools[]"}},hideTopBar:{defaultValue:null,description:"",name:"hideTopBar",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/index.tsx#ReactDraw"]={docgenInfo:ReactDraw.__docgenInfo,name:"ReactDraw",path:"src/ReactDraw/index.tsx#ReactDraw"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("./node_modules/core-js/modules/es.string.match.js");var PencilBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/icons/PencilBoldIcon.js"),FreeDrawTool={id:"free-draw-tool",icon:Object(jsx_runtime.jsx)(PencilBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var lineWidth=data.style.lineWidth,newSvg=createSvg(lineWidth,lineWidth),newPath=function createCircle(radius){if(!isBrowser())throw new Error("createPath called on server");var ele=document.createElementNS("http://www.w3.org/2000/svg","circle");return ele.setAttribute("fill","black"),ele.setAttribute("cx",""+Math.ceil(radius/2)),ele.setAttribute("cy",""+Math.ceil(radius/2)),ele.setAttribute("r",""+radius),ele}(lineWidth/2);newSvg.appendChild(newPath),data.container.div.appendChild(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,viewContainer){!function expandContainer(data){var didExapnd=!1,_data$coords=_slicedToArray(data.coords[data.coords.length-1],2),newX=_data$coords[0],newY=_data$coords[1],container=data.container,bounds=container.bounds,lineWidth=data.style.lineWidth;return newX-lineWidth<=bounds.left?(bounds.left=newX-lineWidth,container.div.style.left=newX-lineWidth+"px",container.div.style.width=bounds.right+2*lineWidth-newX+"px",didExapnd=!0):newX+lineWidth>=bounds.right&&(bounds.right=newX+lineWidth,container.div.style.width=newX+2*lineWidth-bounds.left+"px",didExapnd=!0),newY+lineWidth>=bounds.bottom?(bounds.bottom=newY+lineWidth,container.div.style.height=newY+2*lineWidth-bounds.top+"px",didExapnd=!0):newY-lineWidth<=bounds.top&&(bounds.top=newY-lineWidth,container.div.style.top=newY-lineWidth+"px",container.div.style.height=bounds.bottom+2*lineWidth-newY+"px",didExapnd=!0),didExapnd}(data);var boxSize=function getBoxSize(data){var bounds=data.container.bounds;return{width:bounds.right-bounds.left,height:bounds.bottom-bounds.top}}(data),newSvg=createSvg(boxSize.width,boxSize.height),path=function svgPathFromData(data,viewContainer){var newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke","black"),newPath.setAttribute("stroke-width","4px"),newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath.setAttribute("d",function getPathDString(data,viewContainer){for(var pathString="",lastPoint=data.coords[0],i=0;i<data.coords.length;i++){var mappedPoint=mapPointToRect(data.coords[i],data.container,viewContainer);pathString+=getPathPoint(mappedPoint,lastPoint,i),lastPoint=mappedPoint,i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath}(data,viewContainer);newSvg.appendChild(path),data.container.div.innerHTML="",data.container.div.appendChild(newSvg),data.element=newSvg},onDrawEnd:function onDrawEnd(data){console.log("free draw end")},onUpdate:function onUpdate(data,ctx){if(data.element){var _getOriginalDimension=function getOriginalDimensions(svg){var viewBox=svg.getAttribute("viewbox");if(!viewBox)throw new Error("no viewbox found on ele");var each=viewBox.split(" ");return{width:parseFloat(each[2]),height:parseFloat(each[3])}}(data.element),width=_getOriginalDimension.width,height=_getOriginalDimension.height,widthDiff=(data.container.bounds.right-data.container.bounds.left)/width,heightDiff=(data.container.bounds.bottom-data.container.bounds.top)/height;data.element.lastElementChild.style.transform="scale("+widthDiff+", "+heightDiff+")"}},cursor:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjU4NTggMC41ODU3ODZDMTEuMzY2OCAtMC4xOTUyNjIgMTIuNjMzMiAtMC4xOTUyNjIgMTMuNDE0MiAwLjU4NTc4NkMxNC4xOTUzIDEuMzY2ODMgMTQuMTk1MyAyLjYzMzE2IDEzLjQxNDIgMy40MTQyMUwxMi42MjEzIDQuMjA3MTFMOS43OTI4OSAxLjM3ODY4TDEwLjU4NTggMC41ODU3ODZaIiBmaWxsPSIjMTExODI3Ii8+CjxwYXRoIGQ9Ik04LjM3ODY4IDIuNzkyODlMMCAxMS4xNzE2VjE0SDIuODI4NDJMMTEuMjA3MSA1LjYyMTMyTDguMzc4NjggMi43OTI4OVoiIGZpbGw9IiMxMTE4MjciLz4KPC9zdmc+') 0 16, pointer"};function getPathPoint(curr,prev,index){return 0===index?"M "+curr[0]+" "+curr[1]:"l "+(curr[0]-prev[0])+" "+(curr[1]-prev[1])}__webpack_require__("./node_modules/core-js/modules/es.array.splice.js");var CursorClickIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/icons/CursorClickIcon.js"),SelectTool={icon:Object(jsx_runtime.jsx)(CursorClickIcon.a,{style:{transform:"translate(-2px, -1px)"}}),id:CURSOR_ID,onDrawStart:function onDrawStart(data){data.container.div.style.border="1px solid "+COLORS_primary.main,data.container.div.style.backgroundColor=COLORS_primary.light+"4d"},onDrawing:function onDrawing(data){setContainerRect(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data){var _div$parentElement,div=data.container.div;div.style.border="none",div.style.backgroundColor="transparent",null===(_div$parentElement=div.parentElement)||void 0===_div$parentElement||_div$parentElement.removeChild(div),console.log("select tool end");var ele=document.getElementById(data.container.id);ele&&ele.remove()},onUpdate:function onUpdate(data){}},SquareBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/icons/SquareBoldIcon.js"),SquareTool={id:"react-draw-square-tool",icon:Object(jsx_runtime.jsx)(SquareBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var newSquare=function makeSquareDiv(lineWidth){var div=document.createElement("div");return div.style.width="100%",div.style.height="100%",div.style.border=lineWidth+"px solid black",div.style.borderRadius="2px",div}(data.style.lineWidth);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){setContainerRect(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data){},onUpdate:function onUpdate(data,ctx){}};var CircleBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/icons/CircleBoldIcon.js"),CircleTool={id:"react-draw-circle-tool",icon:Object(jsx_runtime.jsx)(CircleBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var newSquare=function makeCircleDiv(lineWidth){var newDiv=document.createElement("div");return newDiv.style.width="100%",newDiv.style.height="100%",newDiv.style.border=lineWidth+"px solid black",newDiv.style.borderRadius="50%",newDiv}(data.style.lineWidth);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){setContainerRect(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data){},onUpdate:function onUpdate(data,ctx){}};__webpack_exports__.default={title:"ReactDraw",component:ReactDraw};var ReactDraw_stories_Template=function Template(args){return Object(jsx_runtime.jsx)(ReactDraw,Object.assign({},args))};ReactDraw_stories_Template.displayName="Template";var ReactDraw_stories_topBarTools=[SelectTool,FreeDrawTool,SquareTool,CircleTool],DefaultLayoutWithoutChildren=ReactDraw_stories_Template.bind({});DefaultLayoutWithoutChildren.args={topBarTools:ReactDraw_stories_topBarTools};var HideTopBar=ReactDraw_stories_Template.bind({});HideTopBar.args={topBarTools:[FreeDrawTool],hideTopBar:!0};var DefaultLayoutWithChildren=ReactDraw_stories_Template.bind({});DefaultLayoutWithChildren.args={topBarTools:ReactDraw_stories_topBarTools,children:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("p",{children:" hello world"})})};var FitLayoutWithChildren=ReactDraw_stories_Template.bind({});FitLayoutWithChildren.args={topBarTools:ReactDraw_stories_topBarTools,children:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("p",{children:" hello world"})}),layout:"fit"},DefaultLayoutWithoutChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithoutChildren.parameters),HideTopBar.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},HideTopBar.parameters),DefaultLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithChildren.parameters),FitLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FitLayoutWithChildren.parameters)},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,4,5]]]);