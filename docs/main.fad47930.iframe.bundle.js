(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},options:{storySort:{method:"alphabetical",order:["Introduction","Drawing Tools","Type Descriptions"],locales:"en-US"}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./stories/ReactDraw.stories.tsx":"./src/stories/ReactDraw.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$":function(module,exports,__webpack_require__){var map={"./stories/DrawingTools.stories.mdx":"./src/stories/DrawingTools.stories.mdx","./stories/Introduction.stories.mdx":"./src/stories/Introduction.stories.mdx","./stories/TypeDescriptions.stories.mdx":"./src/stories/TypeDescriptions.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"},"./src/stories/DrawingTools.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Drawing Tools",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Drawing Tools"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"ReactDraw uses a plugin system for drawing tools.\nThis allows you to have full control over the functionality of the component.\nYou can import the tools you want, hook in to the drawing stages, and create your own tools.\nThe type definition of a drawing tool is described by the typescript below."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"icon: ")," the icon to be displayed in the top bar tools"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"id")," required so that react draw can identify objects created by this id"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"cursor")," sets the the cursor of the mouse while over the viewContainer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawStart")," called on mousedown/touchstart. includes data like the coordinates, etc. (see more below)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawing")," called during each new point. (mousemove)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawEnd")," called after mouseup/touchend"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onResize")," called when the object is being resized (corner expand action while using select tool)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"DrawingData")," includes the mouse coordinates, the container div, current styles, etc."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"viewContainer")," the div that is the react-draw full drawing area. This is used to help calculate relative coordinates.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"More of the types included in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"Type Descriptions")," page."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingTools = {\n  icon: JSX.Element;\n  id: string;\n  onDrawStart: (data: DrawingData, viewContainer: HTMLDivElement) => void;\n  onDrawing: (data: DrawingData, viewContainer: HTMLDivElement) => void;\n  onDrawEnd: (data: DrawingData, viewContainer: HTMLDivElement) => void;\n  onResize: (data: DrawingData, ctx: OnResizeContext) => void;\n  cursor?: string;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Free Draw Tool"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"For example here is the free draw tool implementation."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawStart")," the free draw tool creates a circle since there is only a single ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords `Point`"),". An svg element is created and then appended a child to the object container. The object container is a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"div"),"element that is created for you at the correct position in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,'"viewContainer"')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawing")," the tool must expand the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,'"viewContainer" div')," to be the correct dimensions. Then a new svg is created based on the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords")," information. It's important to note that the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords")," points are ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[x, y]")," coordinates relative to the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"viewContainer"),". Drawing in the top left corner of the drawing area will be represented by ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[0, 0]")," and the bottom right corner is represented by"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[width, height]"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawEnd")," no more work needs to be done."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onResize")," the div has been set to the correct dimensions for you and so we need to take care of scaling the svg inside."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'const freeDrawTool: DrawingTools = {\n  id: "free-draw-tool",\n  icon: <PencilBoldIcon />,\n  onDrawStart: (data) => {\n    const lineWidth = parseInt(data.style.lineWidth);\n    const newSvg = createSvg(lineWidth, lineWidth);\n    const newPath = createCircle(lineWidth / 2);\n    newSvg.appendChild(newPath);\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawing: (data, viewContainer) => {\n    expandContainer(data);\n    const boxSize = getBoxSize(data);\n    const newSvg = createSvg(boxSize.width, boxSize.height);\n    const path = svgPathFromData(data, viewContainer);\n    newSvg.appendChild(path);\n    data.container.div.innerHTML = "";\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawEnd: (data) => {\n    // console.log("free draw end");\n  },\n  onResize: (data, ctx) => {\n    if (!data.element) {\n      return;\n    }\n    scaleSvg(data.element as SVGSVGElement, data.container.bounds);\n  },\n  cursor: `url(\'data:image/svg+xml;base64,${cursorPencilBase64}\') 0 16, pointer`,\n};\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Drawing Tools",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./src/stories/Introduction.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Introduction",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Welcome to @jzohdi/react-draw Storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"This is a fully customizable drawing area library written in react + typescript.\nIncluded only the tools you want for the smallest bundle size or add your own."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Installation"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"Install using ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"npm")," or ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"yarn")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"npm install @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"yarn add @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Example"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport {\n  ReactDraw,\n  circleTool,\n  squareTool,\n  selectTool,\n  freeDrawTool,\n  diamondTool,\n  straightLineTool,\n  arrowTool,\n} from "@jzohdi/react-draw";\n\nexport default function MyComponent() {\n  <div>\n    <h1>Example page title</h1>\n    <ReactDraw\n      topBarTools={[\n        selectTool,\n        freeDrawTool,\n        squareTool,\n        circleTool,\n        diamondTool,\n        straightLineTool,\n        arrowTool,\n      ]}\n    >\n      ... any child you want can go inside the drawing area.\n    </ReactDraw>\n  </div>;\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Prop Type"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'type ReactDrawProps = {\n  children?: ReactChild;\n  layout?: LayoutOption;\n  topBarTools: DrawingTools[];\n  hideTopBar?: boolean;\n};\n\ntype LayoutOption = "default" | LayoutAbsolute | "fit";\n\ntype LayoutAbsolute = {\n  width: number | string;\n  height: number | string;\n};\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Roadmap"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","duplicate action"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","reorder (back front) actions"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul"},"[-][free draw bezier curve]",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("a",{parentName:"li",href:"https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74"},"1")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","tooltips"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","optional tool labels"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","tool bar overflow"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","fix resize when rotated"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","remove dep on styled components - used for hover and animations")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Stack"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","react"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","typescript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","styled-components"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","rollup")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./src/stories/ReactDraw.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultLayoutWithoutChildren",(function(){return DefaultLayoutWithoutChildren})),__webpack_require__.d(__webpack_exports__,"HideTopAndBottomBar",(function(){return HideTopAndBottomBar})),__webpack_require__.d(__webpack_exports__,"DefaultLayoutWithChildren",(function(){return DefaultLayoutWithChildren})),__webpack_require__.d(__webpack_exports__,"FitLayoutWithChildren",(function(){return FitLayoutWithChildren}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));var defaultStyles={boxShadow:"#000000 0px 1px 3px 0px",borderRadius:4,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",fontFamily:"sans-serif"};function Container(_ref){var children=_ref.children,styles=function getStyles(layout){return"default"===layout?{width:500,height:500,maxWidth:"100%"}:"fit"===layout?{maxWidth:"100%"}:void 0}(_ref.layout);return Object(jsx_runtime.jsx)("div",{style:Object.assign({},defaultStyles,styles),children:children})}Container.displayName="Container";try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"LayoutOption"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/Container.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/ReactDraw/Container.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}var _templateObject,_templateObject2,styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),ERASE_TOOL_ID="react-draw-erase-tool",SELECT_TOOL_ID="react-draw-cursor",COLORS_primary={light:"#bddefb",main:"#228be6"},COLORS_grey={light:"#ececec"};function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var ToolTip_templateObject,ToolTip_templateObject2,_templateObject3,_templateObject4,Wrapper=styled_components_browser_esm.b.button(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),450,450,COLORS_grey.light,(function(props){return props.selected&&Object(styled_components_browser_esm.a)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n      background-color: "," !important;\n      > svg path {\n        fill: white;\n      }\n    "])),COLORS_primary.main)}));function ToolIconWrapper(_ref){var children=_ref.children,selected=_ref.selected,onSelect=_ref.onSelect;return Object(jsx_runtime.jsx)(Wrapper,{selected:selected,onClick:onSelect,children:children})}ToolIconWrapper.displayName="ToolIconWrapper";try{ToolIconWrapper.displayName="ToolIconWrapper",ToolIconWrapper.__docgenInfo={description:"",displayName:"ToolIconWrapper",props:{selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"]={docgenInfo:ToolIconWrapper.__docgenInfo,name:"ToolIconWrapper",path:"src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ToolTip_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var TopToolBar_templateObject,ToolTipContainer=styled_components_browser_esm.b.span(ToolTip_templateObject||(ToolTip_templateObject=ToolTip_taggedTemplateLiteralLoose(["\n  position: relative;\n  display: inline-block;\n"]))),ToolTipText=styled_components_browser_esm.b.span(ToolTip_templateObject2||(ToolTip_templateObject2=ToolTip_taggedTemplateLiteralLoose(["\n  visibility: hidden;\n  /* min-width: 120px; */\n  white-space: nowrap;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px 10px;\n  position: absolute;\n  z-index: 1000;\n  ","\n"])),(function(props){return props.open&&!props.disabled?Object(styled_components_browser_esm.a)(_templateObject3||(_templateObject3=ToolTip_taggedTemplateLiteralLoose(["\n        visibility: visible;\n        top: ",";\n        left: ",";\n      "])),props.top,props.left):Object(styled_components_browser_esm.a)(_templateObject4||(_templateObject4=ToolTip_taggedTemplateLiteralLoose(["\n      visibility: hidden;\n      top: ",";\n      left: ",";\n    "])),props.top,props.left)}));function ToolTip(_ref){var children=_ref.children,text=_ref.text,top=_ref.top,left=_ref.left,disabled=_ref.disabled,_useState2=_slicedToArray(Object(react.useState)(!1),2),open=_useState2[0],setOpen=_useState2[1],containerRef=Object(react.useRef)(null);return Object(react.useEffect)((function(){var container=containerRef.current;if(container)return container.addEventListener("mouseover",showToolTip),container.addEventListener("mouseleave",hideToolTip),function(){container.removeEventListener("mouseover",showToolTip),container.removeEventListener("mouseleave",hideToolTip)};function showToolTip(){setOpen(!0)}function hideToolTip(){setOpen(!1)}}),[]),text?Object(jsx_runtime.jsxs)(ToolTipContainer,{ref:containerRef,children:[Object(jsx_runtime.jsx)(ToolTipText,{open:open,left:left,top:top,disabled:disabled,children:text}),children]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children})}ToolTip.displayName="ToolTip";try{ToolTip.displayName="ToolTip",ToolTip.__docgenInfo={description:"",displayName:"ToolTip",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},top:{defaultValue:null,description:"",name:"top",required:!0,type:{name:"string"}},left:{defaultValue:null,description:"",name:"left",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ToolTip.tsx#ToolTip"]={docgenInfo:ToolTip.__docgenInfo,name:"ToolTip",path:"src/components/ToolTip.tsx#ToolTip"})}catch(__react_docgen_typescript_loader_error){}var TopBarContainer=styled_components_browser_esm.b.div(TopToolBar_templateObject||(TopToolBar_templateObject=function TopToolBar_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  display: flex;\n  background-color: ",";\n  z-index: 1000;\n"])),COLORS_primary.light);function TopToolBar(_ref){var tools=_ref.tools,onSelectTool=_ref.onSelectTool,currentTool=_ref.currentTool;return Object(jsx_runtime.jsx)(TopBarContainer,{children:tools.map((function(tool,i){var tooltip=tool.tooltip;return Object(react.createElement)(ToolTip,Object.assign({text:tooltip},function getPosition(tool,index){return tool.tooltip?index<=tools.length/2?{top:"50px",left:"0"}:{top:"50px",left:"-"+3*tool.tooltip.length+"px"}:{top:"",left:""}}(tool,i),{key:tool.id}),Object(jsx_runtime.jsx)(ToolIconWrapper,{selected:tool.id===currentTool,onSelect:function onSelect(){return onSelectTool(tool.id)},children:tool.icon}))}))})}TopToolBar.displayName="TopToolBar";try{TopToolBar.displayName="TopToolBar",TopToolBar.__docgenInfo={description:"",displayName:"TopToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"TopBarTool[]"}},onSelectTool:{defaultValue:null,description:"",name:"onSelectTool",required:!0,type:{name:"(id: string) => void"}},currentTool:{defaultValue:null,description:"",name:"currentTool",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/TopToolBar.tsx#TopToolBar"]={docgenInfo:TopToolBar.__docgenInfo,name:"TopToolBar",path:"src/ReactDraw/TopToolBar.tsx#TopToolBar"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js");function utils_slicedToArray(arr,i){return function utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function utils_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||utils_unsupportedIterableToArray(arr,i)||function utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function utils_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?utils_arrayLikeToArray(o,minLen):void 0}}function utils_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeid(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}function isBrowser(){return void 0!==typeof window}function makeNewBoundingDiv(relativePoint,globalStyles,toolId){if(!isBrowser())throw new Error("new bounding div called on the server.");var lineWidth=parseInt(globalStyles.lineWidth),_relativePoint=utils_slicedToArray(relativePoint,2),_makeNewDiv=function makeNewDiv(pointX,pointY,lineWidth,toolId){var id=makeid(6),div=document.createElement("div"),left=pointX-lineWidth,top=pointY-lineWidth;return div.id=toolId+"-"+id,div.style.width=2*lineWidth+"px",div.style.height=2*lineWidth+"px",div.style.position="absolute",div.style.left=left+"px",div.style.top=top+"px",div.style.pointerEvents="none",div.style.zIndex="1",div.style.boxSizing="border-box",{div:div,id:id,top:top,left:left,right:left+lineWidth+lineWidth,bottom:top+lineWidth+lineWidth}}(_relativePoint[0],_relativePoint[1],lineWidth,toolId);return{coords:[relativePoint],element:null,toolId:toolId,container:{id:_makeNewDiv.id,div:_makeNewDiv.div,bounds:{top:_makeNewDiv.top,left:_makeNewDiv.left,right:_makeNewDiv.right,bottom:_makeNewDiv.bottom}},style:globalStyles,customData:new Map}}function scaleSvg(svgEle,bounds){var _getOriginalDimension=function getOriginalDimensions(svg){var viewBox=svg.getAttribute("viewbox");if(!viewBox)throw new Error("no viewbox found on ele");var each=viewBox.split(" ");return{width:parseFloat(each[2]),height:parseFloat(each[3])}}(svgEle),width=_getOriginalDimension.width,height=_getOriginalDimension.height,widthDiff=(bounds.right-bounds.left)/width,heightDiff=(bounds.bottom-bounds.top)/height;svgEle.lastElementChild.style.transform="scale("+widthDiff+", "+heightDiff+")"}function mapPointToRect(point,container,viewContainer){var containerBounds=container.div.getBoundingClientRect(),viewBounds=viewContainer.getBoundingClientRect(),topOfCotainerRelativeToView=containerBounds.top-viewBounds.top,pointYRelativeToContainer=point[1]-topOfCotainerRelativeToView,leftOfContainerRelativeToView=containerBounds.left-viewBounds.left;return[point[0]-leftOfContainerRelativeToView,pointYRelativeToContainer]}function expandContainer(data){var didExapnd=!1,_data$coords=utils_slicedToArray(data.coords[data.coords.length-1],2),newX=_data$coords[0],newY=_data$coords[1],container=data.container,bounds=container.bounds,lineWidth=parseInt(data.style.lineWidth);return newX-lineWidth<=bounds.left?(bounds.left=newX-lineWidth,container.div.style.left=newX-lineWidth+"px",container.div.style.width=bounds.right+2*lineWidth-newX+"px",didExapnd=!0):newX+lineWidth>=bounds.right&&(bounds.right=newX+lineWidth,container.div.style.width=newX+2*lineWidth-bounds.left+"px",didExapnd=!0),newY+lineWidth>=bounds.bottom?(bounds.bottom=newY+lineWidth,container.div.style.height=newY+2*lineWidth-bounds.top+"px",didExapnd=!0):newY-lineWidth<=bounds.top&&(bounds.top=newY-lineWidth,container.div.style.top=newY-lineWidth+"px",container.div.style.height=bounds.bottom+2*lineWidth-newY+"px",didExapnd=!0),didExapnd}function setContainerRect(data){if(data.coords.length<2)throw new Error("data coords must be at least length 2");var _data$coords$=utils_slicedToArray(data.coords[0],2),firstX=_data$coords$[0],firstY=_data$coords$[1],_data$coords2=utils_slicedToArray(data.coords[data.coords.length-1],2),lastX=_data$coords2[0],lastY=_data$coords2[1],lineWidth=parseInt(data.style.lineWidth),minX=Math.min(firstX,lastX),minY=Math.min(firstY,lastY),maxX=Math.max(firstX,lastX),maxY=Math.max(firstY,lastY),_data$container=data.container,bounds=_data$container.bounds,div=_data$container.div;return bounds.left=minX,bounds.right=maxX,bounds.top=minY,bounds.bottom=maxY,div.style.top=minY+"px",div.style.left=minX+"px",div.style.width=maxX-minX+lineWidth+"px",div.style.height=maxY-minY+lineWidth+"px",data.coords}function getElementsThatBoundsAreWithin(renderedMap,bounds){var _step,itemToSelect=null,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(renderedMap.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _itemToSelect$style$z,_itemToSelect,_ref2=utils_slicedToArray(_step.value,2),eleData=(_ref2[0],_ref2[1]),zIndex=parseInt(eleData.style.zIndex);if(isRectBounding(eleData.container.bounds,bounds))(null!==(_itemToSelect$style$z=null===(_itemToSelect=itemToSelect)||void 0===_itemToSelect?void 0:_itemToSelect.style.zIndex)&&void 0!==_itemToSelect$style$z?_itemToSelect$style$z:0<zIndex)&&(itemToSelect=eleData)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return itemToSelect}function isRectBounding(bounds,object){return bounds.top<=object.top&&bounds.bottom>=object.bottom&&bounds.left<=object.left&&bounds.right>=object.right}function makeBoundingRect(point){var _point=utils_slicedToArray(point,2),x=_point[0],y=_point[1];return{top:y,right:x,bottom:y,left:x}}function getBoxSize(data){var bounds=data.container.bounds;return{width:bounds.right-bounds.left,height:bounds.bottom-bounds.top}}var BottomToolBar_templateObject,BottomToolBar_templateObject2,BottomToolBar_templateObject3,BottomToolBar_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,MenuIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/MenuIcon.js");function BottomToolBar_slicedToArray(arr,i){return function BottomToolBar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function BottomToolBar_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function BottomToolBar_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BottomToolBar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BottomToolBar_arrayLikeToArray(o,minLen)}(arr,i)||function BottomToolBar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BottomToolBar_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BottomToolBar_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var BottomBarContainer=styled_components_browser_esm.b.div(BottomToolBar_templateObject||(BottomToolBar_templateObject=BottomToolBar_taggedTemplateLiteralLoose(["\n  display: flex;\n  background-color: ",";\n  z-index: 1000;\n"])),COLORS_primary.light),BottomToolButton=styled_components_browser_esm.b.button(BottomToolBar_templateObject2||(BottomToolBar_templateObject2=BottomToolBar_taggedTemplateLiteralLoose(["\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  ","\n"])),450,450,(function(props){return"hide"===props.mode?Object(styled_components_browser_esm.a)(BottomToolBar_templateObject3||(BottomToolBar_templateObject3=BottomToolBar_taggedTemplateLiteralLoose(["\n        display: none;\n      "]))):props.disabled?Object(styled_components_browser_esm.a)(BottomToolBar_templateObject4||(BottomToolBar_templateObject4=BottomToolBar_taggedTemplateLiteralLoose(["\n        cursor: not-allowed;\n        background-color: white;\n        > svg path {\n          fill: lightgrey;\n          stroke: lightgrey;\n        }\n      "]))):Object(styled_components_browser_esm.a)(_templateObject5||(_templateObject5=BottomToolBar_taggedTemplateLiteralLoose(["\n      &:hover {\n        background-color: ",";\n      }\n      display: inline-block;\n    "])),COLORS_grey.light)})),MenuButton=styled_components_browser_esm.b.button(_templateObject6||(_templateObject6=BottomToolBar_taggedTemplateLiteralLoose(["\n  position: relative;\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),450,450,COLORS_grey.light,(function(props){return props.open?Object(styled_components_browser_esm.a)(_templateObject7||(_templateObject7=BottomToolBar_taggedTemplateLiteralLoose(["\n        background-color: "," !important;\n        > svg path {\n          fill: white;\n          stroke: white;\n        }\n      "])),COLORS_primary.main):Object(styled_components_browser_esm.a)(_templateObject8||(_templateObject8=BottomToolBar_taggedTemplateLiteralLoose([""])))})),Menu=styled_components_browser_esm.b.div(_templateObject9||(_templateObject9=BottomToolBar_taggedTemplateLiteralLoose(["\n  position: absolute;\n  left: 0;\n  padding: 15px;\n  border: 1px solid ",";\n  z-index: 1000;\n  background-color: white;\n  border-radius: 0px 5px 0px 0px;\n  @media only screen and (min-width: ","px) {\n    bottom: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    bottom: 30px;\n  }\n"])),COLORS_primary.main,450,450);function BottomToolBar(_ref){var tools=_ref.tools,displayMap=_ref.displayMap,dispatch=_ref.dispatch,children=_ref.children,_useState2=BottomToolBar_slicedToArray(Object(react.useState)(!1),2),showMenu=_useState2[0],setShowMenu=_useState2[1];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showMenu&&Object(jsx_runtime.jsx)(Menu,{children:children}),Object(jsx_runtime.jsxs)(BottomBarContainer,{children:[children&&Object(jsx_runtime.jsx)(ToolTip,{text:"Menu",top:"-40px",left:"10px",children:Object(jsx_runtime.jsx)(MenuButton,{onClick:function onClick(){return setShowMenu(!showMenu)},open:showMenu,children:Object(jsx_runtime.jsx)(MenuIcon.a,{size:30})})}),tools.map((function(tool,i){var toolId=tool.id,toolDisplayMode=displayMap.get(toolId)||"hide";return Object(jsx_runtime.jsx)(ToolTip,Object.assign({text:tool.tooltip},function getPosition(tool,index){return tool.tooltip?index<=tools.length/2?{top:"-35px",left:"0"}:{top:"-35px",left:"-"+3*tool.tooltip.length+"px"}:{top:"",left:""}}(tool,i),{disabled:"disabled"===toolDisplayMode,children:Object(jsx_runtime.jsx)(BottomToolButton,{disabled:"disabled"===toolDisplayMode,mode:toolDisplayMode,onClick:function onClick(){return dispatch(tool.handleContext)},children:tool.icon})}),tool.id)}))]})]})}try{BottomToolBar.displayName="BottomToolBar",BottomToolBar.__docgenInfo={description:"",displayName:"BottomToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"ActionTools[]"}},displayMap:{defaultValue:null,description:"",name:"displayMap",required:!0,type:{name:"BottomToolDisplayMap"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"(fn: (ctx: ReactDrawContext) => void) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/BottomToolBar.tsx#BottomToolBar"]={docgenInfo:BottomToolBar.__docgenInfo,name:"BottomToolBar",path:"src/ReactDraw/BottomToolBar.tsx#BottomToolBar"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js");function unselectElement_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function unselectElement_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return unselectElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return unselectElement_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function unselectElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function unselectElement(data,ctx){var objectId=data.container.id,div=data.container.div,state=ctx.fullState[SELECT_TOOL_ID],handlers=state.handlers[objectId];if(handlers){var _step,_iterator=unselectElement_createForOfIteratorHelper(handlers);try{for(_iterator.s();!(_step=_iterator.n()).done;){var handler=_step.value;handler.ele.removeEventListener(handler.eventName,handler.fn)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}var selectFrame=div.querySelector('[id^="select-frame"');state.handlers[objectId]=[],null!==selectFrame&&div.removeChild(selectFrame);var indexInSelectedIds=state.selectedIds.indexOf(objectId);indexInSelectedIds>=0&&state.selectedIds.splice(indexInSelectedIds,1)}function setStyles(div,styles){for(var key in styles)div.style[key]=styles[key];return div}function getToolById(tools,toolId){var tool=tools.find((function(t){return t.id===toolId}));if(!tool)throw new Error("could not find the used tool");return tool}function deleteObjectAndNotify(objectId,ctx){var objectsMap=ctx.objectsMap,viewContainer=ctx.viewContainer,object=getObjectFromMap(ctx.objectsMap,objectId);unselectElement(object,ctx);var _object$container=object.container,div=_object$container.div,id=_object$container.id;viewContainer.removeChild(div),objectsMap.delete(id);var tool=getToolById(ctx.drawingTools,object.toolId);tool.onDeleteObject&&tool.onDeleteObject(object,ctx)}function getObjectFromMap(map,objectId){var object=map.get(objectId);if(!object)throw new Error("could not get object from map");return object}function getRelativePoint(point,container){if(!container)throw new Error("Container not set.");var rect=container.getBoundingClientRect();return[point[0]-rect.left,point[1]-rect.top]}function getTouchCoords(e){var touch=e.touches[0];return touch||(touch=e.targetTouches[0]),touch||(touch=e.changedTouches[0]),[touch.clientX,touch.clientY]}function makeSureArtifactsGone(query,container){var objects=container.querySelectorAll(query);objects.length>0&&objects.forEach((function(obj){container.removeChild(obj)}))}function resizeObject_slicedToArray(arr,i){return function resizeObject_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeObject_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function resizeObject_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeObject_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeObject_arrayLikeToArray(o,minLen)}(arr,i)||function resizeObject_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeObject_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resizeNE(data,point){var _point=resizeObject_slicedToArray(point,2),xDiff=_point[0],yDiff=_point[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.right+=xDiff,div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeNW(data,point){var _point2=resizeObject_slicedToArray(point,2),xDiff=_point2[0],yDiff=_point2[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.left+=xDiff,div.style.top=bounds.top+"px",div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeSE(data,point){var _point3=resizeObject_slicedToArray(point,2),xDiff=_point3[0],yDiff=_point3[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom+yDiff<=bounds.top+5||(bounds.right+=xDiff,bounds.bottom+=yDiff,div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeSW(data,point){var _point4=resizeObject_slicedToArray(point,2),xDiff=_point4[0],yDiff=_point4[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom+yDiff<=bounds.top+5||(bounds.bottom+=yDiff,bounds.left+=xDiff,div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}var ROTATE_BUTTON_STYLES={top:"-45px",cursor:"grab",left:"calc(50% - 8px)"},SELECT_FRAME_DIV_STYLES={width:"calc(100% + 16px)",height:"calc(100% + 16px)",position:"absolute",border:"2px dotted "+COLORS_primary.main,top:"-6px",left:"-6px",cursor:"all-scroll",pointerEvents:"all",boxSizing:"border-box"},ROTATE_DOTTED_LINE_STYLES={width:"0px",height:"35px",borderLeft:"2px dotted black",position:"absolute",left:"5px",pointerEvents:"none"},SELECTED_CORNER_BUTTON={position:"absolute",borderRadius:"50%",width:"16px",height:"16px"};function getSelectedDrawingObjects(selectedIds,objects){return selectedIds.map((function(id){var object=objects.get(id);if(!object)throw new Error("object not found in map");return object}))}function alertAfterUpdate(data,ctx){var toolId=data.toolId,tool=ctx.drawingTools.find((function(t){return t.id===toolId}));tool&&tool.onAfterUpdate&&tool.onAfterUpdate(data,ctx)}function undo_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=undo_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function undo_slicedToArray(arr,i){return function undo_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function undo_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||undo_unsupportedIterableToArray(arr,i)||function undo_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function undo_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?undo_arrayLikeToArray(o,minLen):void 0}}function undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saveCreateToUndoStack(data,ctx){ctx.shouldKeepHistory&&pushActionToStack({toolId:data.toolId,toolType:"top-bar-tool",objectId:data.container.id,action:"create",data:null},ctx)}function undoCreate(action,ctx){var object=getObjectFromMap(ctx.objectsMap,action.objectId);return deleteObjectAndNotify(action.objectId,ctx),action.data=object,action.action="delete",action}function redoDelete(action,ctx){var object=action.data;if(!object)throw new Error("redo delete but no data exists");return ctx.objectsMap.set(object.container.id,object),ctx.viewContainer.appendChild(object.container.div),action.data=null,action.action="create",action}function pushActionToStack(action,ctx){ctx.shouldKeepHistory&&(ctx.undoStack.push(action),ctx.redoStack.splice(0))}function recreateDeletedObjects(action,ctx){var data=action.data;if(!data||"object"!=typeof data)throw new Error("malformed data");var _step,_iterator=undo_createForOfIteratorHelper(data.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=undo_slicedToArray(_step.value,2),objectId=_ref2[0],object=_ref2[1];ctx.viewContainer.appendChild(object.container.div),ctx.objectsMap.set(objectId,object)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.action="create",action.data=Array.from(data.keys()),action}function deleteCreatedObjects(action,ctx){var data=action.data;if(!data||!Array.isArray(data))throw console.error(action),new Error("malformed data");action.data=new Map;var _step2,_iterator2=undo_createForOfIteratorHelper(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var objectId=_step2.value;action.data.set(objectId,getObjectFromMap(ctx.objectsMap,objectId)),deleteObjectAndNotify(objectId,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.action="delete",action}function dragDivs_slicedToArray(arr,i){return function dragDivs_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function dragDivs_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||dragDivs_unsupportedIterableToArray(arr,i)||function dragDivs_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dragDivs_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return dragDivs_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dragDivs_arrayLikeToArray(o,minLen):void 0}}function dragDivs_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function dragDivs(objects,prevPoint,newPoint){var _step,_newPoint=dragDivs_slicedToArray(newPoint,2),currentMouseX=_newPoint[0],currentMouseY=_newPoint[1],_prevPoint=dragDivs_slicedToArray(prevPoint,2),newLeft=currentMouseX-_prevPoint[0],newTop=currentMouseY-_prevPoint[1],_iterator=function dragDivs_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=dragDivs_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(objects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _obj$container=_step.value.container,bounds=_obj$container.bounds,div=_obj$container.div,left=bounds.left,top=bounds.top,right=bounds.right,bottom=bounds.bottom;bounds.left=left+newLeft,bounds.top=top+newTop,bounds.right=bounds.left+(right-left),bounds.bottom=bounds.top+(bottom-top),div.style.top=bounds.top+"px",div.style.left=bounds.left+"px"}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function startDragging(ctx,relativePoint){var state=ctx.fullState[SELECT_TOOL_ID],prevPoint=state.prevPoint;if(prevPoint){var selectedObjects=getSelectedDrawingObjects(state.selectedIds,ctx.objectsMap);dragDivs(selectedObjects,prevPoint,relativePoint),state.prevPoint=relativePoint,1===selectedObjects.length&&alertAfterUpdate(selectedObjects[0],ctx)}}function startDrag(ctx,relativePoint){ctx.fullState[SELECT_TOOL_ID].prevPoint=relativePoint,function pushDragToUndoStack(ctx){var selectedObjects=getSelectedDrawingObjects(ctx.fullState[SELECT_TOOL_ID].selectedIds,ctx.objectsMap);pushActionToStack({objectId:"",toolId:SELECT_TOOL_ID,toolType:"top-bar-tool",action:"drag",data:selectedObjects.map((function(o){return{objectId:o.container.id,top:o.container.bounds.top,left:o.container.bounds.left}}))},ctx)}(ctx)}function stopDrag(ctx){ctx.fullState[SELECT_TOOL_ID].prevPoint=null}function addHandlersToSelectFrame(selectFrame,objectId,ctx){var handleStartDrag=function handleStartDrag(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("mousemove",handleDrag),window.addEventListener("mouseup",handleStopDrag)},handleDrag=function handleDrag(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDrag=function handleStopDrag(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("mousemove",handleDrag),window.removeEventListener("mouseup",handleStopDrag)},handleStartDragTouch=function handleStartDragTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("touchmove",handleDragTouch),window.addEventListener("touchend",handleStopDragTouch),window.addEventListener("touchcancel",handleStopDragTouch)},handleDragTouch=function handleDragTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDragTouch=function handleStopDragTouch(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("touchmove",handleDragTouch),window.removeEventListener("touchend",handleStopDragTouch),window.removeEventListener("touchcancel",handleStopDragTouch)},customState=ctx.fullState[SELECT_TOOL_ID],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartDrag}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartDragTouch}),selectFrame.addEventListener("mousedown",handleStartDrag),selectFrame.addEventListener("touchstart",handleStartDragTouch)}function startResizing(ctx,relativePoint,resizeFn){var state=ctx.fullState[SELECT_TOOL_ID],prevPoint=state.prevPoint;if(prevPoint){var selectedObject=getSelectedDrawingObjects(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0],pointDiff=function getPointDiff(pointA,pointB){return[pointA[0]-pointB[0],pointA[1]-pointB[1]]}(relativePoint,prevPoint),toolUsed=getToolById(ctx.drawingTools,data.toolId),newResizeCtx={viewContainer:ctx.viewContainer,newPoint:relativePoint,previousPoint:prevPoint};toolUsed.doResize?toolUsed.doResize(data,newResizeCtx):resizeFn(data,pointDiff),toolUsed.onResize(data,newResizeCtx),state.prevPoint=relativePoint}}function startResize(ctx,relativePoint){ctx.fullState[SELECT_TOOL_ID].prevPoint=relativePoint,function pushResizeToUndoStack(ctx){var selectedObjects=getSelectedDrawingObjects(ctx.fullState[SELECT_TOOL_ID].selectedIds,ctx.objectsMap);if(1!==selectedObjects.length)throw new Error("resize push to stack expects 1 object selected");var _selectedObjects$0$co=selectedObjects[0].container,id=_selectedObjects$0$co.id,bounds=_selectedObjects$0$co.bounds;pushActionToStack({objectId:id,toolId:SELECT_TOOL_ID,toolType:"top-bar-tool",action:"resize",data:{bounds:{top:bounds.top,left:bounds.left,right:bounds.right,bottom:bounds.bottom}}},ctx)}(ctx)}function stopResize(ctx){ctx.fullState[SELECT_TOOL_ID].prevPoint=null}function addHandlersToCornerButton(buttonEle,objectId,ctx,resizeFn){var handleStartResizeMouse=function handleStartResizeMouse(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("mousemove",handleResizeMouse),window.addEventListener("mouseup",handleStopResizeMouse)},handleResizeMouse=function handleResizeMouse(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeMouse=function handleStopResizeMouse(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("mousemove",handleResizeMouse),window.removeEventListener("mouseup",handleStopResizeMouse)},handleStartResizeTouch=function handleStartResizeTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("touchmove",handleResizeTouch),window.addEventListener("touchend",handleStopResizeTouch),window.addEventListener("touchcancel",handleStopResizeTouch)},handleResizeTouch=function handleResizeTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeTouch=function handleStopResizeTouch(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("touchmove",handleResizeTouch),window.removeEventListener("touchend",handleStopResizeTouch),window.removeEventListener("touchcancel",handleStopResizeTouch)},customState=ctx.fullState[SELECT_TOOL_ID],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:buttonEle,eventName:"mousedown",fn:handleStartResizeMouse}),handlers.push({ele:buttonEle,eventName:"touchstart",fn:handleStartResizeTouch}),buttonEle.addEventListener("mousedown",handleStartResizeMouse),buttonEle.addEventListener("touchstart",handleStartResizeTouch)}__webpack_require__("./node_modules/core-js/modules/es.string.match.js");var rotateNumRegex=/-{0,1}\d+\.*\d*/g;function getRotateFromDiv(div){var rotateStyle=div.style.transform;if(!rotateStyle)return 0;var match=rotateStyle.match(rotateNumRegex);return match?parseFloat(match[0]):0}function startRotating(ctx,relativePoint){var state=ctx.fullState[SELECT_TOOL_ID];if(state.prevPoint){var selectedObject=getSelectedDrawingObjects(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0];!function rotateDiv(object,newPoint,referenceCenter){var div=object.container.div,x=newPoint[0]-referenceCenter[0],y=newPoint[1]-referenceCenter[1],angleDeg=180*Math.atan2(y,x)/Math.PI+90;div.style.transform="rotate("+angleDeg+"deg)"}(data,relativePoint,function getCenterPoint(bounds){var height=bounds.bottom-bounds.top,y=bounds.top+height/2,width=bounds.right-bounds.left;return[bounds.left+width/2,y]}(data.container.bounds)),state.prevPoint=relativePoint,alertAfterUpdate(data,ctx)}}function startRotate(ctx,relativePoint){ctx.fullState[SELECT_TOOL_ID].prevPoint=relativePoint,function pushRotateToUndoStack(ctx){var selectedObjects=getSelectedDrawingObjects(ctx.fullState[SELECT_TOOL_ID].selectedIds,ctx.objectsMap);pushActionToStack({objectId:"",toolId:SELECT_TOOL_ID,toolType:"top-bar-tool",action:"rotate",data:selectedObjects.map((function(o){return{objectId:o.container.id,rotate:getRotateFromDiv(o.container.div)}}))},ctx)}(ctx)}function stopRotate(ctx){ctx.fullState[SELECT_TOOL_ID].prevPoint=null}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return select_utils_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||select_utils_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function utils_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=select_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function select_utils_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return select_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?select_utils_arrayLikeToArray(o,minLen):void 0}}function select_utils_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function selectManyElements(selectObjects,ctx){var _step,_iterator=utils_createForOfIteratorHelper(selectObjects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var data=_step.value,selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.container.id,ctx),data.container.div.appendChild(selectFrame))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function makeSelectFrameDiv(data){var containerDiv=data.container.div,eleId=data.container.id;if(function isElementSelected(div){return null!==div.querySelector('[id^="select-frame"')}(containerDiv))return null;var div=document.createElement("div");return div.setAttribute("id","select-frame-"+eleId),setStyles(div,SELECT_FRAME_DIV_STYLES),div}function unselectAll(selectedObjects,ctx){var _step2,_iterator2=utils_createForOfIteratorHelper(selectedObjects);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){unselectElement(_step2.value,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}function selectElement(data,ctx){var selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.container.id,ctx),function addToolsToSelectionDiv(div,data,ctx){var eleId=data.container.id,topLeftCorner=cornerButton(eleId,!0,!1,!1,!0);addHandlersToCornerButton(topLeftCorner,eleId,ctx,resizeNW);var topRightCorner=cornerButton(eleId,!0,!0);addHandlersToCornerButton(topRightCorner,eleId,ctx,resizeNE);var bottomRightCorner=cornerButton(eleId,!1,!0,!0);addHandlersToCornerButton(bottomRightCorner,eleId,ctx,resizeSE);var bottomLeftCorner=cornerButton(eleId,!1,!1,!0,!0);addHandlersToCornerButton(bottomLeftCorner,eleId,ctx,resizeSW),div.appendChild(topLeftCorner),div.appendChild(topRightCorner),div.appendChild(bottomRightCorner),div.appendChild(bottomLeftCorner);var rotateButton=cornerButton(eleId);rotateButton.id="button-rotate-"+eleId,setStyles(rotateButton,ROTATE_BUTTON_STYLES),function addHandlersToRotateButton(selectFrame,objectId,ctx){var handleStartRotateMouse=function handleStartRotateMouse(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("mousemove",handleRotateMouse),window.addEventListener("mouseup",handleStopRotateMouse)},handleRotateMouse=function handleRotateMouse(e){e.stopPropagation();var relativePoint=getRelativePoint([e.clientX,e.clientY],ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateMouse=function handleStopRotateMouse(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("mousemove",handleRotateMouse),window.removeEventListener("mouseup",handleStopRotateMouse)},handleStartRotateTouch=function handleStartRotateTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("touchmove",handleRotatingTouch),window.addEventListener("touchend",handleStopRotateTouch),window.addEventListener("touchcancel",handleStopRotateTouch)},handleRotatingTouch=function handleRotatingTouch(e){e.stopPropagation();var relativePoint=getRelativePoint(getTouchCoords(e),ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateTouch=function handleStopRotateTouch(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("touchmove",handleRotatingTouch),window.removeEventListener("touchend",handleStopRotateTouch),window.removeEventListener("touchcancel",handleStopRotateTouch)},customState=ctx.fullState[SELECT_TOOL_ID],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartRotateMouse}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartRotateTouch}),selectFrame.addEventListener("mousedown",handleStartRotateMouse),selectFrame.addEventListener("touchstart",handleStartRotateTouch)}(rotateButton,eleId,ctx);var divLine=document.createElement("div");setStyles(divLine,ROTATE_DOTTED_LINE_STYLES),divLine.id="line-div-"+eleId,rotateButton.appendChild(divLine),div.appendChild(rotateButton)}(selectFrame,data,ctx),data.container.div.appendChild(selectFrame))}function cornerButton(eleId,top,right,bottom,left){var button=document.createElement("button");setStyles(button,SELECTED_CORNER_BUTTON);var buttonId="";return top?(button.style.top="-12px",buttonId+="n"):bottom&&(button.style.bottom="-12px",buttonId+="s"),right?(button.style.right="-12px",buttonId+="e"):left&&(button.style.left="-12px",buttonId+="w"),button.id="corner-button-"+buttonId+"-"+eleId,button.style.cursor=buttonId+"-resize",button}function getSelectedIdsFromFullState(ctx){var selectState=ctx.fullState[SELECT_TOOL_ID];if(!selectState)throw new Error("no select state present");return _toConsumableArray(selectState.selectedIds)}__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function EditMenu_slicedToArray(arr,i){return function EditMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EditMenu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EditMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditMenu_arrayLikeToArray(o,minLen)}(arr,i)||function EditMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EditMenu(_ref){var getEditProps=_ref.getEditProps,_ref$styleComponents=_ref.styleComponents,styleComponents=void 0===_ref$styleComponents?{}:_ref$styleComponents,onUpdateStyle=_ref.onUpdateStyle,_useState2=EditMenu_slicedToArray(Object(react.useState)(getEditProps()),2),state=_useState2[0],setState=_useState2[1],keysToRender=Object.keys(state).filter((function(k){return!!styleComponents[k]}));Object(react.useEffect)((function(){function updateEditProps(){var newState=getEditProps();setState(newState)}return window.addEventListener("click",updateEditProps),function(){window.removeEventListener("click",updateEditProps)}}),[state]);var onUpdate=function onUpdate(key,value){var _Object$assign;setState(Object.assign({},state,((_Object$assign={})[key]=value,_Object$assign)));var result=onUpdateStyle(key,value);console.log("onUpdateResult",result)};return 0===keysToRender.length?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{}):Object(jsx_runtime.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:keysToRender.map((function(key){var Component=styleComponents[key];return Object(jsx_runtime.jsx)(Component,{onUpdate:onUpdate,styleKey:key,styleValue:state[key]},key)}))})}EditMenu.displayName="EditMenu";try{EditMenu.displayName="EditMenu",EditMenu.__docgenInfo={description:"",displayName:"EditMenu",props:{getEditProps:{defaultValue:null,description:"",name:"getEditProps",required:!0,type:{name:"() => StringObject"}},styleComponents:{defaultValue:{value:"{}"},description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},onUpdateStyle:{defaultValue:null,description:"",name:"onUpdateStyle",required:!0,type:{name:"UpdateStyleFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/EditMenu.tsx#EditMenu"]={docgenInfo:EditMenu.__docgenInfo,name:"EditMenu",path:"src/ReactDraw/EditMenu.tsx#EditMenu"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["children","id","topBarTools","hideTopBar","bottomBarTools","hideBottomBar","shouldKeepHistory","shouldSelectAfterCreate","styleComponents"];function ReactDraw_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ReactDraw_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ReactDraw_slicedToArray(arr,i){return function ReactDraw_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReactDraw_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ReactDraw_unsupportedIterableToArray(arr,i)||function ReactDraw_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReactDraw_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ReactDraw_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ReactDraw_arrayLikeToArray(o,minLen):void 0}}function ReactDraw_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ReactDraw(_ref){var children=_ref.children,_ref$id=_ref.id,id=void 0===_ref$id?"main":_ref$id,topBarTools=_ref.topBarTools,hideTopBar=_ref.hideTopBar,bottomBarTools=_ref.bottomBarTools,hideBottomBar=_ref.hideBottomBar,_ref$shouldKeepHistor=_ref.shouldKeepHistory,shouldKeepHistory=void 0===_ref$shouldKeepHistor||_ref$shouldKeepHistor,_ref$shouldSelectAfte=_ref.shouldSelectAfterCreate,shouldSelectAfterCreate=void 0===_ref$shouldSelectAfte||_ref$shouldSelectAfte,styleComponents=_ref.styleComponents,props=_objectWithoutProperties(_ref,_excluded),drawingAreaRef=Object(react.useRef)(null),_useState2=ReactDraw_slicedToArray(Object(react.useState)(topBarTools[0]),2),currentDrawingTool=_useState2[0],setCurrentDrawingTool=_useState2[1],_validateProps=function validateProps(children,layout){var numChildren=react.Children.count(children);if(numChildren>1)throw new Error("ReactDraw expects either 0 or 1 children, detected more.");void 0===layout&&(layout="default");return{numChildren:numChildren,layout:layout}}(children,props.layout),layout=_validateProps.layout,renderedElementsMap=Object(react.useRef)(new Map),currDrawObj=Object(react.useRef)(null),drawingAreaId=Object(react.useRef)("drawing-area-container-"+id),previousMousePos=Object(react.useRef)(null),latestEvent=Object(react.useRef)(null),customState=Object(react.useRef)(function setupCustomStateSpace(tools){var _state,state=((_state={})[SELECT_TOOL_ID]={selectedIds:[],handlers:{},prevPoint:null},_state[ERASE_TOOL_ID]={deletedObjects:new Map},_state);return tools.reduce((function(prev,curr){return void 0===prev[curr.id]&&(prev[curr.id]={}),curr.setupCustomState&&(prev[curr.id]=Object.assign(prev[curr.id],curr.setupCustomState(state))),prev}),state)}(topBarTools)),undoStack=Object(react.useRef)([]),redoStack=Object(react.useRef)([]),objectToSelect=Object(react.useRef)(null),globalStyles=Object(react.useRef)(function setupGlobalStyles(topBarTools){return Object.assign({},defaultEditableProps)}()),_useState4=ReactDraw_slicedToArray(Object(react.useState)(new Map),2),bottomToolsDisplayMap=_useState4[0],setBottomToolsDisplayMap=_useState4[1],updateBottomToolDisplayMap=function updateBottomToolDisplayMap(){var newMap=function makeBottomBarDisplayMap(){var bottomDisplayMap=new Map;return bottomBarTools.reduce((function(prev,curr){return prev.set(curr.id,curr.getDisplayMode(getReactDrawContext())),prev}),bottomDisplayMap)}();if(newMap.size!==bottomToolsDisplayMap.size)return setBottomToolsDisplayMap(newMap);var _step,_iterator=ReactDraw_createForOfIteratorHelper(newMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _key=_step.value;if(newMap.get(_key)!==bottomToolsDisplayMap.get(_key))return setBottomToolsDisplayMap(newMap)}}catch(err){_iterator.e(err)}finally{_iterator.f()}};Object(react.useEffect)((function(){updateBottomToolDisplayMap()}),[]),Object(react.useEffect)((function(){if(currentDrawingTool.id===SELECT_TOOL_ID){var obj=objectToSelect.current;if(obj){var ctx=getReactDrawContext();unselectEverything(ctx),ctx.fullState[SELECT_TOOL_ID].selectedIds=[obj.container.id],selectElement(obj,ctx)}}updateBottomToolDisplayMap()}),[currentDrawingTool]);var selectObject=function selectObject(data){if(currentDrawingTool.id!==SELECT_TOOL_ID)return objectToSelect.current=data,setCurrentDrawingTool(ReactDraw_getToolById(topBarTools,SELECT_TOOL_ID));var ctx=getReactDrawContext();unselectEverything(ctx),selectElement(data,ctx),updateBottomToolDisplayMap()},getReactDrawContext=function getReactDrawContext(viewC){var viewContainer=viewC||getViewContainer(),fullState=customState.current;return{viewContainer:viewContainer,objectsMap:renderedElementsMap.current,lastEvent:latestEvent.current,prevMousePosition:previousMousePos,drawingTools:topBarTools,fullState:fullState,undoStack:undoStack.current,redoStack:redoStack.current,shouldKeepHistory:shouldKeepHistory,selectDrawingTool:handleSelectTopTool,selectObject:selectObject,shouldSelectAfterCreate:shouldSelectAfterCreate}};function alertToolOfKeydown(e){currentDrawingTool.onKeyPress&&(currentDrawingTool.onKeyPress(e,getReactDrawContext()),updateBottomToolDisplayMap())}var getViewContainer=function getViewContainer(){var viewContainer=drawingAreaRef.current;if(!viewContainer)throw new Error("no view container while resizing");return viewContainer};function starDraw(relativePoint){var ctx=getReactDrawContext(),newDrawingData=makeNewBoundingDiv(relativePoint,Object.assign({},globalStyles.current),currentDrawingTool.id);currDrawObj.current=newDrawingData,ctx.viewContainer.append(newDrawingData.container.div),currentDrawingTool.onDrawStart(newDrawingData,ctx)}function drawing(relativePoint){var currentDrawingData=currDrawObj.current;if(currentDrawingData){var ctx=getReactDrawContext();currentDrawingData.coords.push(relativePoint),currentDrawingTool.onDrawing(currentDrawingData,ctx)}}function endDraw(relativePoint){var currentDrawingData=currDrawObj.current;previousMousePos.current=null,currDrawObj.current=null,currentDrawingData&&(currentDrawingData.coords.push(relativePoint),renderedElementsMap.current.set(currentDrawingData.container.id,currentDrawingData),currentDrawingTool.onDrawEnd(currentDrawingData,getReactDrawContext()),updateBottomToolDisplayMap())}Object(react.useEffect)((function(){var container=drawingAreaRef.current;if(container)return container.addEventListener("mousedown",startDrawMouse),container.addEventListener("mouseup",endDrawMouse),container.addEventListener("mousemove",drawMouse),container.addEventListener("touchstart",startDrawTouch,{passive:!1}),container.addEventListener("touchmove",drawTouch,{passive:!1}),container.addEventListener("touchcancel",endDrawTouch),container.addEventListener("touchend",endDrawTouch),container.addEventListener("mouseleave",endDrawMouse),window.addEventListener("keydown",alertToolOfKeydown),function(){container.removeEventListener("mousedown",startDrawMouse),container.removeEventListener("mouseup",endDrawMouse),container.removeEventListener("mousemove",drawMouse),container.removeEventListener("touchstart",startDrawTouch),container.removeEventListener("touchmove",drawTouch),container.removeEventListener("touchcancel",endDrawTouch),container.removeEventListener("touchend",endDrawTouch),container.removeEventListener("mouseleave",endDrawMouse),window.removeEventListener("keydown",alertToolOfKeydown);var _step2,ctx=getReactDrawContext(container),_iterator2=ReactDraw_createForOfIteratorHelper(topBarTools);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tool=_step2.value;tool.onUnMount&&tool.onUnMount(ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}};function startDrawMouse(e){latestEvent.current=e,starDraw(getRelativePoint([e.clientX,e.clientY],container))}function drawMouse(e){latestEvent.current=e,drawing(getRelativePoint([e.clientX,e.clientY],container))}function endDrawMouse(e){latestEvent.current=e,endDraw(getRelativePoint([e.clientX,e.clientY],container))}function startDrawTouch(e){latestEvent.current=e,e.preventDefault(),starDraw(getRelativePoint(getTouchCoords(e),container))}function drawTouch(e){latestEvent.current=e,e.preventDefault(),drawing(getRelativePoint(getTouchCoords(e),container))}function endDrawTouch(e){latestEvent.current=e,e.preventDefault(),endDraw(getRelativePoint(getTouchCoords(e),container))}}),[currentDrawingTool]);var handleSelectTopTool=function handleSelectTopTool(toolId){if(currentDrawingTool.id!==toolId){var selectedTool=ReactDraw_getToolById(topBarTools,toolId);if(selectedTool){var currentTool=currentDrawingTool,currentCtx=getReactDrawContext();currentTool.onUnPickTool&&currentTool.onUnPickTool(currentCtx),selectedTool.onPickTool&&selectedTool.onPickTool(currentCtx),setCurrentDrawingTool(selectedTool),updateBottomToolDisplayMap()}}},hasMenuItems=!!styleComponents&&!function isObjEmpty(obj){for(var x in obj)return!1;return!0}(styleComponents);return Object(jsx_runtime.jsxs)(Container,{layout:layout,children:[!hideTopBar&&Object(jsx_runtime.jsx)(TopToolBar,{tools:topBarTools,onSelectTool:handleSelectTopTool,currentTool:currentDrawingTool.id}),Object(jsx_runtime.jsx)("div",{id:drawingAreaId.current,style:{position:"relative",width:"100%",flex:1,boxSizing:"border-box"},ref:drawingAreaRef,children:children}),!hideBottomBar&&Object(jsx_runtime.jsx)(BottomToolBar,{displayMap:bottomToolsDisplayMap,tools:bottomBarTools,dispatch:function dispatchBottomToolCtx(cb){cb(getReactDrawContext()),updateBottomToolDisplayMap()},children:hasMenuItems&&Object(jsx_runtime.jsx)(EditMenu,{getEditProps:function handleGetEditProps(){var ctx=getReactDrawContext(),selectedIds=getSelectedIdsFromFullState(ctx);if(0===selectedIds.length)return globalStyles.current;var styles=function getEditStylesFromSelected(selectedIds,ctx){var _step3,styles={},_iterator3=ReactDraw_createForOfIteratorHelper(selectedIds.map((function(i){return getObjectFromMap(ctx.objectsMap,i)})));try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var object=_step3.value,tool=ReactDraw_getToolById(ctx.drawingTools,object.toolId);if(tool.getEditableStyles){var _step4,_iterator4=ReactDraw_createForOfIteratorHelper(tool.getEditableStyles());try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _key2=_step4.value,currentObjectValue=object.style[_key2];currentObjectValue?styles[_key2]=currentObjectValue:console.error("could not get style value for key:",_key2,"from object",object)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return styles}(selectedIds,ctx);return styles},styleComponents:styleComponents,onUpdateStyle:function handleUpdateStyles(key,value){var ctx=getReactDrawContext(),selectedIds=getSelectedIdsFromFullState(ctx);if(0!==selectedIds.length){var selectObjects=selectedIds.map((function(id){return getObjectFromMap(ctx.objectsMap,id)}));return selectObjects.map((function(obj){var tool=ReactDraw_getToolById(ctx.drawingTools,obj.toolId);if(tool.onUpdateStyle)return tool.onUpdateStyle(obj,ctx,key,value)}))}globalStyles.current[key]=value}})}),Object(jsx_runtime.jsx)("style",{children:"\n\t\t#"+drawingAreaId.current+" {\n\t\t\tcursor: "+(currentDrawingTool.cursor||"default")+";\n\t\t}\n\t  "})]})}function ReactDraw_getToolById(tools,id){var tool=tools.find((function(t){return t.id===id}));if(!tool)throw new Error("could not find the used tool");return tool}function unselectEverything(ctx){var currSelected=ctx.fullState[SELECT_TOOL_ID].selectedIds;currSelected.length>0&&unselectAll(getSelectedDrawingObjects(currSelected,ctx.objectsMap),ctx)}ReactDraw.displayName="ReactDraw";var defaultEditableProps={lineWidth:"4",zIndex:"1",color:"#000000",fontSize:"14",background:"transparent"};try{ReactDraw.displayName="ReactDraw",ReactDraw.__docgenInfo={description:"",displayName:"ReactDraw",props:{layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"LayoutOption"}},topBarTools:{defaultValue:null,description:"",name:"topBarTools",required:!0,type:{name:"DrawingTools[]"}},hideTopBar:{defaultValue:null,description:"",name:"hideTopBar",required:!1,type:{name:"boolean"}},bottomBarTools:{defaultValue:null,description:"",name:"bottomBarTools",required:!0,type:{name:"ActionTools[]"}},hideBottomBar:{defaultValue:null,description:"",name:"hideBottomBar",required:!1,type:{name:"boolean"}},shouldKeepHistory:{defaultValue:{value:"true"},description:"",name:"shouldKeepHistory",required:!1,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:{value:"true"},description:"",name:"shouldSelectAfterCreate",required:!1,type:{name:"boolean"}},id:{defaultValue:{value:"main"},description:"",name:"id",required:!1,type:{name:"string"}},styleComponents:{defaultValue:null,description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/index.tsx#ReactDraw"]={docgenInfo:ReactDraw.__docgenInfo,name:"ReactDraw",path:"src/ReactDraw/index.tsx#ReactDraw"})}catch(__react_docgen_typescript_loader_error){}var PencilBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PencilBoldIcon.js");__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");function createPathSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createLineSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","line");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createSvg(w,h){if(!isBrowser())throw new Error("createSVG called on server");var newSVG=document.createElementNS("http://www.w3.org/2000/svg","svg");return newSVG.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),newSVG.setAttribute("viewbox","0 0 "+w+" "+h),newSVG.style.position="absolute",newSVG.style.top="0",newSVG.style.left="0",newSVG.style.width="100%",newSVG.style.height="100%",newSVG}function createCircle(radius,color){if(!isBrowser())throw new Error("createPath called on server");var ele=document.createElementNS("http://www.w3.org/2000/svg","circle");return ele.setAttribute("fill","black"),ele.setAttribute("cx",""+Math.ceil(radius/2)),ele.setAttribute("cy",""+Math.ceil(radius/2)),ele.setAttribute("r",""+radius),ele}function updateSvgPathStroke(data,value){var svg=data.element;if(!svg)throw new Error;var path=svg.querySelector("path");if(path||(path=svg.querySelector("line")),!path)throw new Error;var currColor=data.style.color;return path.style.stroke=value,data.style.color=value,{objectId:data.container.id,action:"color",toolId:data.toolId,toolType:"top-bar-tool",data:currColor}}function updateEleBorderColor(data,value){var ele=data.element;if(!ele)throw new Error;var currColor=data.style.color;return data.style.color=value,ele.style.border=borderFromStyles(data.style),{objectId:data.container.id,action:"color",toolId:data.toolId,toolType:"top-bar-tool",data:currColor}}function borderFromStyles(styles){return styles.lineWidth+"px solid "+styles.color}var FreeDrawTool={id:"free-draw-tool",tooltip:"Free draw tool",icon:Object(jsx_runtime.jsx)(PencilBoldIcon.a,{}),getEditableStyles:function getEditableStyles(){return["color","lineWidth"]},onDrawStart:function onDrawStart(data){var lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth);newSvg.style.overflow="visible";var newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),data.container.div.appendChild(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,_ref){var viewContainer=_ref.viewContainer;expandContainer(data);var boxSize=getBoxSize(data),newSvg=createSvg(boxSize.width,boxSize.height);newSvg.style.overflow="visible";var path=function svgPathFromData(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.setAttribute("d",function getPathDString(data,viewContainer){for(var pathString="",i=0;i<data.coords.length;i++){pathString+=getPathPoint(mapPointToRect(data.coords[i],data.container,viewContainer),i),i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath}(data,viewContainer);newSvg.appendChild(path),data.container.div.innerHTML="",data.container.div.appendChild(newSvg),data.element=newSvg},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){data.element&&scaleSvg(data.element,data.container.bounds)},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);throw console.error("unsupported action:",action),new Error},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return updateSvgPathStroke(data,value);throw console.log(key,value,data),new Error("unknown update style action")},cursor:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjU4NTggMC41ODU3ODZDMTEuMzY2OCAtMC4xOTUyNjIgMTIuNjMzMiAtMC4xOTUyNjIgMTMuNDE0MiAwLjU4NTc4NkMxNC4xOTUzIDEuMzY2ODMgMTQuMTk1MyAyLjYzMzE2IDEzLjQxNDIgMy40MTQyMUwxMi42MjEzIDQuMjA3MTFMOS43OTI4OSAxLjM3ODY4TDEwLjU4NTggMC41ODU3ODZaIiBmaWxsPSIjMTExODI3Ii8+CjxwYXRoIGQ9Ik04LjM3ODY4IDIuNzkyODlMMCAxMS4xNzE2VjE0SDIuODI4NDJMMTEuMjA3MSA1LjYyMTMyTDguMzc4NjggMi43OTI4OVoiIGZpbGw9IiMxMTE4MjciLz4KPC9zdmc+') 0 16, pointer"};function getPathPoint(curr,index){return 0===index?"M "+curr[0]+" "+curr[1]:"L "+curr[0]+" "+curr[1]}__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js");var CursorClickIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CursorClickIcon.js");function SelectTool_undo_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function SelectTool_undo_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SelectTool_undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectTool_undo_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectTool_undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function handleDragUndo(action,ctx){var _step,redoData=[],_iterator=SelectTool_undo_createForOfIteratorHelper(action.data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,object=getObjectFromMap(ctx.objectsMap,obj.objectId),_object$container=object.container,bounds=_object$container.bounds,div=_object$container.div,left=obj.left,top=obj.top;redoData.push({objectId:obj.objectId,top:bounds.top,left:bounds.left}),bounds.top=top,bounds.left=left,div.style.left=left+"px",div.style.top=top+"px",alertAfterUpdate(object,ctx)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.data=redoData,action}function handleRotateUndo(action,ctx){var _step2,redoData=[],_iterator2=SelectTool_undo_createForOfIteratorHelper(action.data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value,object=getObjectFromMap(ctx.objectsMap,obj.objectId),div=object.container.div,currRotate=getRotateFromDiv(div);redoData.push({objectId:obj.objectId,rotate:currRotate}),div.style.transform="rotate("+obj.rotate+"deg)",alertAfterUpdate(object,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.data=redoData,action}function handelResizUndo(action,ctx){var object=getObjectFromMap(ctx.objectsMap,action.objectId),undoData=action.data,currBounds=object.container.bounds,redoBounds=Object.assign({},currBounds);return function setDivToBounds(div,bounds){div.style.left=bounds.left+"px",div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px"}(object.container.div,undoData.bounds),object.container.bounds=undoData.bounds,getToolById(ctx.drawingTools,object.toolId).onResize(object,Object.assign({},ctx,{previousPoint:[currBounds.left,currBounds.top],newPoint:[undoData.bounds.left,undoData.bounds.top]})),action.data.bounds=redoBounds,action}function SelectTool_slicedToArray(arr,i){return function SelectTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SelectTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||SelectTool_unsupportedIterableToArray(arr,i)||function SelectTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function SelectTool_toConsumableArray(arr){return function SelectTool_arrayWithoutHoles(arr){if(Array.isArray(arr))return SelectTool_arrayLikeToArray(arr)}(arr)||function SelectTool_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||SelectTool_unsupportedIterableToArray(arr)||function SelectTool_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SelectTool_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return SelectTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SelectTool_arrayLikeToArray(o,minLen):void 0}}function SelectTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SelectTool={tooltip:"Select tool",icon:Object(jsx_runtime.jsx)(CursorClickIcon.a,{style:{transform:"translate(-2px, -1px)"}}),id:SELECT_TOOL_ID,onDrawStart:function onDrawStart(data){data.container.div.style.border="1px solid "+COLORS_primary.main,data.container.div.style.backgroundColor=COLORS_primary.light+"4d"},onDrawing:function onDrawing(data,ctx){setContainerRect(data),data.coords.splice(1),function handleTrySelectObjects(currData,ctx){var _ctx$lastEvent$shiftK2,_ctx$lastEvent2,didPressShift=null!==(_ctx$lastEvent$shiftK2=null===(_ctx$lastEvent2=ctx.lastEvent)||void 0===_ctx$lastEvent2?void 0:_ctx$lastEvent2.shiftKey)&&void 0!==_ctx$lastEvent$shiftK2&&_ctx$lastEvent$shiftK2,selectedIds=SelectTool_toConsumableArray(ctx.fullState[SELECT_TOOL_ID].selectedIds),elementIdsToSelect=function getElementIdsInsideOfBounds(renderedMap,bounds,ctx){var _step,elementIdsToSelect=[],_iterator=function SelectTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=SelectTool_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(renderedMap.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=SelectTool_slicedToArray(_step.value,2),eleId=_ref2[0],eleData=_ref2[1];unselectElement(eleData,ctx),isRectBounding(bounds,eleData.container.bounds)&&elementIdsToSelect.push(eleId)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return elementIdsToSelect}(ctx.objectsMap,currData.container.bounds,ctx);didPressShift&&(elementIdsToSelect=_construct(Array,SelectTool_toConsumableArray(new Set([].concat(SelectTool_toConsumableArray(elementIdsToSelect),SelectTool_toConsumableArray(selectedIds))))));handleSelectIds(ctx,elementIdsToSelect)}(data,ctx)},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;ctx.viewContainer.removeChild(data.container.div),objectsMap.delete(data.container.id),makeSureArtifactsGone('[id^="react-draw-cursor"',ctx.viewContainer),SelectTool_tryClickObject(data,ctx)},onResize:function onResize(data){},onUnMount:function onUnMount(ctx){for(var _i=0,_Object$values=Object.values(ctx.objectsMap);_i<_Object$values.length;_i++){unselectElement(_Object$values[_i],ctx)}},onUnPickTool:function onUnPickTool(ctx){var state=ctx.fullState[SELECT_TOOL_ID],selectedIds=state.selectedIds;0!==selectedIds.length&&(unselectAll(getSelectedDrawingObjects(selectedIds,ctx.objectsMap),ctx),state.selectedIds=[])},onKeyPress:function onKeyPress(event,ctx){if("Delete"===event.key){var selectedIds=ctx.fullState[SELECT_TOOL_ID].selectedIds;if(!(selectedIds.length<1))pushActionToStack(deleteCreatedObjects({toolId:SELECT_TOOL_ID,toolType:"top-bar-tool",objectId:"",data:SelectTool_toConsumableArray(selectedIds),action:"delete"},ctx),ctx)}},onUndo:function onUndo(action,ctx){var act=action.action;if("delete"===act)return recreateDeletedObjects(action,ctx);if("create"===act)return deleteCreatedObjects(action,ctx);if("drag"===act)return handleDragUndo(action,ctx);if("rotate"===act)return handleRotateUndo(action,ctx);if("resize"===act)return handelResizUndo(action,ctx);throw console.log("unsupported action",action),new Error},onRedo:function onRedo(action,ctx){var act=action.action;if("delete"===act)return recreateDeletedObjects(action,ctx);if("create"===act)return deleteCreatedObjects(action,ctx);if("drag"===act)return handleDragUndo(action,ctx);if("rotate"===act)return handleRotateUndo(action,ctx);if("resize"===act)return handelResizUndo(action,ctx);throw console.log("unsupported action",action),new Error}},SelectTool_tryClickObject=function tryClickObject(drawingData,ctx){var _ctx$lastEvent$shiftK,_ctx$lastEvent,didPressShift=null!==(_ctx$lastEvent$shiftK=null===(_ctx$lastEvent=ctx.lastEvent)||void 0===_ctx$lastEvent?void 0:_ctx$lastEvent.shiftKey)&&void 0!==_ctx$lastEvent$shiftK&&_ctx$lastEvent$shiftK,firstPoint=drawingData.coords[0],lastPoint=drawingData.coords[drawingData.coords.length-1];if(function distance(pointA,pointB){return Math.sqrt(Math.pow(Math.abs(pointA[0]-pointB[0]),2)+Math.pow(Math.abs(pointA[1]-pointB[1]),2))}(lastPoint,firstPoint)<75){var bounds=function addPointToBounds(bounds,point){var top=bounds.top,right=bounds.right,bottom=bounds.bottom,left=bounds.left,_point2=utils_slicedToArray(point,2),x=_point2[0],y=_point2[1];return y>bottom?bottom=y:y<top&&(top=y),x<left?left=x:x>right&&(right=x),{top:top,right:right,bottom:bottom,left:left}}(makeBoundingRect(firstPoint),lastPoint);SelectTool_handleTryClickObject(ctx,bounds,didPressShift)}},SelectTool_handleTryClickObject=function handleTryClickObject(ctx,bounds,didPressShift){var clickedEle=getElementsThatBoundsAreWithin(ctx.objectsMap,bounds),_unselectEverythingAn=function unselectEverythingAndReturnPrevious(ctx){var selectedIds=_toConsumableArray(ctx.fullState[SELECT_TOOL_ID].selectedIds),objectsMap=ctx.objectsMap,prevMousePosition=ctx.prevMousePosition,objects=getSelectedDrawingObjects(selectedIds,objectsMap);if(unselectAll(objects,ctx),1===objects.length){var tool=getToolById(ctx.drawingTools,objects[0].toolId);tool&&ctx&&tool.onUnSelect&&tool.onUnSelect(objects[0],ctx)}return prevMousePosition.current=null,{ids:selectedIds.splice(0,selectedIds.length),objects:objects}}(ctx),ids=_unselectEverythingAn.ids;return didPressShift||(ids=[]),null!==clickedEle&&(ids=ids.concat([clickedEle.container.id])),handleSelectIds(ctx,ids),ids};function handleSelectIds(ctx,objectIds){ctx.fullState[SELECT_TOOL_ID].selectedIds=objectIds;var objects=getSelectedDrawingObjects(objectIds,ctx.objectsMap);return 1===objects.length?(function notifyTool(tools,data,ctx){var tool=getToolById(tools,data.toolId);tool&&ctx&&tool.onSelect&&tool.onSelect(data,ctx)}(ctx.drawingTools,objects[0],ctx),selectElement(objects[0],ctx)):objects.length>1?selectManyElements(objects,ctx):void 0}var SquareBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/SquareBoldIcon.js"),SquareTool={id:"react-draw-square-tool",tooltip:"Square Tool",icon:Object(jsx_runtime.jsx)(SquareBoldIcon.a,{}),getEditableStyles:function getEditableStyles(){return["color","background","lineWidth"]},onDrawStart:function onDrawStart(data){var newSquare=function makeSquareDiv(style){var div=document.createElement("div");return div.style.width="100%",div.style.height="100%",div.style.border=style.lineWidth+"px solid "+style.color,div.style.borderRadius="2px",div.style.boxSizing="border-box",div}(data.style);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){setContainerRect(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);throw console.error("unsupported action:",action),new Error},onResize:function onResize(data,ctx){},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return updateEleBorderColor(data,value);throw console.log(key,value,data),new Error("unknown update style action")}};var CircleBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CircleBoldIcon.js"),CircleTool={id:"react-draw-circle-tool",tooltip:"Circle tool",icon:Object(jsx_runtime.jsx)(CircleBoldIcon.a,{}),getEditableStyles:function getEditableStyles(){return["color","background","lineWidth"]},onDrawStart:function onDrawStart(data){var newSquare=function makeCircleDiv(styles){var newDiv=document.createElement("div");return newDiv.style.width="100%",newDiv.style.height="100%",newDiv.style.border=borderFromStyles(styles),newDiv.style.backgroundColor=styles.background,newDiv.style.borderRadius="50%",newDiv.style.boxSizing="border-box",newDiv}(data.style);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){setContainerRect(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);throw console.error("unsupported action:",action),new Error},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return updateEleBorderColor(data,value);throw console.log(key,value,data),new Error("unknown update style action")}};var DiamondBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DiamondBoldIcon.js"),DiamondTool={id:"react-draw-diamond-tool",tooltip:"Diamond tool",icon:Object(jsx_runtime.jsx)(DiamondBoldIcon.a,{}),getEditableStyles:function getEditableStyles(){return["color","background","lineWidth"]},onDrawStart:function onDrawStart(data){var div=data.container.div,newSvg=makeDiamondSvg(data);div.appendChild(newSvg)},onDrawing:function onDrawing(data){setContainerRect(data);var div=data.container.div,newSvg=makeDiamondSvg(data);div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){scaleSvg(data.element,data.container.bounds)},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);throw console.error("Unsupported action: ",action),new Error},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return updateSvgPathStroke(data,value);throw console.log(key,value,data),new Error("unknown update style action")}};function makeDiamondSvg(data){var lineWidth=parseInt(data.style.lineWidth),bounds=data.container.bounds,newSvg=createSvg(bounds.right-bounds.left+lineWidth,bounds.bottom-bounds.top+lineWidth),path=function drawDiamondInBounds(bounds,style){var newPath=createPathSvg(style),lineWidth=parseInt(style.lineWidth);return newPath.setAttribute("d",function getPathDiamondString(bounds,lineWidth){var height=bounds.bottom-bounds.top,width=bounds.right-bounds.left,leftCorner=lineWidth/2+" "+height/2;return"M "+leftCorner+" L "+width/2+" "+lineWidth/2+" L "+(width-lineWidth/2)+" "+height/2+" L "+width/2+" "+(height-lineWidth/2)+" L "+leftCorner}(bounds,lineWidth)),newPath}(bounds,data.style);return newSvg.appendChild(path),newSvg}var HorizontalLineIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/HorizontalLineIcon.js");function StraightLineTool_slicedToArray(arr,i){return function StraightLineTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StraightLineTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function StraightLineTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StraightLineTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StraightLineTool_arrayLikeToArray(o,minLen)}(arr,i)||function StraightLineTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StraightLineTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StraightLineTool={id:"react-draw-line-tool",tooltip:"Straight Line Tool",icon:Object(jsx_runtime.jsx)(HorizontalLineIcon.a,{}),getEditableStyles:function getEditableStyles(){return["color","lineWidth"]},onDrawStart:function onDrawStart(data){var div=data.container.div,lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth),newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),div.append(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,viewContainer){setContainerRect(data);var orientation=function calcOrientation(pointA,pointB){var _pointA=StraightLineTool_slicedToArray(pointA,2),x1=_pointA[0],y1=_pointA[1],_pointB=StraightLineTool_slicedToArray(pointB,2),x2=_pointB[0],y2=_pointB[1];if(x2===x1)return y2>y1?"down":"up";if(y2===y1)return x2>x1?"right":"left";if(x2<x1&&y2<y1)return"nw";if(x2>x1&&y2<y1)return"ne";if(x2>x1&&y2>y1)return"se";return"sw"}(data.coords[0],data.coords[data.coords.length-1]);data.customData.set("orientation",orientation);var newSvg=makeLineInOrientation(data,orientation),div=data.container.div;div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){var orientation=data.customData.get("orientation");if(!orientation)throw new Error("orientation not set");var newSvg=makeLineInOrientation(data,orientation),div=data.container.div;div.removeChild(data.element),div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);throw console.error("unsupported action:",action),new Error},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return updateSvgPathStroke(data,value);throw console.log(key,value,data),new Error("unknown update style action")}};function makeLineInOrientation(data,orientation){var bounds=data.container.bounds,width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,newSvg=createSvg(width,height);newSvg.style.overflow="visible";var _getStartEnd=function getStartEnd(width,height,orientation){if("right"===orientation)return[[0,0],[width,0]];if("left"===orientation)return[[width,0],[0,0]];if("down"===orientation)return[[0,0],[0,height]];if("up"===orientation)return[[0,height],[0,0]];if("nw"===orientation)return[[width,height],[0,0]];if("ne"===orientation)return[[0,height],[width,0]];if("se"===orientation)return[[0,0],[width,height]];return[[width,0],[0,height]]}(width,height,orientation),_getStartEnd2=StraightLineTool_slicedToArray(_getStartEnd,2),start=_getStartEnd2[0],end=_getStartEnd2[1],lineSvg=createLineSvg(data.style);return lineSvg.setAttribute("x1",start[0].toString()),lineSvg.setAttribute("y1",start[1].toString()),lineSvg.setAttribute("x2",end[0].toString()),lineSvg.setAttribute("y2",end[1].toString()),newSvg.appendChild(lineSvg),newSvg}__webpack_require__("./node_modules/core-js/modules/web.timers.js");var TextAreaTool={icon:Object(jsx_runtime.jsx)("span",{style:{display:"inline-block",fontWeight:"bold",fontSize:"20px"},children:"A"}),id:"react-draw-textarea-tool",tooltip:"Textarea Tool",cursor:"text",getEditableStyles:function getEditableStyles(){return["color","background","fontSize","lineWidth"]},onDrawStart:function onDrawStart(data,ctx){!function setupContainer(data,ctx){var fontSize=12,padding=5,_data$container=data.container,div=_data$container.div,bounds=_data$container.bounds;bounds.bottom=bounds.top+fontSize+padding,div.style.height="",div.style.minHeight=bounds.bottom-bounds.top+"px",div.style.minWidth=div.style.width,div.style.width="",div.style.border="1px solid black",div.style.backgroundColor=data.style.background,div.style.padding=padding+"px",div.style.borderRadius="2px",div.style.boxSizing="border-box";var styleTag=document.createElement("style");styleTag.innerHTML="\n\t.react-draw-cursor {\n\t\toutline: none;\t\t\n\t\theight: 100%;\n\t}",div.appendChild(styleTag);var cursorDiv=function makeCursorDiv(style){var div=document.createElement("div");return div.style.fontSize=style.fontSize+"px",div.style.color=style.color,div.setAttribute("contenteditable","true"),div.style.minWidth="1px",div.style.height="100%",div.className="react-draw-cursor",div}(data.style);function setBoundsOnTyping(){var trueBounds=div.getBoundingClientRect(),width=trueBounds.width,height=trueBounds.height;bounds.bottom=bounds.top+height,bounds.right=bounds.left+width}data.element=cursorDiv,data.customData.set("handler",setBoundsOnTyping),cursorDiv.addEventListener("keypress",setBoundsOnTyping),div.appendChild(cursorDiv),setBoundsFromDiv(div,bounds),cursorDiv.setAttribute("tabindex","1"),function addCaptureHandler(data,ctx){var div=data.element,customData=data.customData;function captureDidType(e){var currentMS=(new Date).getTime(),lastCaptureMS=customData.get("lastCapture");if(lastCaptureMS){if(currentMS-lastCaptureMS>5e3){var target=e.target;pushActionToStack({toolId:data.toolId,action:"input",data:target.innerHTML,toolType:"top-bar-tool",objectId:data.container.id},ctx)}}else pushActionToStack({toolId:data.toolId,action:"input",data:"",toolType:"top-bar-tool",objectId:data.container.id},ctx);customData.set("lastCapture",currentMS)}div.addEventListener("input",captureDidType),customData.set("capture",captureDidType)}(data,ctx),setTimeout((function(){cursorDiv.focus()}),0)}(data,ctx)},onDrawing:function onDrawing(data,viewContainer){},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onSelect:function onSelect(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onUnSelect:function onUnSelect(data){cleanHandlers(data,!1),setBoundsFromDiv(data.container.div,data.container.bounds)},onAfterUpdate:function onAfterUpdate(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onUndo:function onUndo(action,ctx){if("create"===action.action)return undoCreate(action,ctx);if("input"===action.action)return undoTextAreaInput(action,ctx);throw console.error("Unsupported action: ",action),new Error},onRedo:function onRedo(action,ctx){if("delete"===action.action)return redoDelete(action,ctx);if("input"===action.action)return undoTextAreaInput(action,ctx);throw console.error("unsupported action:",action),new Error},onDeleteObject:function onDeleteObject(data,ctx){cleanHandlers(data,!0)},onUpdateStyle:function onUpdateStyle(data,ctx,key,value){if("color"===key)return function updateTextColor(data,value){var ele=data.element;if(!ele)throw new Error;var currColor=data.style.color;return data.style.color=value,ele.style.color=value,{objectId:data.container.id,toolId:data.toolId,toolType:"top-bar-tool",action:"color",data:currColor}}(data,value);throw console.log(key,value,data),new Error("unknown update style action")}};function undoTextAreaInput(action,ctx){var ele=getObjectFromMap(ctx.objectsMap,action.objectId).element;if(!ele)throw new Error("tried to undo text but no ele found");var currentInput=ele.innerHTML,undoInput=action.data;return ele.innerHTML=undoInput,action.data=currentInput,action}function cleanHandlers(data,deleteCapture){var textArea=data.element;if(textArea){var handler=data.customData.get("handler");handler&&(textArea.removeEventListener("keypress",handler),data.customData.delete("handler"));var capture=data.customData.get("capture");deleteCapture&&capture&&(textArea.removeEventListener("input",capture),data.customData.delete("capture"))}}function setBoundsFromDiv(div,bounds){var trueBounds=div.getBoundingClientRect(),width=trueBounds.width,height=trueBounds.height;bounds.bottom=bounds.top+height,bounds.right=bounds.left+width}function placeCaretAtEnd(el){if(el.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var range=document.createRange();range.selectNodeContents(el),range.collapse(!1);var sel=window.getSelection();if(sel)return sel.removeAllRanges(),sel.addRange(range),!0}return console.error("cannot place caret at end"),!1}var EraserIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/EraserIcon.js");function EraseTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function EraseTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EraseTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EraseTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function EraseTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EraseTool={icon:Object(jsx_runtime.jsx)(EraserIcon.a,{}),tooltip:"Eraser tool",id:ERASE_TOOL_ID,cursor:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOSAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjA2MTYgMC41ODY1NzNMNS4zMTE1OSA1LjMzNjU3TDAuNTgxNTg1IDEwLjE3NjZDMC4yMDkwODQgMTAuNTUxMyAwIDExLjA1ODIgMCAxMS41ODY2QzAgMTIuMTE0OSAwLjIwOTA4NCAxMi42MjE4IDAuNTgxNTg1IDEyLjk5NjZMNC44ODE1OSAxNy4yOTY2QzUuMDY3ODUgMTcuNDgxMyA1LjMxOTI1IDE3LjU4NTUgNS41ODE1OSAxNy41ODY2SDE3LjU4MTZWMTUuNTg2NkgxMC41ODE2TDE3LjgwMTYgOC4zNjY1N0MxNy45ODc1IDguMTgwODMgMTguMTM1MSA3Ljk2MDI1IDE4LjIzNTcgNy43MTc0NUMxOC4zMzY0IDcuNDc0NjYgMTguMzg4MiA3LjIxNDQgMTguMzg4MiA2Ljk1MTU3QzE4LjM4ODIgNi42ODg3NCAxOC4zMzY0IDYuNDI4NDkgMTguMjM1NyA2LjE4NTY5QzE4LjEzNTEgNS45NDI5IDE3Ljk4NzUgNS43MjIzMiAxNy44MDE2IDUuNTM2NTdMMTIuODkxNiAwLjU4NjU3M0MxMi43MDU4IDAuNDAwNjIgMTIuNDg1MyAwLjI1MzEwMiAxMi4yNDI1IDAuMTUyNDU0QzExLjk5OTcgMC4wNTE4MDUzIDExLjczOTQgMCAxMS40NzY2IDBDMTEuMjEzOCAwIDEwLjk1MzUgMC4wNTE4MDUzIDEwLjcxMDcgMC4xNTI0NTRDMTAuNDY3OSAwLjI1MzEwMiAxMC4yNDczIDAuNDAwNjIgMTAuMDYxNiAwLjU4NjU3M1YwLjU4NjU3M1pNNS45OTE1OSAxNS41ODY2TDEuOTkxNTkgMTEuNTg2Nkw2Ljc0MTU5IDYuNzQ2NTdMNy40ODE1OSA1Ljk5NjU3TDEyLjQzMTYgMTAuOTQ2Nkw3Ljg3MTU5IDE1LjUwNjZMNy44MDE1OSAxNS41ODY2SDUuOTkxNTlaIiBmaWxsPSJibGFjayI+PC9wYXRoPgo8L3N2Zz4=') 0 16, pointer",onDrawStart:function onDrawStart(data,viewContainer){},onDrawing:function onDrawing(data,ctx){var viewContainer=ctx.viewContainer;expandContainer(data);var boxSize=getBoxSize(data),newSvg=createSvg(boxSize.width,boxSize.height),eraserPath=function getEraserPath(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.style.strokeWidth="10px",newPath.setAttribute("d",function getEraserPathDString(data,viewContainer){for(var pathString="",lastPoint=data.coords[0],i=0;i<data.coords.length;i++){var mappedPoint=mapPointToRect(data.coords[i],data.container,viewContainer);pathString+=EraseTool_getPathPoint(mappedPoint,lastPoint,i),lastPoint=mappedPoint,i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath.setAttribute("stroke","rgba(232, 16, 84, 0.142)"),newPath}(data,viewContainer);newSvg.appendChild(eraserPath),data.container.div.innerHTML="",data.container.div.appendChild(newSvg),data.element=newSvg;var _step,bounds=makeBoundingRect(data.coords[data.coords.length-1]),_iterator=EraseTool_createForOfIteratorHelper(ctx.objectsMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var objectId=_step.value,object=ctx.objectsMap.get(objectId);object&&(isRectBounding(object.container.bounds,bounds)&&(deleteObjectAndNotify(objectId,ctx),addObjectToCustomState(ctx,object)))}}catch(err){_iterator.e(err)}finally{_iterator.f()}},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;if(ctx.viewContainer.removeChild(data.container.div),objectsMap.delete(data.container.id),makeSureArtifactsGone('[id^="react-draw-erase-tool"',ctx.viewContainer),ctx.fullState[ERASE_TOOL_ID].deletedObjects.size>0){var action={toolId:data.toolId,toolType:"top-bar-tool",objectId:"",action:"delete",data:ctx.fullState[ERASE_TOOL_ID].deletedObjects};ctx.fullState[ERASE_TOOL_ID].deletedObjects=new Map,pushActionToStack(action,ctx)}},onUndo:function onUndo(action,ctx){if("delete"===action.action)return recreateDeletedObjects(action,ctx);throw console.error("unrecognized action",action),new Error},onRedo:function onRedo(action,ctx){if("create"===action.action)return deleteCreatedObjects(action,ctx);throw console.error("unrecognized action",action),new Error},onResize:function onResize(data,ctx){}};function addObjectToCustomState(ctx,object){ctx.fullState[ERASE_TOOL_ID].deletedObjects.set(object.container.id,object)}function EraseTool_getPathPoint(curr,prev,index){return 0===index?"M "+curr[0]+" "+curr[1]:"l "+(curr[0]-prev[0])+" "+(curr[1]-prev[1])}var UndoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/UndoIcon.js"),UndoTool={id:"react-draw-undo-tool",tooltip:"Undo",icon:Object(jsx_runtime.jsx)(UndoIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.undoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.undoStack.pop();if(lastAction&&"top-bar-tool"===lastAction.toolType){var tool=getToolById(ctx.drawingTools,lastAction.toolId);if(tool.onUndo){var result=tool.onUndo(lastAction,ctx);ctx.shouldKeepHistory&&ctx.redoStack.push(result)}}}},RedoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/RedoIcon.js"),RedoTool={id:"react-draw-redo-tool",tooltip:"Redo",icon:Object(jsx_runtime.jsx)(RedoIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.redoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.redoStack.pop();if(lastAction&&"top-bar-tool"===lastAction.toolType){var tool=getToolById(ctx.drawingTools,lastAction.toolId);if(tool.onRedo){var result=tool.onRedo(lastAction,ctx);ctx.shouldKeepHistory&&ctx.undoStack.push(result)}}}},TrashCanBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/TrashCanBoldIcon.js");function TrashTool_toConsumableArray(arr){return function TrashTool_arrayWithoutHoles(arr){if(Array.isArray(arr))return TrashTool_arrayLikeToArray(arr)}(arr)||function TrashTool_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function TrashTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return TrashTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TrashTool_arrayLikeToArray(o,minLen)}(arr)||function TrashTool_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TrashTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var TrashTool={id:"react-draw-trash-tool",icon:Object(jsx_runtime.jsx)(TrashCanBoldIcon.a,{}),tooltip:"Delete selected objects",getDisplayMode:function getDisplayMode(ctx){return getSelectedIdsFromFullState(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=getSelectedIdsFromFullState(ctx);selectedIds.length<1||pushActionToStack(deleteCreatedObjects({toolId:SELECT_TOOL_ID,toolType:"top-bar-tool",objectId:"",data:TrashTool_toConsumableArray(selectedIds),action:"delete"},ctx),ctx)}},DuplicateIcon=(__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DuplicateIcon.js")),DuplicateTool={id:"react-draw-duplicate-tool",tooltip:"Duplicate objects",icon:Object(jsx_runtime.jsx)(DuplicateIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return getSelectedIdsFromFullState(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=getSelectedIdsFromFullState(ctx);if(!(selectedIds.length<1)){var objects=selectedIds.map((function(id){return getObjectFromMap(ctx.objectsMap,id)}));unselectAll(objects,ctx);var newObjects=objects.map((function(o){return function duplicateObject(object,ctx){var _object$container=object.container,div=_object$container.div,bounds=(_object$container.id,_object$container.bounds),newDiv=div.cloneNode(!0),_makeNewId=function makeNewId(divId){var newId=makeid(6),parts=divId.split("-");return parts[parts.length-1]=makeid(6),{divId:parts.join("-"),newId:newId}}(div.id),newId=_makeNewId.newId,divId=_makeNewId.divId;newDiv.id=divId;var data={coords:object.coords.slice(0),toolId:object.toolId,element:newDiv.lastElementChild,style:Object.assign({},object.style),customData:new Map(object.customData),container:{bounds:{top:bounds.top+10,left:bounds.left+10,bottom:bounds.bottom+10,right:bounds.right+10},div:newDiv,id:newId}};newDiv.style.top=data.container.bounds.top+"px",newDiv.style.left=data.container.bounds.left+"px";var tool=getToolById(ctx.drawingTools,object.toolId);if(tool.onDuplicate)return tool.onDuplicate(data,ctx);return data}(o,ctx)})),data=new Map;pushActionToStack(recreateDeletedObjects({toolId:SELECT_TOOL_ID,objectId:"",toolType:"top-bar-tool",action:"delete",data:newObjects.reduce((function(prev,cur){return prev.set(cur.container.id,cur),prev}),data)},ctx),ctx),1===selectedIds.length?selectElement(newObjects[0],ctx):selectManyElements(newObjects,ctx),ctx.fullState[SELECT_TOOL_ID].selectedIds=newObjects.map((function(o){return o.container.id}))}}};var BackIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/BackIcon.js");function BringBackTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringBackTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringBackTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringBackTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringBackTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var BringBackTool={id:"react-draw-back-tool",icon:Object(jsx_runtime.jsx)(BackIcon.a,{}),tooltip:"Move object back",getDisplayMode:function getDisplayMode(ctx){return getSelectedIdsFromFullState(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=getSelectedIdsFromFullState(ctx);if(!(selectedIds.length<1)){var _step,selectObjects=selectedIds.map((function(id){return getObjectFromMap(ctx.objectsMap,id)})),lowestZIndex=1/0,_iterator=BringBackTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var z=pushObjectUp(_step.value);z<lowestZIndex&&(lowestZIndex=z)}}catch(err){_iterator.e(err)}finally{_iterator.f()}selectObjects.forEach((function(obj){obj.container.div.style.zIndex=lowestZIndex.toString(),obj.style.zIndex=lowestZIndex.toString()}))}}};function pushObjectUp(data){var currZ=parseInt(data.style.zIndex);return data.container.div.style.zIndex=(currZ+1).toString(),data.style.zIndex=(currZ+1).toString(),currZ}var ForwardIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/ForwardIcon.js");function BringForwardTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringForwardTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringForwardTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringForwardTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringForwardTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var BringForwardTool={id:"react-draw-forward-tool",tooltip:"Move object forward",icon:Object(jsx_runtime.jsx)(ForwardIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return getSelectedIdsFromFullState(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=getSelectedIdsFromFullState(ctx);if(!(selectedIds.length<1)){var _step,selectObjects=selectedIds.map((function(id){return getObjectFromMap(ctx.objectsMap,id)})),lowestZIndex=-1/0,_iterator=BringForwardTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var z=pushObjectDown(_step.value);z>lowestZIndex&&(lowestZIndex=z)}}catch(err){_iterator.e(err)}finally{_iterator.f()}selectObjects.forEach((function(obj){obj.container.div.style.zIndex=lowestZIndex.toString(),obj.style.zIndex=lowestZIndex.toString()}))}}};function pushObjectDown(data){var currZ=parseInt(data.style.zIndex);return data.container.div.style.zIndex=(currZ-1).toString(),data.style.zIndex=(currZ-1).toString(),currZ}__webpack_require__("./node_modules/core-js/modules/es.string.replace.js");function ColorPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,label=_ref.label,styleValue=_ref.styleValue,id=makeid(5);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:Object(jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id,children:label})}),Object(jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[Object(jsx_runtime.jsx)("span",{style:{display:"inline-block",borderRadius:5,width:30,height:30,backgroundColor:styleValue}}),Object(jsx_runtime.jsxs)("div",{style:{marginLeft:10,display:"flex"},children:[Object(jsx_runtime.jsx)("span",{style:{borderRadius:"5px 0px 0px 5px",width:30,padding:5,fontWeight:"bold",fontSize:18,textAlign:"center",color:"grey",backgroundColor:"lightgray"},children:"#"}),Object(jsx_runtime.jsx)("input",{value:styleValue.replace("#",""),onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,"#"+value)},style:{width:80,borderRadius:"0px 5px 5px 0px"}})]})]})]})}ColorPicker.displayName="ColorPicker";var StyleComponents_ColorPicker=ColorPicker;try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"src/StyleComponents/ColorPicker.tsx#ColorPicker"})}catch(__react_docgen_typescript_loader_error){}var Color_ColorStyle=function ColorStyle(props){return Object(jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"color"}))};Color_ColorStyle.displayName="ColorStyle";var Color=Color_ColorStyle,Background_BackgroundStyle=function BackgroundStyle(props){return Object(jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"background"}))};Background_BackgroundStyle.displayName="BackgroundStyle";var Background=Background_BackgroundStyle,ReactDraw_stories_Template=(__webpack_exports__.default={title:"ReactDraw",component:ReactDraw},function Template(args){return Object(jsx_runtime.jsx)(ReactDraw,Object.assign({},args))});ReactDraw_stories_Template.displayName="Template";var ReactDraw_stories_topBarTools=[SelectTool,FreeDrawTool,SquareTool,CircleTool,DiamondTool,StraightLineTool,TextAreaTool,EraseTool],ReactDraw_stories_bottomBarTools=[UndoTool,RedoTool,TrashTool,DuplicateTool,BringBackTool,BringForwardTool],DefaultLayoutWithoutChildren=ReactDraw_stories_Template.bind({});DefaultLayoutWithoutChildren.args={topBarTools:ReactDraw_stories_topBarTools,bottomBarTools:ReactDraw_stories_bottomBarTools,shouldSelectAfterCreate:!0,styleComponents:{color:Color,background:Background}};var HideTopAndBottomBar=ReactDraw_stories_Template.bind({});HideTopAndBottomBar.args={topBarTools:[FreeDrawTool],hideTopBar:!0,bottomBarTools:[],hideBottomBar:!0,shouldSelectAfterCreate:!1,shouldKeepHistory:!1};var DefaultLayoutWithChildren=ReactDraw_stories_Template.bind({});DefaultLayoutWithChildren.args={topBarTools:ReactDraw_stories_topBarTools,bottomBarTools:ReactDraw_stories_bottomBarTools,shouldSelectAfterCreate:!0,children:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("p",{children:" hello world"})})};var FitLayoutWithChildren=ReactDraw_stories_Template.bind({});FitLayoutWithChildren.args={topBarTools:ReactDraw_stories_topBarTools,bottomBarTools:ReactDraw_stories_bottomBarTools,shouldSelectAfterCreate:!0,children:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("p",{children:" hello world"})}),layout:"fit"},DefaultLayoutWithoutChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithoutChildren.parameters),HideTopAndBottomBar.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},HideTopAndBottomBar.parameters),DefaultLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithChildren.parameters),FitLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FitLayoutWithChildren.parameters)},"./src/stories/TypeDescriptions.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Type Descriptions",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Type Descriptions"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"This document contains descriptions and explanations of the different objects seen in ReactDraw"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Point"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type Point = [number, number];\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"RectBounds"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type RectBounds = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"DrawingContainer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingContainer = {\n  div: HTMLDivElement;\n  id: string;\n  bounds: RectBounds;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"DrawingData"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingData = {\n  coords: Point[];\n  container: DrawingContainer;\n  element: HTMLElement | SVGSVGElement | null;\n  style: {\n    lineWidth: number;\n    zIndex: number;\n  };\n  toolId: string;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"OnResizeContext"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type OnResizeContext = {\n  viewContainer: HTMLDivElement;\n  previousPoint: Point;\n  newPoint: Point;\n  mode: SelectMode;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"SelectMode"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'type SelectMode =\n  | "drag"\n  | "rotate"\n  | "resize-nw"\n  | "resize-ne"\n  | "resize-se"\n  | "resize-sw";\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Type Descriptions",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,4,5]]]);