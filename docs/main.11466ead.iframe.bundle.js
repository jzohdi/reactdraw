/*! For license information please see main.11466ead.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_jzohdi_react_draw=self.webpackChunk_jzohdi_react_draw||[]).push([[179],{"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>__namedExportsOrder,parameters:()=>parameters});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},options:{storySort:{method:"alphabetical",order:["Introduction","Drawing Tools","Type Descriptions","Serialization (Saving + Loading)"],locales:"en-US"}}},__namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./stories/AddImages.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AddImagesToCanvas:()=>AddImagesToCanvas,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/web.url.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _src__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/index.ts"),_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PhotographBoldIcon.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Customization Examples/Add Images To Canvas"};var imageTool={id:"my-image-tool-id",onDrawEnd:function onDrawEnd(){},onDrawing:function onDrawing(){},onDrawStart:function onDrawStart(){},onResize:function onResize(){}},drawingTools=[_src__WEBPACK_IMPORTED_MODULE_8__.VS,_src__WEBPACK_IMPORTED_MODULE_8__.Lk,imageTool];var AddImageMenuComponent=function AddImageMenuComponent(_ref){var getContext=_ref.getContext,classes=(0,_src__WEBPACK_IMPORTED_MODULE_8__.yK)("addImageComponent");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("label",{htmlFor:"my-button-id",role:"button",className:classes,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{style:{padding:"0px 10px 0px 5px",height:20},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_10__.Z,{height:15,width:20})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("input",{id:"my-button-id",style:{display:"none"},type:"file",accept:"jpg,png,jpeg",onChange:function handleAddImage(e){var files=e.target.files;if(files&&files[0]){var ctx=getContext(),_viewContainer$getBou=ctx.viewContainer.getBoundingClientRect(),width=_viewContainer$getBou.width,height=_viewContainer$getBou.height,newData=(0,_src__WEBPACK_IMPORTED_MODULE_8__.tA)(ctx,[width/2,height/2],"my-image-tool-id");(0,_src__WEBPACK_IMPORTED_MODULE_8__.rW)(ctx,newData);var toUrl=URL.createObjectURL(files[0]),img=new Image;img.style.width="100%",img.style.height="100%",img.onload=function(){newData.element=img,newData.containerDiv.appendChild(img);var _getDimensions=function getDimensions(img){var naturalWidth=img.naturalWidth,naturalHeight=img.naturalHeight,ratio=naturalWidth/naturalHeight;return naturalWidth>200?{width:200,height:200/ratio}:naturalHeight>200?{width:200*ratio,height:200}:{width:naturalWidth,height:naturalHeight}}(img),width=_getDimensions.width,height=_getDimensions.height;(0,_src__WEBPACK_IMPORTED_MODULE_8__.dv)(ctx,newData,width,height),ctx.shouldSelectAfterCreate&&ctx.selectObject(newData),e.target.files=null},img.src=toUrl}}}),"Add Image"]})};AddImageMenuComponent.displayName="AddImageMenuComponent";var Template=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src__WEBPACK_IMPORTED_MODULE_8__.IR,Object.assign({},args,{styles:{addImageComponent:{width:180,fontSize:16,display:"flex",justifyContent:"flex-start",alignItems:"center",borderRadius:5,cursor:"pointer",padding:"7px 10px",backgroundColor:"white",marginBottom:10,boxSizing:"border-box",border:"1px solid "+_src__WEBPACK_IMPORTED_MODULE_8__.DM.primary.main,"&:hover":{backgroundColor:_src__WEBPACK_IMPORTED_MODULE_8__.DM.primary.light}}}}))};Template.displayName="Template";var AddImagesToCanvas=Template.bind({});AddImagesToCanvas.args={drawingTools,shouldSelectAfterCreate:!0,menuComponents:[AddImageMenuComponent,_src__WEBPACK_IMPORTED_MODULE_8__.vq],shouldKeepHistory:!1,actionTools:[_src__WEBPACK_IMPORTED_MODULE_8__.fI,_src__WEBPACK_IMPORTED_MODULE_8__.E]},AddImagesToCanvas.parameters={docs:{source:{code:'\nimport {\n\tReactDraw,\n\tselectTool,\n\tfreeDrawTool,\n\tClearAllButton,\n\tDrawingTools,\n\tMenuComponent,\n\tReactDrawProps,\n\tCOLORS,\n\tcreateNewObject,\n\taddObject,\n\tcenterObject,\n} from "@jzohdi/react-draw";\nimport { PhotographBoldIcon } from "@jzohdi/jsx-icons";\nimport styled from "styled-components";\n\nconst inputId = "my-button-id";\nconst imageToolId = "my-image-tool-id";\n\nconst imageTool: DrawingTools = {\n  id: imageToolId,\n  onDrawEnd() {},\n  onDrawing() {},\n  onDrawStart() {},\n  onResize() {},\n};\n\nconst drawingTools: DrawingTools[] = [selectTool, freeDrawTool, imageTool];\n\nexport default function ExampleProject() {\n\n\treturn <ReactDraw \n\t\tdrawingTools={drawingTools}\n\t\tshouldSelectAfterCreate={true}\n\t\tmenuComponents={[AddImageMenuComponent, ClearAllButton]}\n\t\tshouldKeepHistory={false}\n\t\tstyles={{\n\t\t\taddImageComponent: {\n\t\t\t  width: 180,\n\t\t\t  fontSize: 16,\n\t\t\t  display: "flex",\n\t\t\t  justifyContent: "flex-start",\n\t\t\t  alignItems: "center",\n\t\t\t  borderRadius: 5,\n\t\t\t  cursor: "pointer",\n\t\t\t  padding: "7px 10px",\n\t\t\t  backgroundColor: "white",\n\t\t\t  marginBottom: 10,\n\t\t\t  boxSizing: "border-box",\n\t\t\t  border: `1px solid ${COLORS.primary.main}`,\n\t\t\t  "&:hover": {\n\t\t\t\tbackgroundColor: COLORS.primary.light,\n\t\t\t  },\n\t\t\t},\n\t\t  }}\t\t\n\t\t/>\n\n}\n\nfunction getDimensions(img: HTMLImageElement) {\n\tconst { naturalWidth, naturalHeight } = img;\n\tconst ratio = naturalWidth / naturalHeight;\n\tif (naturalWidth > maxWidth) {\n\t  return { width: maxWidth, height: maxWidth / ratio };\n\t}\n\tif (naturalHeight > maxHeight) {\n\t  return { width: maxHeight * ratio, height: maxHeight };\n\t}\n\treturn { width: naturalWidth, height: naturalHeight };\n}\n\nconst AddImageMenuComponent: MenuComponent = ({ getContext }) => {\n\tconst classes = useStyles("addImageComponent");\n\n\tconst handleAddImage = (e: ChangeEvent<HTMLInputElement>) => {\n\t\tconst files = e.target.files;\n\t\tif (!files || !files[0]) {\n\t\treturn;\n\t\t}\n\t\tconst ctx = getContext();\n\t\tconst viewContainer = ctx.viewContainer;\n\t\tconst { width, height } = viewContainer.getBoundingClientRect();\n\t\tconst newData = createNewObject(ctx, [width / 2, height / 2], imageToolId);\n\t\taddObject(ctx, newData);\n\t\tconst toUrl = URL.createObjectURL(files[0]);\n\t\tconst img = new Image();\n\t\timg.style.width = "100%";\n\t\timg.style.height = "100%";\n\t\timg.onload = function () {\n\t\tnewData.element = img;\n\t\tnewData.container.div.appendChild(img);\n\t\tconst { width, height } = getDimensions(img);\n\t\tcenterObject(ctx, newData, width, height);\n\t\tif (ctx.shouldSelectAfterCreate) {\n\t\t\tctx.selectObject(newData);\n\t\t}\n\t\te.target.files = null;\n\t\t};\n\t\timg.src = toUrl;\n\t};\n\n\treturn (\n\t\t<label htmlFor={inputId} role="button" className={classes}>\n\t\t<div style={{ padding: "0px 10px 0px 5px", height: 20 }}>\n\t\t\t<PhotographBoldIcon height={15} width={20} />\n\t\t</div>\n\t\t<input\n\t\t\tid={inputId}\n\t\t\tstyle={{ display: "none" }}\n\t\t\ttype="file"\n\t\t\taccept="jpg,png,jpeg"\n\t\t\tonChange={handleAddImage}\n\t\t/>\n\t\tAdd Image\n\t\t</label>\n\t);\n};\n\t  ',language:"tsx",type:"auto"},description:{component:"In this example we create a menu component that can load an image to the canvas. \n\t  First we create a new topBarTool with no icon. This is so that we can have a tool that will be responsible for the objects added to the canvas. \n\t  The tool can not be selected as it will not be displayed on the top bar, but it is necessary if we wanted to handle things like updating the object's styles or \n\t  handling undo/redo capabilities. In the `handleAddImage` function, we do a few things: \n\t1. createNewObject which will create the DrawingData at the coordinate given. \n\t2. addObject actually places the data onto the canvas (it will be an empty div element at the coords). \n\t3. we load a new img element. \n\t4. once the image is loaded, add it as a child of the wrapper div. \n\t5. recenter the object to the middle of the canvas. \n\t6. if the shouldSelectAfterCreate prop is set, select the newly added image object.  "}}},AddImagesToCanvas.parameters=Object.assign({storySource:{source:'(args) => (\r\n  <ReactDraw\r\n    {...args}\r\n    styles={{\r\n      addImageComponent: {\r\n        width: 180,\r\n        fontSize: 16,\r\n        display: "flex",\r\n        justifyContent: "flex-start",\r\n        alignItems: "center",\r\n        borderRadius: 5,\r\n        cursor: "pointer",\r\n        padding: "7px 10px",\r\n        backgroundColor: "white",\r\n        marginBottom: 10,\r\n        boxSizing: "border-box",\r\n        border: `1px solid ${COLORS.primary.main}`,\r\n        "&:hover": {\r\n          backgroundColor: COLORS.primary.light,\r\n        },\r\n      },\r\n    }}\r\n  />\r\n)'}},AddImagesToCanvas.parameters);var __namedExportsOrder=["AddImagesToCanvas"]},"./stories/ReactDraw.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllToolsPreserveAspectRatio:()=>AllToolsPreserveAspectRatio,CustomizeStyles:()=>CustomizeStyles,DefaultLayoutAllTools:()=>DefaultLayoutAllTools,DefaultLayoutWithChildren:()=>DefaultLayoutWithChildren,ExternalControls:()=>ExternalControls,FitLayoutWithChildren:()=>FitLayoutWithChildren,FreeDrawOnly:()=>FreeDrawOnly,SaveAndLoadJson:()=>SaveAndLoadJson,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var _serializers,_deserializers,react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/react/index.js"),_src_ReactDraw__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/ReactDraw/index.tsx"),_src__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/index.ts"),_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DownloadIcon.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var layoutOptions={fit:"fit",default:"default",AbsoluteLayout:{width:500,height:500}};const __WEBPACK_DEFAULT_EXPORT__={title:"ReactDraw",component:_src_ReactDraw__WEBPACK_IMPORTED_MODULE_15__.Z,argTypes:{drawingTools:{type:{name:"object",required:!0},defaultValue:null,description:"Drawing tools that will be displayed at the top of the canvas and can be selected if they have an icon property. These tools are of type `DrawingTools`. Not implementing an icon on the tool can be useful if you want a tool in the background that can still handle object updates.",control:{type:"object"}},layout:{options:Object.keys(layoutOptions),mapping:layoutOptions,description:"if default sets absolute size of width: 500, height: 500. fit will simply wrap the children to <ReactDraw>{children}</ReactDraw>. layout can also be passed an object of { width: number, height: number }",defaultValue:"default",control:{type:"select",labels:{default:"default",fit:"fit",AbsoluteLayout:"{ width: 500, height: 500 }"}}}}};var Template=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_src_ReactDraw__WEBPACK_IMPORTED_MODULE_15__.Z,Object.assign({},args))};Template.displayName="Template";var drawingTools=[_src__WEBPACK_IMPORTED_MODULE_16__.VS,_src__WEBPACK_IMPORTED_MODULE_16__.Lk,_src__WEBPACK_IMPORTED_MODULE_16__.uY,_src__WEBPACK_IMPORTED_MODULE_16__.u8,_src__WEBPACK_IMPORTED_MODULE_16__.Bp,_src__WEBPACK_IMPORTED_MODULE_16__.$Q,_src__WEBPACK_IMPORTED_MODULE_16__.E3,_src__WEBPACK_IMPORTED_MODULE_16__.H7,_src__WEBPACK_IMPORTED_MODULE_16__.Yv],actionTools=[_src__WEBPACK_IMPORTED_MODULE_16__.$9,_src__WEBPACK_IMPORTED_MODULE_16__.sx,_src__WEBPACK_IMPORTED_MODULE_16__.Kb,_src__WEBPACK_IMPORTED_MODULE_16__.$k,_src__WEBPACK_IMPORTED_MODULE_16__.E,_src__WEBPACK_IMPORTED_MODULE_16__.fI],DefaultLayoutAllTools=Template.bind({});DefaultLayoutAllTools.args={drawingTools,actionTools,shouldSelectAfterCreate:!0,shouldCornerResizePreserveRatio:!0,styleComponents:{color:{order:3,component:_src__WEBPACK_IMPORTED_MODULE_16__.HQ},background:{order:4,component:_src__WEBPACK_IMPORTED_MODULE_16__.YI},lineWidth:{order:1,component:_src__WEBPACK_IMPORTED_MODULE_16__.F},opacity:{order:0,component:_src__WEBPACK_IMPORTED_MODULE_16__.H9},fontSize:{order:2,component:_src__WEBPACK_IMPORTED_MODULE_16__.Ty}},menuComponents:[_src__WEBPACK_IMPORTED_MODULE_16__.vq],isResponsive:!0},DefaultLayoutAllTools.parameters={docs:{source:{code:"\n<ReactDraw \n\tdrawingTools={[\n\t\tselectTool,\n\t\tfreeDrawTool,\n\t\tsquareTool,\n\t\tcircleTool,\n\t\tdiamondTool,\n\t\tstraightLineTool,\n\t\ttextAreaTool,\n\t\tarrowTool,\n\t\teraseTool,\t\t\n\t]}\n\tactionTools={[\n\t\tundoTool,\n\t\tredoTool,\n\t\ttrashTool,\n\t\tduplicateTool,\n\t\tbringBackTool,\n\t\tbringForwardTool,\t\t\n\t]}\n  shouldSelectAfterCreate={true}\n  styleComponents={{\n    color: { order: 3, component: ColorStyle },\n    background: { order: 4, component: BackgroundStyle },\n    lineWidth: { order: 1, component: LineWidthStyle },\n    opacity: { order: 0, component: OpacityStyle },\n    fontSize: { order: 2, component: FontSizeStyle },\n  }}\n  menuComponents={[ClearAllButton]}\t\n/>\t\t\t\n\t\t\t",language:"tsx",type:"auto"}}};var FreeDrawOnly=Template.bind({});FreeDrawOnly.args={drawingTools:[_src__WEBPACK_IMPORTED_MODULE_16__.Lk],hideTopBar:!0,hideBottomBar:!0,shouldSelectAfterCreate:!1,shouldKeepHistory:!1},FreeDrawOnly.parameters={docs:{source:{code:"\n<ReactDraw \n\tdrawingTools={[\n\t\tfreeDrawTool\n\t]}\n\tshouldSelectAfterCreate={false}\n\thideTopBar: true,\n\thideBottomBar: true,\n\tshouldSelectAfterCreate: false,\n\tshouldKeepHistory: false,\n/>\n\t\t\t",language:"tsx",type:"auto"}}};var DefaultLayoutWithChildren=Template.bind({});DefaultLayoutWithChildren.args={drawingTools,actionTools,shouldSelectAfterCreate:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("p",{children:" hello world"})})},DefaultLayoutWithChildren.parameters={docs:{source:{code:"\n<ReactDraw \n\tdrawingTools={[\n\t\tselectTool,\n\t\tfreeDrawTool,\n\t\tsquareTool,\n\t\tcircleTool,\n\t\tdiamondTool,\n\t\tstraightLineTool,\n\t\ttextAreaTool,\n\t\tarrowTool,\n\t\teraseTool,\t\t\n\t]}\n\tactionTools={[\n\t\tundoTool,\n\t\tredoTool,\n\t\ttrashTool,\n\t\tduplicateTool,\n\t\tbringBackTool,\n\t\tbringForwardTool,\t\t\n\t]}\n\tshouldSelectAfterCreate={true}\n>\n\t<div>\n\t\t<p> hello world</p>\n\t</div>\n</ReactDraw>\t\t\t\t\n\t\t\t",language:"tsx",type:"auto"}}};var FitLayoutWithChildren=Template.bind({});FitLayoutWithChildren.args={drawingTools,actionTools,shouldSelectAfterCreate:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("p",{children:" hello world"})}),layout:"fit"},FitLayoutWithChildren.parameters={docs:{source:{code:'\n<ReactDraw \n\tdrawingTools={[\n\t\tselectTool,\n\t\tfreeDrawTool,\n\t\tsquareTool,\n\t\tcircleTool,\n\t\tdiamondTool,\n\t\tstraightLineTool,\n\t\ttextAreaTool,\n\t\tarrowTool,\n\t\teraseTool,\t\t\n\t]}\n\tactionTools={[\n\t\tundoTool,\n\t\tredoTool,\n\t\ttrashTool,\n\t\tduplicateTool,\n\t\tbringBackTool,\n\t\tbringForwardTool,\t\t\n\t]}\n\tshouldSelectAfterCreate={true}\n\tlayout="fit"\n>\n\t<div>\n\t\t<p> hello world</p>\n\t</div>\n</ReactDraw>\t\t\t\t\t\n\t\t\t',language:"tsx",type:"auto"}}};var circleToolCopy=Object.assign({},_src__WEBPACK_IMPORTED_MODULE_16__.u8);delete circleToolCopy.icon;var selectToolCopy=Object.assign({},_src__WEBPACK_IMPORTED_MODULE_16__.VS),imageTool={id:"my-image-tool-id",onDrawEnd:function onDrawEnd(){},onDrawing:function onDrawing(){},onDrawStart:function onDrawStart(){},onResize:function onResize(){}};function ControlFromExternalWrapper(_ref){var args=_extends({},(function _objectDestructuringEmpty(obj){if(null==obj)throw new TypeError("Cannot destructure "+obj)}(_ref),_ref)),contextGetterRef=(0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(0),2),numSelected=_useState2[0],setNumeSelected=_useState2[1],handleGetCtx=function handleGetCtx(){var ctxGetter=contextGetterRef.current;if(!ctxGetter)throw new Error("Ctx getter not set");return ctxGetter()},handleAddCustomText=function handleAddCustomText(editable){var ctx=handleGetCtx(),toolId=_src__WEBPACK_IMPORTED_MODULE_16__.E3.id;editable?(0,_src__WEBPACK_IMPORTED_MODULE_16__.rw)(ctx,{text:"hello, world",toolId,useTextToolDefaults:!0}):(0,_src__WEBPACK_IMPORTED_MODULE_16__.rw)(ctx,{text:"hello, world",toolId,editable:!1})};return selectToolCopy.subscribe&&selectToolCopy.subscribe((function handleSelectedToolEvent(event){var ctx=handleGetCtx(),selectedObjects=(0,_src__WEBPACK_IMPORTED_MODULE_16__.cm)(ctx);setNumeSelected(selectedObjects.length)})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("p",{children:"You can control the react draw context from outside of the ReactDraw component"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div",{style:{paddingTop:10,display:"flex",flexDirection:"column"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div",{children:["Num Selected Items: ",numSelected]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function handleClickAddCircle(){var ctx=handleGetCtx(),centerPoint=(0,_src__WEBPACK_IMPORTED_MODULE_16__.gZ)(ctx);(0,_src__WEBPACK_IMPORTED_MODULE_16__.y)(ctx,{pointA:centerPoint,pointB:[centerPoint[0]+100,centerPoint[1]+100],toolId:_src__WEBPACK_IMPORTED_MODULE_16__.u8.id})},children:"Add Circle"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function handleClickAddImage(){var ctx=handleGetCtx(),centerPoint=(0,_src__WEBPACK_IMPORTED_MODULE_16__.gZ)(ctx),loadingEle=document.createElement("p");loadingEle.innerHTML=" loading...",(0,_src__WEBPACK_IMPORTED_MODULE_16__.Bi)(ctx,{pointA:centerPoint,pointB:[centerPoint[0]+100,centerPoint[1]+100],toolId:imageTool.id,url:"https://picsum.photos/200",showLoading:!0,loadingElement:loadingEle})},children:"Add Picture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function handleSelectAll(){var ctx=handleGetCtx();(0,_src__WEBPACK_IMPORTED_MODULE_16__.td)(ctx)},children:"Select All"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function duplicateSelected(){var ctx=handleGetCtx();(0,_src__WEBPACK_IMPORTED_MODULE_16__.qu)(ctx)},children:"Duplicate Selected"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function moveSelectedBack(){var ctx=handleGetCtx();(0,_src__WEBPACK_IMPORTED_MODULE_16__.s0)(ctx)},children:"Move Selected Back"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function moveForward(){var ctx=handleGetCtx();(0,_src__WEBPACK_IMPORTED_MODULE_16__.cn)(ctx)},children:"Move Selected Forward"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function handleDelete(){var ctx=handleGetCtx();(0,_src__WEBPACK_IMPORTED_MODULE_16__.XC)(ctx)},children:"Delete Selected"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function onClick(){return handleAddCustomText(!0)},children:"Add some editable text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("button",{onClick:function onClick(){return handleAddCustomText(!1)},children:"Add some not editable text"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_src_ReactDraw__WEBPACK_IMPORTED_MODULE_15__.Z,Object.assign({},args,{contextGetter:function setContextGetter(contextGetter){contextGetterRef.current=contextGetter}}))]})]})}ControlFromExternalWrapper.displayName="ControlFromExternalWrapper";var ExternalControlsTemplate=function ExternalControlsTemplate(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(ControlFromExternalWrapper,Object.assign({},args))};ExternalControlsTemplate.displayName="ExternalControlsTemplate";var ExternalControls=ExternalControlsTemplate.bind({});ExternalControls.args={drawingTools:[_src__WEBPACK_IMPORTED_MODULE_16__.VS,circleToolCopy,imageTool,_src__WEBPACK_IMPORTED_MODULE_16__.E3],shouldKeepHistory:!1,shouldSelectAfterCreate:!0,hideTopBar:!0},ExternalControls.parameters={docs:{source:{code:'\nconst circleToolCopy = Object.assign({}, circleTool);\ndelete circleTool.icon;\nconst imageToolId = "my-image-tool-id";\n\nconst imageTool: DrawingTools = {\n\tid: imageToolId,\n\tonDrawEnd() {},\n\tonDrawing() {},\n\tonDrawStart() {},\n\tonResize() {},\n};\n\nfunction ControlFromExternalWrapper({ ...args }: any) {\n\tconst contextGetterRef = useRef<() => ReactDrawContext>();\n\n\tconst setContextGetter = (contextGetter: () => ReactDrawContext) => {\n\t\tcontextGetterRef.current = contextGetter;\n\t};\n\n\tconst handleClickAddCircle = () => {\n\t\tconst ctxGetter = contextGetterRef.current;\n\t\tif (!ctxGetter) {\n\t\t\tthrow new Error("Ctx getter not set");\n\t\t}\n\t\tconst ctx = ctxGetter();\n\t\tconst centerPoint = getViewCenterPoint(ctx);\n\t\tcreateCircle(ctx, {\n\t\t\tpointA: centerPoint,\n\t\t\tpointB: [centerPoint[0] + 100, centerPoint[1] + 100],\n\t\t\ttoolId: circleTool.id,\n\t\t});\n\t};\n\n\tconst handleClickAddImage = () => {\n\t\tconst ctxGetter = contextGetterRef.current;\n\t\tif (!ctxGetter) {\n\t\t\tthrow new Error("Ctx getter not set");\n\t\t}\n\t\tconst ctx = ctxGetter();\n\t\tconst centerPoint = getViewCenterPoint(ctx);\n\t\tconst loadingEle = document.createElement("p");\n\t\tloadingEle.innerHTML = " loading...";\n\t\tcreateImage(ctx, {\n\t\t\tpointA: centerPoint,\n\t\t\tpointB: [centerPoint[0] + 100, centerPoint[1] + 100],\n\t\t\ttoolId: imageTool.id,\n\t\t\turl: "https://picsum.photos/200",\n\t\t\tshowLoading: true,\n\t\t\tloadingElement: loadingEle,\n\t\t});\n\t};\n\n\tconst handleAddCustomText = (editable: boolean) => {\n    const ctx = handleGetCtx();\n    const toolId = textAreaTool.id;\n    if (!editable) {\n      createText(ctx, {\n        text: "hello, world",\n        toolId,\n        editable: false,\n      });\n      return;\n    }\n    createText(ctx, {\n      text: "hello, world",\n      toolId,\n      useTextToolDefaults: true,\n    });\n  };\n\n  const handleSelectAll = () => {\n    const ctxGetter = contextGetterRef.current;\n    if (!ctxGetter) {\n      throw new Error("Ctx getter not set");\n    }\n    const ctx = ctxGetter();\n    selectAll(ctx);\n  };\n\n  const duplicateSelected = () => {\n    const ctxGetter = contextGetterRef.current;\n    if (!ctxGetter) {\n      throw new Error("Ctx getter not set");\n    }\n    const ctx = ctxGetter();\n    duplicateSelectedObjects(ctx);\n  };\n\n  const moveSelectedBack = () => {\n    const ctxGetter = contextGetterRef.current;\n    if (!ctxGetter) {\n      throw new Error("Ctx getter not set");\n    }\n    const ctx = ctxGetter();\n    bringSelectedBack(ctx);\n  };\n\n  const moveForward = () => {\n    const ctxGetter = contextGetterRef.current;\n    if (!ctxGetter) {\n      throw new Error("Ctx getter not set");\n    }\n    const ctx = ctxGetter();\n    moveSelectedForward(ctx);\n  };\n\n  const handleDelete = () => {\n    const ctxGetter = contextGetterRef.current;\n    if (!ctxGetter) {\n      throw new Error("Ctx getter not set");\n    }\n    const ctx = ctxGetter();\n    deletedSelected(ctx);\n  };\n\n  return (\n    <div>\n      <p>\n        You can control the react draw context from outside of the ReactDraw\n        component\n      </p>\n      <div style={{ display: "flex", gap: 10 }}>\n        <div\n          style={{ paddingTop: 10, display: "flex", flexDirection: "column" }}\n        >\n          <button onClick={handleClickAddCircle}>Add Circle</button>\n          <button onClick={handleClickAddImage}>Add Picture</button>\n          <button onClick={handleSelectAll}>Select All</button>\n          <button onClick={duplicateSelected}>Duplicate Selected</button>\n          <button onClick={moveSelectedBack}>Move Selected Back</button>\n          <button onClick={moveForward}>Move Selected Forward</button>\n          <button onClick={handleDelete}>Delete Selected</button>\n\t\t\t\t\t<button onClick={handleDelete}>Delete Selected</button>\n          <button onClick={() => handleAddCustomText(true)}>\n        </div>\n        <ReactDraw {...args} contextGetter={setContextGetter} />\n      </div>\n    </div>\n  );\n}\t\n\t\t\t'},language:"tsx",type:"auto"}};var CustomizeStyles=Template.bind({});CustomizeStyles.args={drawingTools,actionTools,shouldKeepHistory:!0,shouldSelectAfterCreate:!0,styles:{toolIconWrapper:{"&:hover":{backgroundColor:"red"}},bottomToolButton:{'&[data-disabled="false"]:hover':{backgroundColor:"black"},'&[data-disabled="false"]:hover > svg path':{fill:"white",stroke:"white"}}}},CustomizeStyles.parameters={docs:{source:{code:'\nimport {\n\tcircleTool,\n\tsquareTool,\n\tselectTool,\n\tfreeDrawTool,\n\tdiamondTool,\n\tstraightLineTool,\n\ttextAreaTool,\n\teraseTool,\n\tundoTool,\n\tredoTool,\n\ttrashTool,\n\tduplicateTool,\n\tbringBackTool,\n\tbringForwardTool,\n\tColorStyle,\n\tBackgroundStyle,\n\tLineWidthStyle,\n\tOpacityStyle,\n\tarrowTool,\n\tClearAllButton,\n\tFontSizeStyle,\n} from "../src";\n\nexport default function ReactDrawWithCustomStyles() {\n\treturn (\n\t\t<ReactDraw\n\t\t\tdrawingTools={[ \n\t\t\t\tselectTool,\n\t\t\t\tfreeDrawTool,\n\t\t\t\tsquareTool,\n\t\t\t\tcircleTool,\n\t\t\t\tdiamondTool,\n\t\t\t\tstraightLineTool,\n\t\t\t\ttextAreaTool,\n\t\t\t\tarrowTool,\n\t\t\t\teraseTool\n\t\t\t]}\n\t\t\tactionTools={[\n\t\t\t\tundoTool,\n\t\t\t\tredoTool,\n\t\t\t\ttrashTool,\n\t\t\t\tduplicateTool,\n\t\t\t\tbringBackTool,\n\t\t\t\tbringForwardTool\n\t\t\t]}\n\t\t\tshouldKeepHistory={true}\n\t\t\tshouldSelectAfterCreate={true}\n\t\t\tstyles={{\n\t\t\t\ttoolIconWrapper: {\n\t\t\t\t\t"&:hover": {\n\t\t\t\t\tbackgroundColor: "red",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tbottomToolButton: {\n\t\t\t\t\t\'&[data-disabled="false"]:hover\': {\n\t\t\t\t\t\tbackgroundColor: "black",\n\t\t\t\t\t},\n\t\t\t\t\t\'&[data-disabled="false"]:hover > svg path\': {\n\t\t\t\t\t\tfill: "white",\n\t\t\t\t\t\tstroke: "white",\n\t\t\t\t\t},\n\t\t\t\t},\t\t\t\t\n\t\t\t}}\n\t\t/> \n\t)\n}\n',language:"tsx",type:"auto"}}};var serializers=((_serializers={})[_src__WEBPACK_IMPORTED_MODULE_16__.Lk.id]=_src__WEBPACK_IMPORTED_MODULE_16__.vX,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.uY.id]=_src__WEBPACK_IMPORTED_MODULE_16__.UP,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.u8.id]=_src__WEBPACK_IMPORTED_MODULE_16__.jV,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.Bp.id]=_src__WEBPACK_IMPORTED_MODULE_16__.YD,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.$Q.id]=_src__WEBPACK_IMPORTED_MODULE_16__.Z7,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.E3.id]=_src__WEBPACK_IMPORTED_MODULE_16__.Xi,_serializers[_src__WEBPACK_IMPORTED_MODULE_16__.H7.id]=_src__WEBPACK_IMPORTED_MODULE_16__.M2,_serializers),deserializers=((_deserializers={})[_src__WEBPACK_IMPORTED_MODULE_16__.Lk.id]=_src__WEBPACK_IMPORTED_MODULE_16__.ud,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.uY.id]=_src__WEBPACK_IMPORTED_MODULE_16__.Q2,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.u8.id]=_src__WEBPACK_IMPORTED_MODULE_16__.dV,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.Bp.id]=_src__WEBPACK_IMPORTED_MODULE_16__.pe,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.$Q.id]=_src__WEBPACK_IMPORTED_MODULE_16__.N9,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.E3.id]=_src__WEBPACK_IMPORTED_MODULE_16__.xu,_deserializers[_src__WEBPACK_IMPORTED_MODULE_16__.H7.id]=_src__WEBPACK_IMPORTED_MODULE_16__.OK,_deserializers),SaveCanvas=function SaveCanvas(_ref2){var getContext=_ref2.getContext,classes=(0,_src__WEBPACK_IMPORTED_MODULE_16__.yK)("saveCanvasComponent"),ref=(0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("button",{className:classes,id:"my-id",onClick:function handleSaveCanvas(){var ctx=getContext(),data=(0,_src__WEBPACK_IMPORTED_MODULE_16__.xF)(serializers,ctx);window&&window.localStorage.setItem("react-draw-saved-data",data)},ref,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("div",{style:{padding:"0px 5px",height:15},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_18__.Z,{height:15,width:20})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("label",{htmlFor:"my-id",style:{padding:"0px 10px",pointerEvents:"none"},children:"Save Canvas"})]})};SaveCanvas.displayName="SaveCanvas";var SaveAndLoadJson=Template.bind({});SaveAndLoadJson.args={drawingTools,shouldSelectAfterCreate:!0,menuComponents:[SaveCanvas,_src__WEBPACK_IMPORTED_MODULE_16__.vq],shouldKeepHistory:!1,onLoad:function onLoad(ctx){var savedData=localStorage.getItem("react-draw-saved-data");savedData&&(0,_src__WEBPACK_IMPORTED_MODULE_16__.OV)(savedData,deserializers,ctx)},styleComponents:{color:{order:3,component:_src__WEBPACK_IMPORTED_MODULE_16__.HQ},background:{order:4,component:_src__WEBPACK_IMPORTED_MODULE_16__.YI},lineWidth:{order:1,component:_src__WEBPACK_IMPORTED_MODULE_16__.F},opacity:{order:0,component:_src__WEBPACK_IMPORTED_MODULE_16__.H9},fontSize:{order:2,component:_src__WEBPACK_IMPORTED_MODULE_16__.Ty}},styles:{saveCanvasComponent:{width:180,fontSize:16,display:"flex",justifyContent:"flex-start",alignItems:"center",borderRadius:5,cursor:"pointer",padding:"7px 10px",backgroundColor:"white",marginBottom:10,boxSizing:"border-box",border:"1px solid "+_src__WEBPACK_IMPORTED_MODULE_16__.DM.primary.main,"&:hover":{backgroundColor:_src__WEBPACK_IMPORTED_MODULE_16__.DM.primary.light}}}},SaveAndLoadJson.parameters={docs:{source:{code:'\nimport {\n\tcircleTool,\n\tsquareTool,\n\tselectTool,\n\tfreeDrawTool,\n\tdiamondTool,\n\tstraightLineTool,\n\ttextAreaTool,\n\teraseTool,\n\tColorStyle,\n\tBackgroundStyle,\n\tLineWidthStyle,\n\tOpacityStyle,\n\tarrowTool,\n\tClearAllButton,\n\tFontSizeStyle,\n\tCOLORS,\n\tserializeFreeDraw,\n\tdeserializeFreeDraw,\n\tserializeObjects,\n\tdeserializeData,\n\tuseStyles,\n\tserializeSquare,\n\tdeserializeSquare,\n\tserializeCircle,\n\tdeserializeCircle,\n\tserializeDiamond,\n\tdeserializeDiamond,\n\tserializeLine,\n\tdeserializeLine,\n\tserializeText,\n\tdeserializeTextArea,\n\tserializeArrow,\n\tdeserializeArrow,\n} from "../src";\nimport { DownloadIcon } from "@jzohdi/jsx-icons";\n\nconst serializers: Serializers = {\n\t[freeDrawTool.id]: serializeFreeDraw,\n\t[squareTool.id]: serializeSquare,\n\t[circleTool.id]: serializeCircle,\n\t[diamondTool.id]: serializeDiamond,\n\t[straightLineTool.id]: serializeLine,\n\t[textAreaTool.id]: serializeText,\n\t[arrowTool.id]: serializeArrow\n};\n\nconst deserializers: Deserializers = {\n\t[freeDrawTool.id]: deserializeFreeDraw,\n\t[squareTool.id]: deserializeSquare,\n\t[circleTool.id]: deserializeCircle,\n\t[diamondTool.id]: deserializeDiamond,\n\t[straightLineTool.id]: deserializeLine,\n\t[textAreaTool.id]: deserializeTextArea,\n\t[arrowTool.id]: deserializeArrow\n};\n\nconst inputId = "my-id";\n\nconst SaveCanvas: MenuComponent = ({ getContext }) => {\n\tconst classes = useStyles("saveCanvasComponent");\n\tconst ref = useRef<HTMLButtonElement>(null);\n\n\t// could also do a loading state\n\tuseEffect(() => {\n\t\tconst savedData = localStorage.getItem("react-draw-saved-data");\n\t\tif (savedData) {\n\t\t\tconst ctx = getContext();\n\t\t\tdeserializeData(savedData, deserializers, ctx);\n\t\t}\n\t}, []);\n\n\tconst handleSaveCanvas = () => {\n\t\tconst ctx = getContext();\n\t\t// collected serialization of each drowing object on the canvas\n\t\tconst data = serializeObjects(serializers, ctx);\n\t\t// save the data where ever you\'d like\n\t\tif (window) {\n\t\t\twindow.localStorage.setItem("react-draw-saved-data", data);\n\t\t}\n\t};\n\treturn (\n\t\t<button\n\t\t\tclassName={classes}\n\t\t\tid={inputId}\n\t\t\tonClick={handleSaveCanvas}\n\t\t\tref={ref}\n\t\t>\n\t\t\t<div style={{ padding: "0px 5px", height: 15 }}>\n\t\t\t\t<DownloadIcon height={15} width={20} />\n\t\t\t</div>\n\t\t\t<label\n\t\t\t\thtmlFor={inputId}\n\t\t\t\tstyle={{ padding: "0px 10px", pointerEvents: "none" }}\n\t\t\t>\n\t\t\t\tSave Canvas\n\t\t\t</label>\n\t\t</button>\n\t);\n};\n\n\nfunction MyComponent() {\n\treturn <ReactDraw \n\t\tdrawingTools={drawingTools}\n\t\t\tshouldSelectAfterCreate={true}\n\t\t\tmenuComponents={[SaveCanvas, ClearAllButton]}\n\t\t\tshouldKeepHistory={false}\n\t\t\tstyleComponents={{\n\t\t\t\tcolor: { order: 3, component: ColorStyle },\n\t\t\t\tbackground: { order: 4, component: BackgroundStyle },\n\t\t\t\tlineWidth: { order: 1, component: LineWidthStyle },\n\t\t\t\topacity: { order: 0, component: OpacityStyle },\n\t\t\t\tfontSize: { order: 2, component: FontSizeStyle },\n\t\t\t}}\n\t\t\tstyles={{\n\t\t\t\tsaveCanvasComponent: {\n\t\t\t\t\twidth: 180,\n\t\t\t\t\tfontSize: 16,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tjustifyContent: "flex-start",\n\t\t\t\t\talignItems: "center",\n\t\t\t\t\tborderRadius: 5,\n\t\t\t\t\tcursor: "pointer",\n\t\t\t\t\tpadding: "7px 10px",\n\t\t\t\t\tbackgroundColor: "white",\n\t\t\t\t\tmarginBottom: 10,\n\t\t\t\t\tboxSizing: "border-box",\n\t\t\t\t\tborder: `1px solid ${COLORS.primary.main}`,\n\t\t\t\t\t"&:hover": {\n\t\t\t\t\t\tbackgroundColor: COLORS.primary.light,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t/>\n}\n\t\t\t'}}};var AllToolsPreserveAspectRatio=Template.bind({});AllToolsPreserveAspectRatio.args={drawingTools,actionTools,shouldSelectAfterCreate:!0,shouldCornerResizePreserveRatio:!0,styleComponents:{color:{order:3,component:_src__WEBPACK_IMPORTED_MODULE_16__.HQ},background:{order:4,component:_src__WEBPACK_IMPORTED_MODULE_16__.YI},lineWidth:{order:1,component:_src__WEBPACK_IMPORTED_MODULE_16__.F},opacity:{order:0,component:_src__WEBPACK_IMPORTED_MODULE_16__.H9},fontSize:{order:2,component:_src__WEBPACK_IMPORTED_MODULE_16__.Ty}},menuComponents:[_src__WEBPACK_IMPORTED_MODULE_16__.vq]},AllToolsPreserveAspectRatio.parameters={docs:{source:{code:"\n<ReactDraw \n\tdrawingTools={[\n\t\tselectTool,\n\t\tfreeDrawTool,\n\t\tsquareTool,\n\t\tcircleTool,\n\t\tdiamondTool,\n\t\tstraightLineTool,\n\t\ttextAreaTool,\n\t\tarrowTool,\n\t\teraseTool,\t\t\n\t]}\n\tactionTools={[\n\t\tundoTool,\n\t\tredoTool,\n\t\ttrashTool,\n\t\tduplicateTool,\n\t\tbringBackTool,\n\t\tbringForwardTool,\t\t\n\t]}\n  shouldSelectAfterCreate={true}\n  styleComponents={{\n    color: { order: 3, component: ColorStyle },\n    background: { order: 4, component: BackgroundStyle },\n    lineWidth: { order: 1, component: LineWidthStyle },\n    opacity: { order: 0, component: OpacityStyle },\n    fontSize: { order: 2, component: FontSizeStyle },\n  }}\n  menuComponents={[ClearAllButton]}\t\n/>\t\t\t\n\t\t\t",language:"tsx",type:"auto"}}},DefaultLayoutAllTools.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutAllTools.parameters),FreeDrawOnly.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FreeDrawOnly.parameters),DefaultLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithChildren.parameters),FitLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FitLayoutWithChildren.parameters),ExternalControls.parameters=Object.assign({storySource:{source:"(args) => (\r\n  <ControlFromExternalWrapper {...args} />\r\n)"}},ExternalControls.parameters),CustomizeStyles.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},CustomizeStyles.parameters),SaveAndLoadJson.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},SaveAndLoadJson.parameters),AllToolsPreserveAspectRatio.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},AllToolsPreserveAspectRatio.parameters);var __namedExportsOrder=["DefaultLayoutAllTools","FreeDrawOnly","DefaultLayoutWithChildren","FitLayoutWithChildren","ExternalControls","CustomizeStyles","SaveAndLoadJson","AllToolsPreserveAspectRatio"]},"./stories/SaveCanvas.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SaveCanvasAsImage:()=>SaveCanvasAsImage,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_src__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/index.ts"),_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PhotographBoldIcon.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Customization Examples/Save Canvas As Image"};var drawingTools=[_src__WEBPACK_IMPORTED_MODULE_6__.VS,_src__WEBPACK_IMPORTED_MODULE_6__.Lk],SaveCanvas=function SaveCanvas(_ref){var getContext=_ref.getContext,classes=(0,_src__WEBPACK_IMPORTED_MODULE_6__.yK)("saveCanvasComponent"),ref=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var scriptTag=document.createElement("script");scriptTag.async=!0,scriptTag.integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==",scriptTag.crossOrigin="anonymous",scriptTag.referrerPolicy="no-referrer",scriptTag.onload=function(){console.log("loaded html2canvas")},scriptTag.src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js",ref.current&&ref.current.appendChild(scriptTag)}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("button",{className:classes,id:"my-id",onClick:function handleSaveCanvas(){var container=getContext().viewContainer;window.html2canvas&&(0,window.html2canvas)(container,{allowTaint:!0}).then((function(canvas){var base64image=canvas.toDataURL("image/png"),downloadLink=document.createElement("a");document.body.appendChild(downloadLink),downloadLink.href=base64image,downloadLink.target="_self",downloadLink.download="react-draw-saved-"+(new Date).toLocaleDateString()+"_"+(new Date).toLocaleTimeString().replace(/\s/g,"").replace(/:/g,"_")+".png",downloadLink.click()}))},ref,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{style:{padding:"0px 5px",height:15},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_8__.Z,{height:15,width:20})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("label",{htmlFor:"my-id",style:{padding:"0px 10px",pointerEvents:"none"},children:"Save Canvas"})]})};SaveCanvas.displayName="SaveCanvas";var Template=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.IR,Object.assign({},args,{styles:{saveCanvasComponent:{width:180,fontSize:16,display:"flex",justifyContent:"flex-start",alignItems:"center",borderRadius:5,cursor:"pointer",padding:"7px 10px",backgroundColor:"white",marginBottom:10,boxSizing:"border-box",border:"1px solid "+_src__WEBPACK_IMPORTED_MODULE_6__.DM.primary.main,"&:hover":{backgroundColor:_src__WEBPACK_IMPORTED_MODULE_6__.DM.primary.light}}}}))};Template.displayName="Template";var SaveCanvasAsImage=Template.bind({});SaveCanvasAsImage.args={drawingTools,shouldSelectAfterCreate:!0,menuComponents:[SaveCanvas,_src__WEBPACK_IMPORTED_MODULE_6__.vq],shouldKeepHistory:!1},SaveCanvasAsImage.parameters={docs:{source:{code:'\nimport {\n\tReactDraw,\n\tselectTool,\n\tfreeDrawTool,\n\tClearAllButton,\n\tDrawingTools,\n\tMenuComponent,\n\tReactDrawProps,\n\tCOLORS,\n} from "@jzohdi/react-draw";\nimport { PhotographBoldIcon } from "@jzohdi/jsx-icons";\nimport styled from "styled-components";\n\nconst drawingTools: DrawingTools[] = [selectTool, freeDrawTool];\n\nexport default function ExampleProject() {\n\n\treturn <ReactDraw \n\t\tdrawingTools={drawingTools}\n\t\tshouldSelectAfterCreate={true}\n\t\tmenuComponents={[SaveCanvas, ClearAllButton]}\n\t\tshouldKeepHistory={false}\n\t\tstyles={{\n\t\t\tsaveCanvasComponent: {\n\t\t\t  width: 180,\n\t\t\t  fontSize: 16,\n\t\t\t  display: "flex",\n\t\t\t  justifyContent: "flex-start",\n\t\t\t  alignItems: "center",\n\t\t\t  borderRadius: 5,\n\t\t\t  cursor: "pointer",\n\t\t\t  padding: "7px 10px",\n\t\t\t  backgroundColor: "white",\n\t\t\t  marginBottom: 10,\n\t\t\t  boxSizing: "border-box",\n\t\t\t  border: `1px solid ${COLORS.primary.main}`,\n\t\t\t  "&:hover": {\n\t\t\t\tbackgroundColor: COLORS.primary.light,\n\t\t\t  },\n\t\t\t},\n\t\t  }}\t\t\n\t\t/>\n\n}\n\nconst SaveCanvas: MenuComponent = ({ getContext }) => {\n\tconst classes = useStyles("saveCanvasComponent");\n\tconst ref = useRef<HTMLButtonElement>(null);\n\n\t// could also do a loading state\n\t\n\tuseEffect(() => {\n\t  const scriptTag = document.createElement("script");\n\t  scriptTag.async = true;\n\t  scriptTag.integrity =\n\t\t"sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==";\n\t  scriptTag.crossOrigin = "anonymous";\n\t  scriptTag.referrerPolicy = "no-referrer";\n\t  scriptTag.onload = function () {\n\t\tconsole.log("loaded html2canvas");\n\t  };\n\t  scriptTag.src =\n\t\t"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js";\n\t  if (ref.current) {\n\t\tref.current.appendChild(scriptTag);\n\t  }\n\t}, []);\n  \n\tconst handleSaveCanvas = () => {\n\t  const ctx = getContext();\n\t  const container = ctx.viewContainer;\n\t  if (window.html2canvas) {\n\t\tconst html2canvas = window.html2canvas;\n\t\thtml2canvas(container).then((canvas) => {\n\t\t  const base64image = canvas.toDataURL("image/png");\n\t\t  const downloadLink = document.createElement("a");\n\t\t  document.body.appendChild(downloadLink);\n  \n\t\t  downloadLink.href = base64image;\n\t\t  downloadLink.target = "_self";\n\t\t  downloadLink.download =\n\t\t\t"react-draw-saved-" +\n\t\t\tnew Date().toLocaleDateString() +\n\t\t\t"_" +\n\t\t\tnew Date()\n\t\t\t  .toLocaleTimeString()\n\t\t\t  .replace(/s/g, "")\n\t\t\t  .replace(/:/g, "_") +\n\t\t\t".png";\n\t\t  downloadLink.click();\n\t\t});\n\t  }\n\t};\n\treturn (\n\t  <button\n\t\tclassName={classes}\n\t\tid={inputId}\n\t\tonClick={handleSaveCanvas}\n\t\tref={ref}\n\t  >\n\t\t<div style={{ padding: "0px 5px", height: 15 }}>\n\t\t  <PhotographBoldIcon height={15} width={20} />\n\t\t</div>\n\t\t<label\n\t\t  htmlFor={inputId}\n\t\t  style={{ padding: "0px 10px", pointerEvents: "none" }}\n\t\t>\n\t\t  Save Canvas\n\t\t</label>\n\t  </button>\n\t);\n};\n\t  ',language:"tsx",type:"auto"},description:{component:'In this example we create a menu component that saves the canvas to an image. This loades the <a href="https://html2canvas.hertzen.com">html2canvas library</a> and saves the DOM as a jpg'}}},SaveCanvasAsImage.parameters=Object.assign({storySource:{source:'(args) => (\r\n  <ReactDraw\r\n    {...args}\r\n    styles={{\r\n      saveCanvasComponent: {\r\n        width: 180,\r\n        fontSize: 16,\r\n        display: "flex",\r\n        justifyContent: "flex-start",\r\n        alignItems: "center",\r\n        borderRadius: 5,\r\n        cursor: "pointer",\r\n        padding: "7px 10px",\r\n        backgroundColor: "white",\r\n        marginBottom: 10,\r\n        boxSizing: "border-box",\r\n        border: `1px solid ${COLORS.primary.main}`,\r\n        "&:hover": {\r\n          backgroundColor: COLORS.primary.light,\r\n        },\r\n      },\r\n    }}\r\n  />\r\n)'}},SaveCanvasAsImage.parameters);var __namedExportsOrder=["SaveCanvasAsImage"]},"./src/ReactDraw/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_ReactDraw});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var defaultStyles={boxShadow:"#000000 0px 1px 3px 0px",borderRadius:4,display:"flex",flexDirection:"column",position:"relative",fontFamily:"sans-serif"};const ReactDraw_Container=(0,react.forwardRef)((function Container(_ref,ref){var children=_ref.children,layout=_ref.layout,style=_ref.style,styles=function getStyles(layout){return"default"===layout?{width:500,height:500,maxWidth:"100%"}:"fit"===layout?{maxWidth:"100%"}:{width:layout.width,height:layout.width}}(layout),combinedStyles=Object.assign({},defaultStyles,styles);return void 0!==style&&(combinedStyles=Object.assign({},combinedStyles,style)),(0,jsx_runtime.jsx)("div",{style:combinedStyles,ref,children})}));try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"LayoutOption"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"DetailedHTMLProps<HTMLAttributes<HTMLDivElement>, HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/Container.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/ReactDraw/Container.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var initialData={color:null,message:null,position:"top"},AlertMessageContext=(0,react.createContext)([initialData,function(){}]);function AlertMessageProvider(_ref){var children=_ref.children,_useState2=_slicedToArray((0,react.useState)(initialData),2),state=_useState2[0],setState=_useState2[1];return(0,jsx_runtime.jsx)(AlertMessageContext.Provider,{value:[state,function updateState(newState){setState(newState)}],children})}AlertMessageProvider.displayName="AlertMessageProvider";try{AlertMessageProvider.displayName="AlertMessageProvider",AlertMessageProvider.__docgenInfo={description:"",displayName:"AlertMessageProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Alerts/context.tsx#AlertMessageProvider"]={docgenInfo:AlertMessageProvider.__docgenInfo,name:"AlertMessageProvider",path:"src/Alerts/context.tsx#AlertMessageProvider"})}catch(__react_docgen_typescript_loader_error){}function hooks_slicedToArray(arr,i){return function hooks_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function hooks_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function hooks_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return hooks_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hooks_arrayLikeToArray(o,minLen)}(arr,i)||function hooks_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hooks_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useAlerts(){var _useContext2=hooks_slicedToArray((0,react.useContext)(AlertMessageContext),2);return[_useContext2[0],_useContext2[1]]}var constants=__webpack_require__("./src/constants.ts"),hooks=__webpack_require__("./src/Styles/hooks.ts");function AlertMessage_slicedToArray(arr,i){return function AlertMessage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AlertMessage_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function AlertMessage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AlertMessage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AlertMessage_arrayLikeToArray(o,minLen)}(arr,i)||function AlertMessage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AlertMessage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AlertMessage(){var _ref,state=AlertMessage_slicedToArray(useAlerts(),1)[0],classes=(0,hooks.y)(constants.G7);return(0,jsx_runtime.jsx)("dialog",{className:classes,style:(_ref={backgroundColor:state.color||"black"},_ref[state.position]=10,_ref),open:null!==state.message,children:state.message})}AlertMessage.displayName="AlertMessage";__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js");function ToolIconWrapper(_ref){var children=_ref.children,selected=_ref.selected,onSelect=_ref.onSelect,classes=(0,hooks.y)(constants.Jh);return(0,jsx_runtime.jsx)("button",{"data-selected":selected,className:classes,onClick:onSelect,children})}ToolIconWrapper.displayName="ToolIconWrapper";try{ToolIconWrapper.displayName="ToolIconWrapper",ToolIconWrapper.__docgenInfo={description:"",displayName:"ToolIconWrapper",props:{selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"]={docgenInfo:ToolIconWrapper.__docgenInfo,name:"ToolIconWrapper",path:"src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"})}catch(__react_docgen_typescript_loader_error){}function ToolTip_slicedToArray(arr,i){return function ToolTip_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ToolTip_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function ToolTip_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ToolTip_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ToolTip_arrayLikeToArray(o,minLen)}(arr,i)||function ToolTip_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ToolTip_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ToolTip(_ref){var children=_ref.children,text=_ref.text,position=_ref.position,disabled=_ref.disabled,_useAlerts2=ToolTip_slicedToArray(useAlerts(),2),state=_useAlerts2[0],setState=_useAlerts2[1];if(!children)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{});if(!text)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children});return(0,jsx_runtime.jsx)("span",{onMouseOver:function handleMouseEnter(){disabled||function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}()||setState(Object.assign({},state,{message:text,position}))},onMouseLeave:function handleMouseLeave(){null!==state.message&&setState(Object.assign({},state,{message:null}))},"aria-label":"label mouse listener "+text,children})}ToolTip.displayName="ToolTip";try{ToolTip.displayName="ToolTip",ToolTip.__docgenInfo={description:"",displayName:"ToolTip",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"enum",value:[{value:'"top"'},{value:'"bottom"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Alerts/ToolTip.tsx#ToolTip"]={docgenInfo:ToolTip.__docgenInfo,name:"ToolTip",path:"src/Alerts/ToolTip.tsx#ToolTip"})}catch(__react_docgen_typescript_loader_error){}var types=__webpack_require__("./src/types.ts");function TopToolBar(_ref){var tools=_ref.tools,onSelectDrawingTool=_ref.onSelectDrawingTool,onClickActionTool=_ref.onClickActionTool,currentTool=_ref.currentTool,classes=(0,hooks.y)(constants.mV);return(0,jsx_runtime.jsx)("div",{className:classes,children:tools.filter((function(tool){return!!tool.icon})).map((function(tool,i){var tooltip=tool.tooltip;return(0,jsx_runtime.jsx)(ToolTip,{text:tooltip,position:"top",children:(0,jsx_runtime.jsx)(ToolIconWrapper,{selected:tool.id===currentTool,onSelect:function onSelect(){return(0,types.g)(tool)?onSelectDrawingTool(tool):(0,types.m)(tool)?onClickActionTool(tool.handleContext):void 0},children:tool.icon})},tool.id)}))})}TopToolBar.displayName="TopToolBar";try{TopToolBar.displayName="TopToolBar",TopToolBar.__docgenInfo={description:"",displayName:"TopToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"TopBarTool[]"}},onSelectDrawingTool:{defaultValue:null,description:"",name:"onSelectDrawingTool",required:!0,type:{name:"(drawingTool: DrawingTools) => void"}},onClickActionTool:{defaultValue:null,description:"",name:"onClickActionTool",required:!0,type:{name:"(fn: (ctx: ReactDrawContext) => void) => void"}},currentTool:{defaultValue:null,description:"",name:"currentTool",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/TopToolBar.tsx#TopToolBar"]={docgenInfo:TopToolBar.__docgenInfo,name:"TopToolBar",path:"src/ReactDraw/TopToolBar.tsx#TopToolBar"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./src/utils/index.ts"),MenuIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/MenuIcon.js"),PaletteBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PaletteBoldIcon.js");function StylesMenu_slicedToArray(arr,i){return function StylesMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StylesMenu_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function StylesMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StylesMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StylesMenu_arrayLikeToArray(o,minLen)}(arr,i)||function StylesMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StylesMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StylesMenu(_ref){var getEditProps=_ref.getEditProps,_ref$styleComponents=_ref.styleComponents,styleComponents=void 0===_ref$styleComponents?{}:_ref$styleComponents,onUpdateStyle=_ref.onUpdateStyle,_useState2=StylesMenu_slicedToArray((0,react.useState)(getEditProps()),2),state=_useState2[0],setState=_useState2[1],keysToRender=Object.keys(state).filter((function(k){return!!styleComponents[k]}));(0,react.useEffect)((function(){function updateEditProps(){var newState=getEditProps();setState(newState)}return window.addEventListener("click",updateEditProps),function(){window.removeEventListener("click",updateEditProps)}}),[state]);var onUpdate=function onUpdate(key,value){var _Object$assign;setState(Object.assign({},state,((_Object$assign={})[key]=value,_Object$assign))),onUpdateStyle(key,value)};return 0===keysToRender.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(keysToRender.sort((function(a,b){var orderA=styleComponents[a].order;return styleComponents[b].order-orderA})),(0,jsx_runtime.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:keysToRender.map((function(key){var Component=styleComponents[key].component;return(0,jsx_runtime.jsx)(Component,{onUpdate,styleKey:key,styleValue:state[key]},key)}))}))}StylesMenu.displayName="StylesMenu";try{StylesMenu.displayName="StylesMenu",StylesMenu.__docgenInfo={description:"",displayName:"StylesMenu",props:{getEditProps:{defaultValue:null,description:"",name:"getEditProps",required:!0,type:{name:"() => StringObject"}},styleComponents:{defaultValue:{value:"{}"},description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},onUpdateStyle:{defaultValue:null,description:"",name:"onUpdateStyle",required:!0,type:{name:"UpdateStyleFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/StylesMenu.tsx#StylesMenu"]={docgenInfo:StylesMenu.__docgenInfo,name:"StylesMenu",path:"src/ReactDraw/StylesMenu.tsx#StylesMenu"})}catch(__react_docgen_typescript_loader_error){}function BottomToolBar_slicedToArray(arr,i){return function BottomToolBar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function BottomToolBar_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function BottomToolBar_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BottomToolBar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BottomToolBar_arrayLikeToArray(o,minLen)}(arr,i)||function BottomToolBar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BottomToolBar_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BottomToolBar(_ref){var tools=_ref.tools,displayMap=_ref.displayMap,onSelectDrawingTool=_ref.onSelectDrawingTool,onClickActionTool=_ref.onClickActionTool,stylesMenu=_ref.stylesMenu,children=_ref.children,bottomBarContainerClasses=(0,hooks.y)(constants.QE),bottomToolButtonClasses=(0,hooks.y)(constants.o7),menuButtonClasses=(0,hooks.y)(constants.Cn),menuContainerClasses=(0,hooks.y)(constants.dJ),_useState2=BottomToolBar_slicedToArray((0,react.useState)(null),2),menuOpen=_useState2[0],setMenuOpen=_useState2[1],handleToggleMenu=function handleToggleMenu(key){return setMenuOpen(key===menuOpen?null:key)},hasStyleMenu=!!stylesMenu.styleComponents&&!function isObjEmpty(obj){for(var _x in obj)return!1;return!0}(stylesMenu.styleComponents),hasMenu=!!children&&react.Children.count(children)>0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["styles"===menuOpen&&(0,jsx_runtime.jsx)("div",{className:menuContainerClasses,children:(0,jsx_runtime.jsx)(StylesMenu,Object.assign({},stylesMenu))}),"menu"===menuOpen&&(0,jsx_runtime.jsx)("div",{className:menuContainerClasses,children}),(0,jsx_runtime.jsxs)("div",{className:bottomBarContainerClasses,children:[hasMenu&&(0,jsx_runtime.jsx)(ToolTip,{text:"Menu",position:"bottom",children:(0,jsx_runtime.jsx)("button",{className:menuButtonClasses,onClick:function onClick(){return handleToggleMenu("menu")},"data-open":"menu"===menuOpen,children:(0,jsx_runtime.jsx)(MenuIcon.Z,{size:20})})}),hasStyleMenu&&(0,jsx_runtime.jsx)(ToolTip,{text:"Styles",position:"bottom",children:(0,jsx_runtime.jsx)("button",{className:menuButtonClasses,onClick:function onClick(){return handleToggleMenu("styles")},"data-open":"styles"===menuOpen,children:(0,jsx_runtime.jsx)(PaletteBoldIcon.Z,{size:20})})}),tools.map((function(tool,i){var toolId=tool.id,toolDisplayMode=displayMap.get(toolId)||"hide",isDisabled="disabled"===toolDisplayMode;return(0,jsx_runtime.jsx)(ToolTip,{text:tool.tooltip,position:"bottom",disabled:isDisabled,children:(0,jsx_runtime.jsx)("button",{className:bottomToolButtonClasses,"aria-disabled":isDisabled,"data-disabled":isDisabled,"data-mode":toolDisplayMode,disabled:isDisabled,onClick:function onClick(){return(0,types.g)(tool)?onSelectDrawingTool(tool):(0,types.m)(tool)?onClickActionTool(tool.handleContext):void 0},children:tool.icon})},tool.id)}))]})]})}try{BottomToolBar.displayName="BottomToolBar",BottomToolBar.__docgenInfo={description:"",displayName:"BottomToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"BaseTool[]"}},displayMap:{defaultValue:null,description:"",name:"displayMap",required:!0,type:{name:"BottomToolDisplayMap"}},onSelectDrawingTool:{defaultValue:null,description:"",name:"onSelectDrawingTool",required:!0,type:{name:"(drawingTool: DrawingTools) => void"}},onClickActionTool:{defaultValue:null,description:"",name:"onClickActionTool",required:!0,type:{name:"(fn: (ctx: ReactDrawContext) => void) => void"}},stylesMenu:{defaultValue:null,description:"",name:"stylesMenu",required:!0,type:{name:"{ getEditProps: () => StringObject; styleComponents?: StyleComponents | undefined; onUpdateStyle: UpdateStyleFn; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/BottomToolBar.tsx#BottomToolBar"]={docgenInfo:BottomToolBar.__docgenInfo,name:"BottomToolBar",path:"src/ReactDraw/BottomToolBar.tsx#BottomToolBar"})}catch(__react_docgen_typescript_loader_error){}var utils_utils=__webpack_require__("./src/utils/utils.ts"),select_utils=__webpack_require__("./src/utils/select/utils.ts"),getSelectedDrawingObjects=__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts"),pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ReactDraw_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ReactDraw_slicedToArray(arr,i){return function ReactDraw_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReactDraw_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||ReactDraw_unsupportedIterableToArray(arr,i)||function ReactDraw_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return ReactDraw_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ReactDraw_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReactDraw_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ReactDraw_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ReactDraw_arrayLikeToArray(o,minLen):void 0}}function ReactDraw_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeToolsList(drawingTools,actionTools,position){var drawTools=drawingTools.filter((function(t){return"top"===position?!t.postition||t.postition.view===position:!!t.postition&&t.postition.view===position})),actions=actionTools.filter((function(t){return"bottom"===position?!t.postition||t.postition.view===position:!!t.postition&&t.postition.view===position}));return _toConsumableArray(drawTools).concat(actions).sort((function(a,b){var _a$postition,_b$postition,_a$postition2,_b$postition2;return null!==(_a$postition=a.postition)&&void 0!==_a$postition&&_a$postition.order||null!==(_b$postition=b.postition)&&void 0!==_b$postition&&_b$postition.order?null!==(_a$postition2=a.postition)&&void 0!==_a$postition2&&_a$postition2.order?null!==(_b$postition2=b.postition)&&void 0!==_b$postition2&&_b$postition2.order?a.postition.order-b.postition.order:-1:1:0}))}function ReactDraw_ReactDraw(_ref){var children=_ref.children,_ref$id=_ref.id,id=void 0===_ref$id?"main":_ref$id,drawingTools=_ref.drawingTools,hideTopBar=_ref.hideTopBar,_ref$actionTools=_ref.actionTools,actionTools=void 0===_ref$actionTools?[]:_ref$actionTools,hideBottomBar=_ref.hideBottomBar,_ref$shouldKeepHistor=_ref.shouldKeepHistory,shouldKeepHistory=void 0===_ref$shouldKeepHistor||_ref$shouldKeepHistor,_ref$shouldSelectAfte=_ref.shouldSelectAfterCreate,shouldSelectAfterCreate=void 0===_ref$shouldSelectAfte||_ref$shouldSelectAfte,_ref$isResponsive=_ref.isResponsive,isResponsive=void 0!==_ref$isResponsive&&_ref$isResponsive,_ref$shouldCornerResi=_ref.shouldCornerResizePreserveRatio,shouldCornerResizePreserveRatio=void 0!==_ref$shouldCornerResi&&_ref$shouldCornerResi,styleComponents=_ref.styleComponents,_ref$menuComponents=_ref.menuComponents,menuComponents=void 0===_ref$menuComponents?[]:_ref$menuComponents,onLoad=_ref.onLoad,contextGetter=_ref.contextGetter,drawingAreaRef=(0,react.useRef)(null),_useState2=ReactDraw_slicedToArray((0,react.useState)(drawingTools[0]),2),currentDrawingTool=_useState2[0],setCurrentDrawingTool=_useState2[1],renderedElementsMap=(0,react.useRef)(new Map),currDrawObj=(0,react.useRef)(null),drawingAreaId=(0,react.useRef)("drawing-area-container-"+id),previousMousePos=(0,react.useRef)(null),latestEvent=(0,react.useRef)(null),customState=(0,react.useRef)(function setupCustomStateSpace(tools){var _state,state=((_state={})[constants.xV]={selectedIds:[],handlers:{},prevPoint:null},_state[constants.V5]={deletedObjects:new Map},_state);return tools.reduce((function(prev,curr){return void 0===prev[curr.id]&&(prev[curr.id]={}),curr.setupCustomState&&(prev[curr.id]=Object.assign(prev[curr.id],curr.setupCustomState(state))),prev}),state)}(drawingTools)),undoStack=(0,react.useRef)([]),redoStack=(0,react.useRef)([]),objectToSelect=(0,react.useRef)(null),globalStyles=(0,react.useRef)(function setupGlobalStyles(topBarTools){return Object.assign({},defaultEditableProps)}()),_useState4=ReactDraw_slicedToArray((0,react.useState)(new Map),2),bottomToolsDisplayMap=_useState4[0],setBottomToolsDisplayMap=_useState4[1],topBarTools=(0,react.useMemo)((function(){return makeToolsList(drawingTools,actionTools,"top")}),[drawingTools,actionTools]),bottomBarTools=(0,react.useMemo)((function(){return makeToolsList(drawingTools,actionTools,"bottom")}),[drawingTools,actionTools]),updateBottomToolDisplayMap=function updateBottomToolDisplayMap(){var newMap=function makeBottomBarDisplayMap(){var bottomDisplayMap=new Map;return actionTools.reduce((function(prev,curr){return prev.set(curr.id,curr.getDisplayMode(getReactDrawContext())),prev}),bottomDisplayMap)}();if(newMap.size!==bottomToolsDisplayMap.size)return setBottomToolsDisplayMap(newMap);var _step,_iterator=_createForOfIteratorHelper(newMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;if(newMap.get(key)!==bottomToolsDisplayMap.get(key))return setBottomToolsDisplayMap(newMap)}}catch(err){_iterator.e(err)}finally{_iterator.f()}};(0,react.useEffect)((function(){updateBottomToolDisplayMap(),onLoad&&onLoad(getReactDrawContext())}),[]),(0,react.useEffect)((function(){if(currentDrawingTool.id===constants.xV){var obj=objectToSelect.current;if(obj){var ctx=getReactDrawContext();unselectEverything(ctx),ctx.fullState[constants.xV].selectedIds=[obj.id],(0,select_utils.G7)(obj,ctx),objectToSelect.current=null}}updateBottomToolDisplayMap()}),[currentDrawingTool]);var selectObject=function selectObject(data){if(currentDrawingTool.id!==constants.xV)return objectToSelect.current=data,setCurrentDrawingTool(getToolById(drawingTools,constants.xV));var ctx=getReactDrawContext();unselectEverything(ctx),ctx.fullState[constants.xV].selectedIds=[data.id],(0,select_utils.G7)(data,ctx),updateBottomToolDisplayMap()},getReactDrawContext=function getReactDrawContext(viewC){var viewContainer=viewC||getViewContainer(),fullState=customState.current;return{viewContainer,objectsMap:renderedElementsMap.current,lastEvent:latestEvent.current,prevMousePosition:previousMousePos,drawingTools,fullState,undoStack:undoStack.current,redoStack:redoStack.current,shouldKeepHistory,shouldCornerResizePreserveRatio,selectDrawingTool:handleSelectDrawingTool,selectObject,shouldSelectAfterCreate,globalStyles:globalStyles.current}};function alertToolOfKeydown(e){currentDrawingTool.onKeyPress&&(currentDrawingTool.onKeyPress(e,getReactDrawContext()),updateBottomToolDisplayMap())}var getViewContainer=function getViewContainer(){var viewContainer=drawingAreaRef.current;if(!viewContainer)throw new Error("no view container while resizing");return viewContainer};function startDraw(relativePoint){var ctx=getReactDrawContext(),styles=Object.assign({},globalStyles.current),nextZindex=(0,utils_utils.f4)(ctx)+1;styles.zIndex=nextZindex.toString();var newDrawingData=(0,utils.eM)(relativePoint,styles,currentDrawingTool.id);currDrawObj.current=newDrawingData,ctx.viewContainer.append(newDrawingData.containerDiv),currentDrawingTool.onDrawStart(newDrawingData,ctx)}function drawing(relativePoint){var currentDrawingData=currDrawObj.current;if(currentDrawingData){var ctx=getReactDrawContext();currentDrawingData.coords.push(relativePoint),currentDrawingTool.onDrawing(currentDrawingData,ctx)}}function endDraw(relativePoint){var currentDrawingData=currDrawObj.current;previousMousePos.current=null,currDrawObj.current=null,currentDrawingData&&(currentDrawingData.coords.push(relativePoint),renderedElementsMap.current.set(currentDrawingData.id,currentDrawingData),currentDrawingTool.onDrawEnd(currentDrawingData,getReactDrawContext()),updateBottomToolDisplayMap())}(0,react.useEffect)((function(){var container=drawingAreaRef.current;if(container)return container.addEventListener("mousedown",startDrawMouse),container.addEventListener("mouseup",endDrawMouse),container.addEventListener("mousemove",drawMouse),container.addEventListener("touchstart",startDrawTouch,{passive:!1}),container.addEventListener("touchmove",drawTouch,{passive:!1}),container.addEventListener("touchcancel",endDrawTouch,{passive:!0}),container.addEventListener("touchend",endDrawTouch,{passive:!0}),container.addEventListener("mouseleave",endDrawMouse),window.addEventListener("keydown",alertToolOfKeydown),function(){container.removeEventListener("mousedown",startDrawMouse),container.removeEventListener("mouseup",endDrawMouse),container.removeEventListener("mousemove",drawMouse),container.removeEventListener("touchstart",startDrawTouch),container.removeEventListener("touchmove",drawTouch),container.removeEventListener("touchcancel",endDrawTouch),container.removeEventListener("touchend",endDrawTouch),container.removeEventListener("mouseleave",endDrawMouse),window.removeEventListener("keydown",alertToolOfKeydown);var _step2,ctx=getReactDrawContext(container),_iterator2=_createForOfIteratorHelper(drawingTools);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tool=_step2.value;tool.onUnMount&&tool.onUnMount(ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}};function startDrawMouse(e){latestEvent.current=e;var startPoint=[e.clientX,e.clientY];startDraw((0,utils_utils.rs)(startPoint,container))}function drawMouse(e){latestEvent.current=e;var point=[e.clientX,e.clientY];drawing((0,utils_utils.rs)(point,container))}function endDrawMouse(e){latestEvent.current=e;var point=[e.clientX,e.clientY];endDraw((0,utils_utils.rs)(point,container))}function startDrawTouch(e){latestEvent.current=e,e.preventDefault();var startPoint=(0,utils_utils.Pw)(e);startDraw((0,utils_utils.rs)(startPoint,container))}function drawTouch(e){latestEvent.current=e,e.preventDefault();var point=(0,utils_utils.Pw)(e);drawing((0,utils_utils.rs)(point,container))}function endDrawTouch(e){latestEvent.current=e,e.preventDefault();var startPoint=(0,utils_utils.Pw)(e);endDraw((0,utils_utils.rs)(startPoint,container))}}),[currentDrawingTool]);var responsiveSize=(0,react.useRef)({width:0,height:0});(0,react.useEffect)((function(){var viewContainer=getReactDrawContext().viewContainer;if(viewContainer){responsiveSize.current.width=viewContainer.offsetWidth,responsiveSize.current.height=viewContainer.offsetHeight;var observer=null;return isResponsive&&(observer=new ResizeObserver((function handleResize(){var ctx=getReactDrawContext(),viewContainer=ctx.viewContainer,newWidth=viewContainer.offsetWidth,newHeight=viewContainer.offsetHeight,heightRatio=newHeight/responsiveSize.current.height,widthRatio=newWidth/responsiveSize.current.width;ctx.objectsMap.forEach((function(value){value.containerDiv.style.height=value.containerDiv.offsetHeight*heightRatio+"px",value.containerDiv.style.width=value.containerDiv.offsetWidth*widthRatio+"px";var prevLeft=(0,utils.zZ)(value.containerDiv.style.left),prevTop=(0,utils.zZ)(value.containerDiv.style.top),newLeft=prevLeft*widthRatio,newTop=prevTop*heightRatio;value.containerDiv.style.left=newLeft+"px",value.containerDiv.style.top=newTop+"px",getToolById(ctx.drawingTools,value.toolId).onResize(value,Object.assign({},ctx,{shouldPreserveAspectRatio:shouldCornerResizePreserveRatio,previousPoint:[prevLeft,prevTop],newPoint:[newLeft,newTop]}))})),responsiveSize.current={width:newWidth,height:newHeight}})),observer.observe(viewContainer)),function(){var _observer;null===(_observer=observer)||void 0===_observer||_observer.disconnect()}}}),[]);var handleSelectDrawingTool=function handleSelectDrawingTool(tool){var toolId=tool.id;if(currentDrawingTool.id!==toolId){var selectedTool=getToolById(drawingTools,toolId);if(selectedTool){var currentTool=currentDrawingTool,currentCtx=getReactDrawContext();currentTool.onUnPickTool&&currentTool.onUnPickTool(currentCtx),selectedTool.onPickTool&&selectedTool.onPickTool(currentCtx),setCurrentDrawingTool(selectedTool),updateBottomToolDisplayMap()}}},dispatchActionToolCtx=function dispatchActionToolCtx(cb){cb(getReactDrawContext()),updateBottomToolDisplayMap()},pushStyleUpdateToStack=function pushStyleUpdateToStack(actions,ctx){var filterUndefined=actions.filter(utils_utils.pT);if(0!==filterUndefined.length){var action={data:filterUndefined,objectId:"",toolId:"",toolType:"batch",action:"batch"};(0,pushActionToStack.P)(action,ctx)}};return(0,react.useEffect)((function(){contextGetter&&contextGetter(getReactDrawContext)}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hideTopBar&&(0,jsx_runtime.jsx)(TopToolBar,{tools:topBarTools,onClickActionTool:dispatchActionToolCtx,onSelectDrawingTool:handleSelectDrawingTool,currentTool:currentDrawingTool.id}),(0,jsx_runtime.jsxs)("div",{id:drawingAreaId.current,style:{position:"relative",width:"100%",flex:1,overflow:"hidden",boxSizing:"border-box"},ref:drawingAreaRef,children:[(0,jsx_runtime.jsx)(AlertMessage,{}),children]}),!hideBottomBar&&(0,jsx_runtime.jsx)(BottomToolBar,{displayMap:bottomToolsDisplayMap,tools:bottomBarTools,onSelectDrawingTool:handleSelectDrawingTool,onClickActionTool:dispatchActionToolCtx,stylesMenu:{getEditProps:function handleGetEditProps(){var ctx=getReactDrawContext(),selectedIds=(0,select_utils.sy)(ctx);if(0===selectedIds.length)return globalStyles.current;var styles=function getEditStylesFromSelected(selectedIds,ctx){var _step3,styles={},selectedObjects=selectedIds.map((function(i){return(0,utils_utils.s7)(ctx.objectsMap,i)})),counter={},_iterator3=_createForOfIteratorHelper(selectedObjects);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var object=_step3.value,tool=getToolById(ctx.drawingTools,object.toolId);if(tool.styleHandlers)for(var toolsAllowedStyles=Object.keys(tool.styleHandlers),_i=0,_toolsAllowedStyles=toolsAllowedStyles;_i<_toolsAllowedStyles.length;_i++){var _key=_toolsAllowedStyles[_i],currentObjectValue=object.style[_key];currentObjectValue?(styles[_key]=currentObjectValue,counter[_key]=(counter[_key]||0)+1):console.error("could not get style value for key:",_key,"from object",object)}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}for(var key in counter)counter[key]!==selectedObjects.length&&delete styles[key];return styles}(selectedIds,ctx);return styles},styleComponents,onUpdateStyle:function handleUpdateStyles(key,value){var ctx=getReactDrawContext(),selectedIds=(0,select_utils.sy)(ctx);if(0===selectedIds.length)return globalStyles.current[key]=value,[];var selectObjects=selectedIds.map((function(id){return(0,utils_utils.s7)(ctx.objectsMap,id)})),allActions=selectObjects.map((function(obj){var handlers=getToolById(ctx.drawingTools,obj.toolId).styleHandlers;if(handlers&&handlers[key])return handlers[key](obj,value,ctx)}));return pushStyleUpdateToStack(allActions,ctx),allActions}},children:menuComponents.map((function(MenuItem,i){return(0,jsx_runtime.jsx)(MenuItem,{getContext:getReactDrawContext},i)}))}),(0,jsx_runtime.jsx)("style",{children:"\n\t\t#"+drawingAreaId.current+" {\n\t\t\tcursor: "+(currentDrawingTool.cursor||"default")+";\n\t\t}\n\t  "})]})}function getToolById(tools,id){var tool=tools.find((function(t){return t.id===id}));if(!tool)throw new Error("could not find the used tool");return tool}function unselectEverything(ctx){var currSelected=ctx.fullState[constants.xV].selectedIds;if(currSelected.length>0){var objects=(0,getSelectedDrawingObjects.K)(currSelected,ctx.objectsMap);(0,select_utils.HF)(objects,ctx)}}var defaultEditableProps={lineWidth:"4",zIndex:"1",color:"#000000",fontSize:"14",background:"transparent",opacity:"1"};try{ReactDraw_ReactDraw.displayName="ReactDraw",ReactDraw_ReactDraw.__docgenInfo={description:"",displayName:"ReactDraw",props:{layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"LayoutOption"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},hideTopBar:{defaultValue:null,description:"",name:"hideTopBar",required:!1,type:{name:"boolean"}},actionTools:{defaultValue:{value:"[]"},description:"",name:"actionTools",required:!1,type:{name:"ActionTools[]"}},hideBottomBar:{defaultValue:null,description:"",name:"hideBottomBar",required:!1,type:{name:"boolean"}},shouldKeepHistory:{defaultValue:{value:"true"},description:"",name:"shouldKeepHistory",required:!1,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:{value:"true"},description:"",name:"shouldSelectAfterCreate",required:!1,type:{name:"boolean"}},id:{defaultValue:{value:"main"},description:"",name:"id",required:!1,type:{name:"string"}},styleComponents:{defaultValue:null,description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},menuComponents:{defaultValue:{value:"[]"},description:"",name:"menuComponents",required:!1,type:{name:"MenuComponent[]"}},isResponsive:{defaultValue:{value:"false"},description:"",name:"isResponsive",required:!1,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:{value:"false"},description:"",name:"shouldCornerResizePreserveRatio",required:!1,type:{name:"boolean"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"((ctx: ReactDrawContext) => void)"}},contextGetter:{defaultValue:null,description:"",name:"contextGetter",required:!1,type:{name:"((ctxGetter: () => ReactDrawContext) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/ReactDraw.tsx#ReactDraw"]={docgenInfo:ReactDraw_ReactDraw.__docgenInfo,name:"ReactDraw",path:"src/ReactDraw/ReactDraw.tsx#ReactDraw"})}catch(__react_docgen_typescript_loader_error){}var context=__webpack_require__("./src/Styles/context.tsx"),_excluded=["children","styles","style","classNames"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}const src_ReactDraw=(0,react.forwardRef)((function ReactDrawWrapper(_ref,ref){var children=_ref.children,styles=_ref.styles,style=_ref.style,classNames=_ref.classNames,props=_objectWithoutProperties(_ref,_excluded),_validateProps=function validateProps(children,layout){var numChildren=react.Children.count(children);if(numChildren>1)throw new Error("ReactDraw expects either 0 or 1 children, detected more.");void 0===layout&&(layout="default");return{numChildren,layout}}(children,props.layout),layout=_validateProps.layout;return(0,jsx_runtime.jsx)(context.F,{styles,classNames,children:(0,jsx_runtime.jsx)(AlertMessageProvider,{children:(0,jsx_runtime.jsx)(ReactDraw_Container,{layout,ref,style,children:(0,jsx_runtime.jsx)(ReactDraw_ReactDraw,Object.assign({},props,{children}))})})})}));try{ReactDraw.displayName="ReactDraw",ReactDraw.__docgenInfo={description:"",displayName:"ReactDraw",props:{styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"StylesObject"}},classNames:{defaultValue:null,description:"",name:"classNames",required:!1,type:{name:"ClassNamesObject"}},layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"LayoutOption"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},hideTopBar:{defaultValue:null,description:"",name:"hideTopBar",required:!1,type:{name:"boolean"}},actionTools:{defaultValue:null,description:"",name:"actionTools",required:!0,type:{name:"ActionTools[]"}},hideBottomBar:{defaultValue:null,description:"",name:"hideBottomBar",required:!1,type:{name:"boolean"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!1,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},styleComponents:{defaultValue:null,description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},menuComponents:{defaultValue:null,description:"",name:"menuComponents",required:!1,type:{name:"MenuComponent[]"}},isResponsive:{defaultValue:null,description:"",name:"isResponsive",required:!1,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:null,description:"",name:"shouldCornerResizePreserveRatio",required:!1,type:{name:"boolean"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"((ctx: ReactDrawContext) => void)"}},contextGetter:{defaultValue:null,description:"",name:"contextGetter",required:!1,type:{name:"((ctxGetter: () => ReactDrawContext) => void)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/index.tsx#ReactDraw"]={docgenInfo:ReactDraw.__docgenInfo,name:"ReactDraw",path:"src/ReactDraw/index.tsx#ReactDraw"})}catch(__react_docgen_typescript_loader_error){}},"./src/Styles/context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>StylesContext,F:()=>StylesProvider});var ComponentStyles_namespaceObject={};__webpack_require__.r(ComponentStyles_namespaceObject),__webpack_require__.d(ComponentStyles_namespaceObject,{alertMessageStles:()=>alertMessage,bottomBarContainerStyles:()=>bottomBarContainer,bottomToolButtonStyles:()=>bottomToolButton,clearAllButtonStyles:()=>clearAllButton,menuButtonStyles:()=>menuButton,menuContainerStyles:()=>menuContainer,toolIconWrapperStyles:()=>toolIconWrapper,topBarContainerStyles:()=>topBarContainer});__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js");var react=__webpack_require__("./node_modules/react/index.js");__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function compileClasses(className,styles){for(var defs,cls=className.startsWith(".")?className:"."+className,cssString="",mainClass=cls+" {",_i2=0,_entries2=Object.entries(styles);_i2<_entries2.length;_i2++){var _ref4=_slicedToArray(_entries2[_i2],2),property=_ref4[0],value=_ref4[1];if("string"==typeof value||"number"==typeof value)mainClass+=" "+makeProp(property,value);else if("object"==typeof value&&property.startsWith("@media"))cssString+=makeMediaCss(property,cls,value);else if("object"==typeof value&&property.startsWith("@keyframes"))cssString+=(defs=value,property+" { "+Object.entries(defs).map((function(_ref5){var _ref6=_slicedToArray(_ref5,2),percent=_ref6[0],styles=_ref6[1];return compileClasses(percent,styles).replace(".","")})).join("")+" }");else if("object"==typeof value&&property.trim().startsWith("*"))cssString+=compileClasses(cls+" "+property.replace(/&/g,cls),value);else{if("object"!=typeof value)throw console.error("Unrecognized value:",value),new Error;cssString+=compileClasses(property.replace(/&/g,cls),value)}}return cssString+=mainClass+" }"}function makeMediaCss(mediaQuery,cls,styles){var cssString=mediaQuery+" { ";return(cssString+=compileClasses(cls,styles))+" }"}var unitlessProperties=new Set(["opacity","zIndex","fontWeight","lineHeight","flex"]);function makeProp(prop,value){return"string"==typeof value||unitlessProperties.has(prop)?dashCase(prop)+": "+value+";":dashCase(prop)+": "+value+"px;"}function dashCase(str){return str.replace(/([a-z])([A-Z])/g,(function(s){return s[0]+"-"+s[1].toLowerCase()}))}var _styles,constants=__webpack_require__("./src/constants.ts"),mediaQuery_applyAbove=(__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),function applyAbove(bp){return"@media only screen and (min-width: "+bp+"px)"}),mediaQuery_applyBelow=function applyBelow(bp){return"@media only screen and (max-width: "+bp+"px)"};var styles=((_styles={display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",border:"none",backgroundColor:"transparent",borderRadius:2,transition:"background-color 150ms ease-in-out"})[mediaQuery_applyAbove(constants.rF)]={width:40,height:40},_styles[mediaQuery_applyBelow(constants.rF)]={width:30,height:30},_styles["&:hover"]={backgroundColor:constants.DM.grey.light},_styles['&[data-selected="true"]']={backgroundColor:constants.DM.primary.main+" !important"},_styles['&[data-selected="true"] > svg path']={fill:"white"},_styles);const toolIconWrapper={key:constants.Jh,styles};var clearAllButton_styles={width:180,fontSize:16,display:"flex",justifyContent:"flex-start",alignItems:"center",borderRadius:5,cursor:"pointer",border:"none",padding:"7px 10px",backgroundColor:constants.DM.primary.light,"&:hover":{backgroundColor:constants.DM.primary.main}};const clearAllButton={key:constants.SI,styles:clearAllButton_styles};const alertMessage={key:constants.G7,styles:{position:"absolute",whiteSpace:"nowrap",textAlign:"center",borderRadius:6,padding:"5px 10px",zIndex:1001,color:"white"}};var bottomBarContainer_styles={display:"flex",backgroundColor:constants.DM.primary.light,zIndex:1e3,width:"100%",overflowX:"auto","*":{scrollbarWidth:"none",scrollbarColor:constants.DM.primary.main+" #e2ecf5"},"&::-webkit-scrollbar":{height:10},"&::-webkit-scrollbar-track":{background:"#e2ecf5"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#035195",borderRadius:10,border:"3px none #ffffff"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:" #00294d"}};const bottomBarContainer={key:constants.QE,styles:bottomBarContainer_styles};var bottomToolButton_styles,ReactDraw_bottomToolButton_styles=((bottomToolButton_styles={display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",border:"none",backgroundColor:"transparent",borderRadius:2,transition:"background-color 150ms ease-in-out"})[mediaQuery_applyAbove(constants.rF)]={width:40,height:40},bottomToolButton_styles[mediaQuery_applyBelow(constants.rF)]={width:30,height:30},bottomToolButton_styles['&[data-mode="hide"]']={display:"none"},bottomToolButton_styles['&[data-disabled="true"]']={cursor:"not-allowed",backgroundColor:"white"},bottomToolButton_styles['&[data-disabled="true"] > svg path']={fill:"lightgrey",stroke:"lightgrey"},bottomToolButton_styles['&[data-disabled="false"]:hover']={backgroundColor:constants.DM.grey.light},bottomToolButton_styles['&[data-disabled="false"]']={display:"inline-block"},bottomToolButton_styles);const bottomToolButton={key:constants.o7,styles:ReactDraw_bottomToolButton_styles};var menuButton_styles,ReactDraw_menuButton_styles=((menuButton_styles={position:"relative",display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",border:"none",backgroundColor:"transparent",borderRadius:2,transition:"background-color 150ms ease-in-out"})[mediaQuery_applyAbove(constants.rF)]={width:40,height:40},menuButton_styles[mediaQuery_applyBelow(constants.rF)]={width:30,height:30},menuButton_styles["&:hover"]={backgroundColor:constants.DM.grey.light},menuButton_styles['&[data-open="true"]']={backgroundColor:constants.DM.primary.main+" !important"},menuButton_styles['&[data-open="true"] > svg path']={fill:"white",stroke:"white"},menuButton_styles);const menuButton={key:constants.Cn,styles:ReactDraw_menuButton_styles};var menuContainer_styles,ReactDraw_menuContainer_styles=((menuContainer_styles={position:"absolute",left:0,padding:15,border:"1px solid "+constants.DM.primary.main,zIndex:1e3,backgroundColor:"white",borderRadius:"0px 5px 0px 0px",maxHeight:"calc(100% - 80px)",maxWidth:"100%",overflow:"auto",boxSizing:"border-box"})[mediaQuery_applyAbove(constants.rF)]={bottom:40},menuContainer_styles[mediaQuery_applyBelow(constants.rF)]={bottom:30},menuContainer_styles["*"]={scrollbarWidth:"none",scrollbarColor:constants.DM.primary.main+" #e2ecf5"},menuContainer_styles["&::-webkit-scrollbar"]={width:8},menuContainer_styles["&::-webkit-scrollbar-track"]={background:"#e2ecf5"},menuContainer_styles["&::-webkit-scrollbar-thumb"]={backgroundColor:constants.DM.primary.main,borderRadius:8,border:"3px none #ffffff"},menuContainer_styles);const menuContainer={key:constants.dJ,styles:ReactDraw_menuContainer_styles};var topBarContainer_styles={display:"flex",backgroundColor:constants.DM.primary.light,zIndex:1e3,width:"100%",overflowX:"auto","*":{scrollbarWidth:"none",scrollbarColor:constants.DM.primary.main+" #e2ecf5"},"&::-webkit-scrollbar":{height:10},"&::-webkit-scrollbar-track":{background:"#e2ecf5"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#035195",borderRadius:10,border:"3px none #ffffff"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#00294d"}};const topBarContainer={key:constants.mV,styles:topBarContainer_styles};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),StylesContext=(0,react.createContext)((function(){return""}));function classNamesToMap(classNames){var classNamesMap=new Map;if(!classNames)return classNamesMap;for(var _key2 in classNames){var value=classNames[_key2];void 0!==value&&classNamesMap.set(_key2,value)}return classNamesMap}function deepMergeStyles(reactDrawStyles,userStyles){for(var _key4 in userStyles){var value=userStyles[_key4];void 0!==typeof value&&("string"==typeof value||"number"==typeof value||"object"==typeof value&&void 0===reactDrawStyles[_key4]?reactDrawStyles[_key4]=value:"object"==typeof value&&deepMergeStyles(reactDrawStyles[_key4],value))}}function mergeStyles(reactDrawStyles,userDefinedStyles,classNamesMap){if(!userDefinedStyles)return reactDrawStyles;for(var _key6 in userDefinedStyles)if(void 0!==_key6){var userStyles=userDefinedStyles[_key6];void 0!==userStyles&&(void 0===reactDrawStyles[_key6]?(reactDrawStyles[_key6]=userStyles,classNamesMap.set(_key6,_key6)):deepMergeStyles(reactDrawStyles[_key6],userStyles))}return reactDrawStyles}function makeStylesMap(classNamesMap){return Object.values(ComponentStyles_namespaceObject).reduce((function(acc,curr){if(acc[curr.key])throw new Error("duplicate key while creating css styles");acc[curr.key]=curr.styles;var currClassNames=classNamesMap.get(curr.key);return void 0!==currClassNames&&classNamesMap.set(curr.key,currClassNames+" "+curr.key),classNamesMap.set(curr.key,curr.key),acc}),{})}function StylesProvider(_ref){var children=_ref.children,styles=_ref.styles,classNames=_ref.classNames,classNamesMap=(0,react.useRef)(classNamesToMap(classNames)),stylesMap=(0,react.useRef)(mergeStyles(makeStylesMap(classNamesMap.current),styles,classNamesMap.current)),styleRef=(0,react.useRef)(null);(0,react.useEffect)((function(){var styleTag=styleRef.current;styleTag&&(classNamesMap.current=classNamesToMap(classNames),stylesMap.current=mergeStyles(makeStylesMap(classNamesMap.current),styles,classNamesMap.current),styleTag.innerHTML=function cssFromState(state){for(var finalCss="",_i=0,_entries=Object.entries(state);_i<_entries.length;_i++){var _ref2=_slicedToArray(_entries[_i],2);finalCss+=compileClasses(_ref2[0],_ref2[1])}return finalCss}(stylesMap.current))}),[styles]);return(0,jsx_runtime.jsxs)(StylesContext.Provider,{value:function getClasses(key){var classes=classNamesMap.current.get(key);if(void 0===classes)throw new Error("Could not find key in classNames map");return classes},children:[(0,jsx_runtime.jsx)("style",{id:"react-draw-styles",ref:styleRef}),children]})}StylesProvider.displayName="StylesProvider";try{StylesProvider.displayName="StylesProvider",StylesProvider.__docgenInfo={description:"",displayName:"StylesProvider",props:{styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"StylesObject"}},classNames:{defaultValue:null,description:"",name:"classNames",required:!1,type:{name:"ClassNamesObject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Styles/context.tsx#StylesProvider"]={docgenInfo:StylesProvider.__docgenInfo,name:"StylesProvider",path:"src/Styles/context.tsx#StylesProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/Styles/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>useStyles});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Styles/context.tsx");function useStyles(key){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__.N)(key)}},"./src/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cn:()=>MENU_BUTTON_CLASSES,DM:()=>COLORS,G7:()=>ALERT_MESSAGE_DIALOG_CLASSES,Jh:()=>TOOL_ICON_WRAPPER_CLASSES,K1:()=>ARROW_TOOL_ID,Oi:()=>STRAIGHT_LINE_TOOL_ID,QE:()=>BOTTOM_BAR_CONTAINER_CLASSES,QP:()=>CUSTOM_DATA_ORIENT_KEY,SI:()=>CLEAR_ALL_BUTTON_CLASSES,U8:()=>DIAMOND_TOOL_ID,UH:()=>TEXT_AREA_TOOL_ID,V5:()=>ERASE_TOOL_ID,Y8:()=>CUSTOM_DATA_ORIGINAL_BOUNDS,aV:()=>CIRCLE_TOOL_ID,dJ:()=>MENU_CONTAINER_CLASSES,eO:()=>SQUARE_TOOL_ID,mV:()=>TOP_BAR_CONTAINER_CLASSES,o7:()=>BOTTOM_TOOL_BUTTON_CLASSES,rF:()=>BPmd,xV:()=>SELECT_TOOL_ID,zs:()=>SELECT_TOOL_DRAG_MIN_DISTANCE});var SQUARE_TOOL_ID="react-draw-square-tool",CIRCLE_TOOL_ID="react-draw-circle-tool",DIAMOND_TOOL_ID="react-draw-diamond-tool",STRAIGHT_LINE_TOOL_ID="react-draw-line-tool",ARROW_TOOL_ID="react-draw-arrow-tool",ERASE_TOOL_ID="react-draw-erase-tool",SELECT_TOOL_ID="react-draw-cursor",TEXT_AREA_TOOL_ID="react-draw-textarea-tool",BOTTOM_BAR_CONTAINER_CLASSES="bottomBarContainer",TOOL_ICON_WRAPPER_CLASSES="toolIconWrapper",CLEAR_ALL_BUTTON_CLASSES="clearAllButton",ALERT_MESSAGE_DIALOG_CLASSES="alertMessageDialog",BOTTOM_TOOL_BUTTON_CLASSES="bottomToolButton",MENU_BUTTON_CLASSES="menuButton",MENU_CONTAINER_CLASSES="menuContainer",TOP_BAR_CONTAINER_CLASSES="topBarBontainer",CUSTOM_DATA_ORIGINAL_BOUNDS="originalBounds",CUSTOM_DATA_ORIENT_KEY="orientation",BPmd=450,SELECT_TOOL_DRAG_MIN_DISTANCE=75,COLORS={primary:{light:"#bddefb",main:"#228be6"},grey:{light:"#ececec"}}},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{YI:()=>Background,DM:()=>constants.DM,vq:()=>MenuComponents_ClearAllButton,HQ:()=>Color,Ty:()=>FontSizePicker_LineWidthPicker,F:()=>LineWidthPicker,H9:()=>OpacityPicker_LineWidthPicker,IR:()=>ReactDraw.Z,rW:()=>utils_utils.rW,H7:()=>ArrowTool,E:()=>BringBackTool,fI:()=>BringForwardTool,s0:()=>bringSelectedBack,dv:()=>utils_utils.dv,u8:()=>CircleTool,y:()=>publicUtils_createCircle,Bi:()=>createImage,tA:()=>utils_utils.tA,rw:()=>createText,XC:()=>SelectTool_deletedSelected,OK:()=>deserializeArrow,dV:()=>deserializeCircle,OV:()=>deserializeData,pe:()=>deserializeDiamond,ud:()=>deserializeFreeDraw,N9:()=>deserializeLine,Q2:()=>deserializeSquare,xu:()=>deserializeTextArea,Bp:()=>DiamondTool,qu:()=>duplicateSelectedObjects,$k:()=>DuplicateTool,Yv:()=>EraseTool,Lk:()=>FreeDrawTool,cm:()=>getSelectedObjects,gZ:()=>utils_utils.gZ,cn:()=>moveSelectedForward,sx:()=>RedoTool,td:()=>selectAll,VS:()=>SelectTool,M2:()=>serializeArrow,jV:()=>serializeCircle,YD:()=>serializeDiamond,vX:()=>serializeFreeDraw,Z7:()=>serializeLine,xF:()=>serializeObjects,UP:()=>serializeSquare,Xi:()=>serializeText,uY:()=>SquareTool,$Q:()=>StraightLineTool,E3:()=>TextAreaTool,Kb:()=>TrashTool,$9:()=>UndoTool,yK:()=>hooks.y});var ReactDraw=__webpack_require__("./src/ReactDraw/index.tsx"),PencilBoldIcon=(__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PencilBoldIcon.js")),react=__webpack_require__("./node_modules/react/index.js"),constants=__webpack_require__("./src/constants.ts"),utils=__webpack_require__("./src/utils/index.ts");__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");function createPathSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createLineSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","line");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createSvg(w,h,opacity){if(!(0,utils.jU)())throw new Error("createSVG called on server");var newSVG=document.createElementNS("http://www.w3.org/2000/svg","svg");return newSVG.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),newSVG.setAttribute("viewbox","0 0 "+w+" "+h),newSVG.style.overflow="visible",newSVG.style.position="absolute",newSVG.style.top="0",newSVG.style.left="0",newSVG.style.opacity=opacity,newSVG.style.width="100%",newSVG.style.height="100%",newSVG}function createCircle(radius,color){if(!(0,utils.jU)())throw new Error("createPath called on server");var ele=document.createElementNS("http://www.w3.org/2000/svg","circle");return ele.setAttribute("fill","black"),ele.setAttribute("cx",""+Math.ceil(radius/2)),ele.setAttribute("cy",""+Math.ceil(radius/2)),ele.setAttribute("r",""+radius),ele}__webpack_require__("./node_modules/core-js/modules/es.map.js");var pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts"),updateStyles_utils=(__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./src/utils/updateStyles/utils.ts")),colorRegex=/^(#([0-9A-F]{3}){1,2}|transparent)$/i;function updateSvgStyle(data,dataKey,svgKey,value){if(value.match(colorRegex)){var path=(0,updateStyles_utils.Ep)(data),currColor=data.style[dataKey];return path.style[svgKey]=value,data.style[dataKey]=value,(0,updateStyles_utils.wp)(data,dataKey,currColor)}}function updateSvgPathStroke(data,value){return updateSvgStyle(data,"color","stroke",value)}function updateEleBackgroundColor(data,value){var _updateEleStyle=updateEleStyle(data,value,"background"),ele=_updateEleStyle.ele,action=_updateEleStyle.action;return action?(ele.style.backgroundColor=value,action):action}function updateEleStyle(data,value,key){var ele=data.element;if(!ele)throw new Error;if(!value.match(colorRegex))return{ele,action:void 0};var currColor=data.style[key];return data.style[key]=value,{ele,action:(0,updateStyles_utils.wp)(data,key,currColor)}}function updateEleBorderColor(data,value){var _updateEleStyle2=updateEleStyle(data,value,"color"),ele=_updateEleStyle2.ele,action=_updateEleStyle2.action;return action?(ele.style.border=borderFromStyles(data.style),action):action}function borderFromStyles(styles){return styles.lineWidth+"px solid "+styles.color}function updateTextStyle(data,dataKey,divKey,value){if(value.match(colorRegex)){var currColor=data.style[dataKey];return data.style[dataKey]=value,data.containerDiv.style[divKey]=value,(0,updateStyles_utils.wp)(data,dataKey,currColor)}}var utils_utils=__webpack_require__("./src/utils/utils.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=undo_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function undo_slicedToArray(arr,i){return function undo_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function undo_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||undo_unsupportedIterableToArray(arr,i)||function undo_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function undo_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?undo_arrayLikeToArray(o,minLen):void 0}}function undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saveCreateToUndoStack(data,ctx){if(ctx.shouldKeepHistory){var newAction={toolId:data.toolId,toolType:"top-bar-tool",objectId:data.id,action:"create",data:null};(0,pushActionToStack.P)(newAction,ctx)}}function undoCreate(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId);return(0,utils_utils.$Q)(action.objectId,ctx),action.data=object,action.action="delete",action}function redoDelete(action,ctx){var object=action.data;if(!object)throw new Error("redo delete but no data exists");return ctx.objectsMap.set(object.id,object),ctx.viewContainer.appendChild(object.containerDiv),action.data=null,action.action="create",action}function recreateDeletedObjects(action,ctx){var data=action.data;if(!data||"object"!=typeof data)throw new Error("malformed data");var _step,_iterator=_createForOfIteratorHelper(data.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=undo_slicedToArray(_step.value,2),objectId=_ref2[0],object=_ref2[1];ctx.viewContainer.appendChild(object.containerDiv),ctx.objectsMap.set(objectId,object)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.action="create",action.data=Array.from(data.keys()),action}function deleteCreatedObjects(action,ctx){var data=action.data;if(!data||!Array.isArray(data))throw console.error(action),new Error("malformed data");action.data=new Map;var _step2,_iterator2=_createForOfIteratorHelper(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var objectId=_step2.value;action.data.set(objectId,(0,utils_utils.s7)(ctx.objectsMap,objectId)),(0,utils_utils.$Q)(objectId,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.action="delete",action}function undoEleOpacity(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),curr=object.style.opacity,styleToSave=action.data,ele=object.element;if(!styleToSave||!ele)throw new Error;return object.style.opacity=styleToSave,ele.style.opacity=object.style.opacity,action.data=curr,action}function undoEleLineWidth(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),curr=object.style.lineWidth,styleToSave=action.data,ele=object.element;if(!styleToSave||!ele)throw new Error;return object.style.lineWidth=styleToSave,ele.style.border=borderFromStyles(object.style),action.data=curr,action}function undoEleBackgroundColor(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),currColor=object.style.background,colorTo=action.data,ele=object.element;if(!colorTo||!ele)throw new Error;return object.style.background=colorTo,ele.style.backgroundColor=colorTo,action.data=currColor,action}function undoEleBorderColor(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),currColor=object.style.color,colorTo=action.data,ele=object.element;if(!colorTo||!ele)throw new Error;return object.style.color=colorTo,ele.style.border=borderFromStyles(object.style),action.data=currColor,action}function undoSvgPathColor(action,ctx){return undoSvgStyle(action,ctx,"color","stroke")}function undoSvgPathFill(action,ctx){return undoSvgStyle(action,ctx,"background","fill")}function undoSvgStyle(action,ctx,dataKey,svgKey){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),currColor=object.style[dataKey],colorTo=action.data,svg=object.element;if(!svg)throw new Error;var path=svg.querySelector("path");if(path||(path=svg.querySelector("line")),!path)throw new Error;return object.style[dataKey]=colorTo,path.style[svgKey]=colorTo,action.data=currColor,action}function undoSvgPathWidth(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),currStyle=object.style.lineWidth,styleTo=action.data,path=(0,updateStyles_utils.Ep)(object);return object.style.lineWidth=styleTo,path.style.strokeWidth=styleTo+"px",action.data=currStyle,action}__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js");var lineWidthRegex=/^[0-9]+$/g;function updateEleLineWidth(data,value){var ele=data.element;if(!ele)throw new Error;if(value.match(lineWidthRegex)){var curr=data.style.lineWidth;return data.style.lineWidth=value,ele.style.border=borderFromStyles(data.style),(0,updateStyles_utils.wp)(data,"lineWidth",curr)}}function updateSvgPathWidth(data,value){var valuePx=value.includes("px")?value:value+"px",path=(0,updateStyles_utils.Ep)(data),currColor=data.style.lineWidth;return path.style.strokeWidth=valuePx,data.style.lineWidth=value,(0,updateStyles_utils.wp)(data,"lineWidth",currColor)}var opacityRegex=/^(0(\.\d+)?|1(\.0+)?)$/;function updateEleOpacity(data,value){if(value.match(opacityRegex)){var ele=data.element;if(!ele)throw new Error;var curr=data.style.opacity;return data.style.opacity=value,ele.style.opacity=value,(0,updateStyles_utils.wp)(data,"opacity",curr)}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function FreeDrawTool_slicedToArray(arr,i){return function FreeDrawTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FreeDrawTool_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function FreeDrawTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FreeDrawTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FreeDrawTool_arrayLikeToArray(o,minLen)}(arr,i)||function FreeDrawTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FreeDrawTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const FreeDrawTool={id:"free-draw-tool",tooltip:"Free draw tool",icon:(0,jsx_runtime.jsx)(PencilBoldIcon.Z,{}),onDrawStart:function onDrawStart(data){var lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity);newSvg.style.overflow="visible";var newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),data.containerDiv.appendChild(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,ctx){!function smoothCoords(coords){var cLen=coords.length;if(cLen<3)return;var first=coords[cLen-3],last=coords[cLen-1];(0,utils.TE)(first,last)<10&&coords.splice(cLen-2,1);(0,utils.TE)(first,last)<20&&(coords[cLen-2]=function average(a,b){var _a=FreeDrawTool_slicedToArray(a,2),ax=_a[0],ay=_a[1],_b=FreeDrawTool_slicedToArray(b,2),bx=_b[0],by=_b[1];return[Math.min(ax,bx)+Math.abs(ax-bx)/2,Math.min(ay,by)+Math.abs(ay-by)/2]}(first,last))}(data.coords),(0,utils.Fb)(data);var boxSize=(0,utils.RZ)(data),newSvg=createSvg(boxSize.width,boxSize.height,data.style.opacity);newSvg.style.overflow="visible";var path=svgPathFromData(data,ctx.viewContainer);newSvg.appendChild(path),data.containerDiv.innerHTML="",data.containerDiv.appendChild(newSvg),data.element=newSvg},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),function saveOriginalBoundsToData(data){data.customData.set(constants.Y8,(0,utils.RZ)(data))}(data),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){data.element&&(0,utils.bH)(data.element,(0,utils.RZ)(data))},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateSvgPathStroke(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateSvgPathWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}},cursor:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjU4NTggMC41ODU3ODZDMTEuMzY2OCAtMC4xOTUyNjIgMTIuNjMzMiAtMC4xOTUyNjIgMTMuNDE0MiAwLjU4NTc4NkMxNC4xOTUzIDEuMzY2ODMgMTQuMTk1MyAyLjYzMzE2IDEzLjQxNDIgMy40MTQyMUwxMi42MjEzIDQuMjA3MTFMOS43OTI4OSAxLjM3ODY4TDEwLjU4NTggMC41ODU3ODZaIiBmaWxsPSIjMTExODI3Ii8+CjxwYXRoIGQ9Ik04LjM3ODY4IDIuNzkyODlMMCAxMS4xNzE2VjE0SDIuODI4NDJMMTEuMjA3MSA1LjYyMTMyTDguMzc4NjggMi43OTI4OVoiIGZpbGw9IiMxMTE4MjciLz4KPC9zdmc+) 0 16, pointer"};function svgPathFromData(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.setAttribute("d",function getPathDString(data,viewContainer){for(var pathString="",i=0;i<data.coords.length;i++){var point=data.coords[i];pathString+=getPathPoint((0,utils.ti)(point,data.containerDiv,viewContainer),i),i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath}function getPathPoint(curr,index){return 0===index?"M "+curr[0]+" "+curr[1]:"L "+curr[0]+" "+curr[1]}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/FreeDrawTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/FreeDrawTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js");var CursorClickIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CursorClickIcon.js"),select_utils=__webpack_require__("./src/utils/select/utils.ts"),getSelectedDrawingObjects=__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts"),unselectElement=__webpack_require__("./src/utils/select/unselectElement.ts"),alertAfterUpdate=(__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./src/utils/alertAfterUpdate.ts")),getRotateFromDiv=__webpack_require__("./src/utils/select/getRotateFromDiv.ts");function undo_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function SelectTool_undo_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SelectTool_undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectTool_undo_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectTool_undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function handleDragUndo(action,ctx){var _step,redoData=[],_iterator=undo_createForOfIteratorHelper(action.data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,object=(0,utils_utils.s7)(ctx.objectsMap,obj.objectId),div=object.containerDiv,bounds=(0,utils.RZ)(object),left=obj.left,top=obj.top;redoData.push({objectId:obj.objectId,top:bounds.top,left:bounds.left}),div.style.left=left+"px",div.style.top=top+"px",(0,alertAfterUpdate.x)(object,ctx)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.data=redoData,action}function handleRotateUndo(action,ctx){var _step2,redoData=[],_iterator2=undo_createForOfIteratorHelper(action.data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value,object=(0,utils_utils.s7)(ctx.objectsMap,obj.objectId),div=object.containerDiv,currRotate=(0,getRotateFromDiv.O)(div);redoData.push({objectId:obj.objectId,rotate:currRotate}),div.style.transform="rotate("+obj.rotate+"deg)",(0,alertAfterUpdate.x)(object,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.data=redoData,action}function handelResizeUndo(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),undoData=action.data,currBounds=(0,utils.RZ)(object),redoBounds=Object.assign({},currBounds);return setDivToBounds(object.containerDiv,undoData.bounds),(0,utils_utils.uL)(ctx.drawingTools,object.toolId).onResize(object,Object.assign({},ctx,{previousPoint:[currBounds.left,currBounds.top],newPoint:[undoData.bounds.left,undoData.bounds.top],shouldPreserveAspectRatio:ctx.shouldCornerResizePreserveRatio})),action.data.bounds=redoBounds,action}function setDivToBounds(div,bounds){div.style.left=bounds.left+"px",div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px"}var resizeObject=__webpack_require__("./src/utils/resizeObject.ts");function _construct(Parent,args,Class){return _construct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function SelectTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=SelectTool_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectTool_slicedToArray(arr,i){return function SelectTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SelectTool_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||SelectTool_unsupportedIterableToArray(arr,i)||function SelectTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return SelectTool_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||SelectTool_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SelectTool_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return SelectTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SelectTool_arrayLikeToArray(o,minLen):void 0}}function SelectTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function alertSelected(tool,ctx){var _ref2,_tool$localState2,fns=null!==(_ref2=null===(_tool$localState2=tool.localState)||void 0===_tool$localState2?void 0:_tool$localState2.subs)&&void 0!==_ref2?_ref2:[];(0,select_utils.sy)(ctx).length>0?fns.forEach((function(fn){return fn("selected")})):fns.forEach((function(fn){return fn("none-selected")}))}var selectTool={tooltip:"Select tool",icon:(0,jsx_runtime.jsx)(CursorClickIcon.Z,{style:{transform:"translate(-2px, -1px)"}}),id:constants.xV,onDrawStart:function onDrawStart(data){data.containerDiv.style.border="1px solid "+constants.DM.primary.main,data.containerDiv.style.backgroundColor=constants.DM.primary.light+"4d"},onDrawing:function onDrawing(data,ctx){(0,utils.X5)(data),data.coords.splice(1),function handleTrySelectObjects(currData,ctx){var _ctx$lastEvent$shiftK2,_ctx$lastEvent2,didPressShift=null!==(_ctx$lastEvent$shiftK2=null===(_ctx$lastEvent2=ctx.lastEvent)||void 0===_ctx$lastEvent2?void 0:_ctx$lastEvent2.shiftKey)&&void 0!==_ctx$lastEvent$shiftK2&&_ctx$lastEvent$shiftK2,selected=ctx.fullState[constants.xV].selectedIds,selectedIds=_toConsumableArray(selected),elementIdsToSelect=function getElementIdsInsideOfBounds(renderedMap,bounds,ctx){var _step2,elementIdsToSelect=[],_iterator2=SelectTool_createForOfIteratorHelper(renderedMap.entries());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ref7=SelectTool_slicedToArray(_step2.value,2),eleId=_ref7[0],eleData=_ref7[1];(0,unselectElement.e)(eleData,ctx),(0,utils.Je)(bounds,(0,utils.RZ)(eleData))&&elementIdsToSelect.push(eleId)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return elementIdsToSelect}(ctx.objectsMap,(0,utils.RZ)(currData),ctx);didPressShift&&(elementIdsToSelect=_construct(Array,_toConsumableArray(new Set([].concat(_toConsumableArray(elementIdsToSelect),_toConsumableArray(selectedIds))))));handleSelectIds(ctx,elementIdsToSelect)}(data,ctx),alertSelected(selectTool,ctx)},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;ctx.viewContainer.removeChild(data.containerDiv),objectsMap.delete(data.id),(0,utils_utils.ge)('[id^="react-draw-cursor"',ctx.viewContainer),tryClickObject(data,ctx),alertSelected(selectTool,ctx)},onResize:function onResize(data){},onUnMount:function onUnMount(ctx){for(var _selectTool$localStat,_i=0,_Object$values=Object.values(ctx.objectsMap);_i<_Object$values.length;_i++){var object=_Object$values[_i];(0,unselectElement.e)(object,ctx)}null!==(_selectTool$localStat=selectTool.localState)&&void 0!==_selectTool$localStat&&_selectTool$localStat.subs&&(selectTool.localState.subs=[])},onUnPickTool:function onUnPickTool(ctx){var state=ctx.fullState[constants.xV],selectedIds=state.selectedIds;if(0!==selectedIds.length){var objects=(0,getSelectedDrawingObjects.K)(selectedIds,ctx.objectsMap);(0,select_utils.HF)(objects,ctx),state.selectedIds=[],alertSelected(selectTool,ctx)}},onKeyPress:function onKeyPress(event,ctx){"Delete"===event.key&&(SelectTool_deletedSelected(ctx),alertSelected(selectTool,ctx))},undoHandlers:{delete:recreateDeletedObjects,create:deleteCreatedObjects,drag:handleDragUndo,rotate:handleRotateUndo,resize:handelResizeUndo},redoHandlers:{delete:recreateDeletedObjects,create:deleteCreatedObjects,drag:handleDragUndo,rotate:handleRotateUndo,resize:handelResizeUndo},subscribe:function subscribe(callback){var _selectTool$localStat2;selectTool.localState||(selectTool.localState={}),null!==(_selectTool$localStat2=selectTool.localState)&&void 0!==_selectTool$localStat2&&_selectTool$localStat2.subs||(selectTool.localState.subs=[]),selectTool.localState.subs.push(callback)}};const SelectTool=selectTool;function SelectTool_deletedSelected(ctx){var selectedIds=ctx.fullState[constants.xV].selectedIds;if(!(selectedIds.length<1)){var action=(0,utils_utils.ee)(ctx);action.toolId=constants.xV,action.data=_toConsumableArray(selectedIds);var resultAction=deleteCreatedObjects(action,ctx);ctx.shouldKeepHistory&&(0,pushActionToStack.P)(resultAction,ctx)}}var tryClickObject=function tryClickObject(drawingData,ctx){var _ctx$lastEvent$shiftK,_ctx$lastEvent,didPressShift=null!==(_ctx$lastEvent$shiftK=null===(_ctx$lastEvent=ctx.lastEvent)||void 0===_ctx$lastEvent?void 0:_ctx$lastEvent.shiftKey)&&void 0!==_ctx$lastEvent$shiftK&&_ctx$lastEvent$shiftK,firstPoint=drawingData.coords[0],lastPoint=drawingData.coords[drawingData.coords.length-1];(0,utils.TE)(lastPoint,firstPoint)<constants.zs&&function maybeClickObject(ctx,pointA,pointB,didPressShift){var clickedEle=function getElementsThatSatisfyPoints(renderedMap,pointA,pointB){var _step,itemToSelect=null,_iterator=SelectTool_createForOfIteratorHelper(renderedMap.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref4=SelectTool_slicedToArray(_step.value,2),eleData=(_ref4[0],_ref4[1]),zIndex=parseInt(eleData.style.zIndex);if(areAnyPointsWithin({bounds:(0,utils.RZ)(eleData),rotation:(0,getRotateFromDiv.O)(eleData.containerDiv)},pointA,pointB)){if(null===itemToSelect){itemToSelect=eleData;continue}zIndex>parseInt(itemToSelect.style.zIndex)&&(itemToSelect=eleData)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return itemToSelect}(ctx.objectsMap,pointA,pointB),_unselectEverythingAn=(0,select_utils.dt)(ctx),ids=_unselectEverythingAn.ids;didPressShift||(ids=[]);null!==clickedEle&&(ids=ids.concat([clickedEle.id]));return handleSelectIds(ctx,ids),ids}(ctx,firstPoint,lastPoint,didPressShift)};function areAnyPointsWithin(_ref5){for(var bounds=_ref5.bounds,rotation=_ref5.rotation,_len=arguments.length,points=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)points[_key-1]=arguments[_key];for(var _i2=0,_points=points;_i2<_points.length;_i2++){var point=_points[_i2],centerOfBounds=(0,utils_utils.Lb)(bounds),_getPointRelativeToOt2=SelectTool_slicedToArray((0,resizeObject.QN)(point,centerOfBounds),2),relativeX=_getPointRelativeToOt2[0],relativeY=_getPointRelativeToOt2[1],rotatedPoint=(0,resizeObject.pe)(relativeX,relativeY,-rotation);if((0,utils.Ni)(bounds,rotatedPoint))return!0}return!1}function handleSelectIds(ctx,objectIds){ctx.fullState[constants.xV].selectedIds=objectIds;var objects=(0,getSelectedDrawingObjects.K)(objectIds,ctx.objectsMap);return 1===objects.length?((0,select_utils.DB)(ctx.drawingTools,objects[0],ctx),(0,select_utils.G7)(objects[0],ctx)):objects.length>1?(0,select_utils.os)(objects,ctx):void 0}try{SelectTool_deletedSelected.displayName="deletedSelected",SelectTool_deletedSelected.__docgenInfo={description:"",displayName:"deletedSelected",props:{viewContainer:{defaultValue:null,description:"",name:"viewContainer",required:!0,type:{name:"HTMLDivElement"}},objectsMap:{defaultValue:null,description:"",name:"objectsMap",required:!0,type:{name:"DrawingDataMap"}},lastEvent:{defaultValue:null,description:"",name:"lastEvent",required:!0,type:{name:"CapturedEvent"}},prevMousePosition:{defaultValue:null,description:"",name:"prevMousePosition",required:!0,type:{name:"MutableRefObject<Point | null>"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},fullState:{defaultValue:null,description:"",name:"fullState",required:!0,type:{name:"CustomState"}},undoStack:{defaultValue:null,description:"",name:"undoStack",required:!0,type:{name:"ActionObject[]"}},redoStack:{defaultValue:null,description:"",name:"redoStack",required:!0,type:{name:"ActionObject[]"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!0,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!0,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:null,description:"",name:"shouldCornerResizePreserveRatio",required:!0,type:{name:"boolean"}},globalStyles:{defaultValue:null,description:"",name:"globalStyles",required:!0,type:{name:"ToolPropertiesMap"}},selectDrawingTool:{defaultValue:null,description:"",name:"selectDrawingTool",required:!0,type:{name:"(tool: DrawingTools) => void"}},selectObject:{defaultValue:null,description:"",name:"selectObject",required:!0,type:{name:"(object: DrawingData) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/SelectTool/index.tsx#deletedSelected"]={docgenInfo:SelectTool_deletedSelected.__docgenInfo,name:"deletedSelected",path:"src/TopBarTools/SelectTool/index.tsx#deletedSelected"})}catch(__react_docgen_typescript_loader_error){}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/SelectTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/SelectTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var SquareBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/SquareBoldIcon.js");const SquareTool={id:constants.eO,tooltip:"Square Tool",icon:(0,jsx_runtime.jsx)(SquareBoldIcon.Z,{}),onDrawStart:function onDrawStart(data){var newSquare=makeSquareDiv(data.style);data.containerDiv.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){(0,utils.X5)(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},onResize:function onResize(data,ctx){},styleHandlers:{color:updateEleBorderColor,background:updateEleBackgroundColor,lineWidth:updateEleLineWidth,opacity:updateEleOpacity}};function makeSquareDiv(style){var div=document.createElement("div");return div.style.width="100%",div.style.height="100%",div.style.border=style.lineWidth+"px solid "+style.color,div.style.borderRadius="2px",div.style.boxSizing="border-box",div.style.backgroundColor=style.background,div.style.opacity=style.opacity,div}try{makeSquareDiv.displayName="makeSquareDiv",makeSquareDiv.__docgenInfo={description:"",displayName:"makeSquareDiv",props:{lineWidth:{defaultValue:null,description:"",name:"lineWidth",required:!0,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!0,type:{name:"string"}},background:{defaultValue:null,description:"",name:"background",required:!0,type:{name:"string"}},opacity:{defaultValue:null,description:"",name:"opacity",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/SquareTool/index.tsx#makeSquareDiv"]={docgenInfo:makeSquareDiv.__docgenInfo,name:"makeSquareDiv",path:"src/TopBarTools/SquareTool/index.tsx#makeSquareDiv"})}catch(__react_docgen_typescript_loader_error){}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/SquareTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/SquareTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var CircleBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CircleBoldIcon.js");const CircleTool={id:constants.aV,tooltip:"Circle tool",icon:(0,jsx_runtime.jsx)(CircleBoldIcon.Z,{}),onDrawStart:function onDrawStart(data){var newCircle=makeCircleDiv(data.style);data.containerDiv.appendChild(newCircle),data.element=newCircle},onDrawing:function onDrawing(data){(0,utils.X5)(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},redoHandlers:{delete:redoDelete,create:undoCreate,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateEleBorderColor(data,value)},background:function background(data,value,_ctx){return updateEleBackgroundColor(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateEleLineWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}}};function makeCircleDiv(styles){var newDiv=document.createElement("div");return newDiv.style.width="100%",newDiv.style.height="100%",newDiv.style.border=borderFromStyles(styles),newDiv.style.backgroundColor=styles.background,newDiv.style.borderRadius="50%",newDiv.style.boxSizing="border-box",newDiv.style.opacity=styles.opacity,newDiv}try{makeCircleDiv.displayName="makeCircleDiv",makeCircleDiv.__docgenInfo={description:"",displayName:"makeCircleDiv",props:{lineWidth:{defaultValue:null,description:"",name:"lineWidth",required:!0,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!0,type:{name:"string"}},background:{defaultValue:null,description:"",name:"background",required:!0,type:{name:"string"}},opacity:{defaultValue:null,description:"",name:"opacity",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/CircleTool/index.tsx#makeCircleDiv"]={docgenInfo:makeCircleDiv.__docgenInfo,name:"makeCircleDiv",path:"src/TopBarTools/CircleTool/index.tsx#makeCircleDiv"})}catch(__react_docgen_typescript_loader_error){}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/CircleTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/CircleTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var DiamondBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DiamondBoldIcon.js");const DiamondTool={id:constants.U8,tooltip:"Diamond tool",icon:(0,jsx_runtime.jsx)(DiamondBoldIcon.Z,{}),onDrawStart:function onDrawStart(data){var div=data.containerDiv,newSvg=makeDiamondSvg(data);div.appendChild(newSvg)},onDrawing:function onDrawing(data){(0,utils.X5)(data);var div=data.containerDiv,newSvg=makeDiamondSvg(data);div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),data.customData.set(constants.Y8,(0,utils.RZ)(data)),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){(0,utils.bH)(data.element,(0,utils.RZ)(data))},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,background:undoSvgPathFill,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,background:undoSvgPathFill,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:updateSvgPathStroke,background:function updateSvgPathFill(data,value){return updateSvgStyle(data,"background","fill",value)},lineWidth:updateSvgPathWidth,opacity:updateEleOpacity}};function makeDiamondSvg(data){var lineWidth=parseInt(data.style.lineWidth),bounds=(0,utils.RZ)(data),newSvg=createSvg(bounds.width+lineWidth,bounds.height+lineWidth,data.style.opacity),path=function drawDiamondInBounds(bounds,style){var newPath=createPathSvg(style);newPath.setAttribute("fill",style.background);var lineWidth=parseInt(style.lineWidth);return newPath.setAttribute("d",function getPathDiamondString(bounds,lineWidth){var height=bounds.bottom-bounds.top,width=bounds.right-bounds.left,leftCorner=lineWidth/2+" "+height/2,topCorner="L "+width/2+" "+lineWidth/2,rightCorner="L "+(width-lineWidth/2)+" "+height/2,bottomCorner="L "+width/2+" "+(height-lineWidth/2);return"M "+leftCorner+" "+topCorner+" "+rightCorner+" "+bottomCorner+" L "+leftCorner}(bounds,lineWidth)),newPath}(bounds,data.style);return newSvg.appendChild(path),newSvg}try{makeDiamondSvg.displayName="makeDiamondSvg",makeDiamondSvg.__docgenInfo={description:"",displayName:"makeDiamondSvg",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},containerDiv:{defaultValue:null,description:"",name:"containerDiv",required:!0,type:{name:"HTMLDivElement"}},coords:{defaultValue:null,description:"",name:"coords",required:!0,type:{name:"Point[]"}},element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"HTMLElement | SVGSVGElement | null"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ToolPropertiesMap"}},toolId:{defaultValue:null,description:"",name:"toolId",required:!0,type:{name:"string"}},customData:{defaultValue:null,description:"",name:"customData",required:!0,type:{name:"Map<string, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/DiamondTool/index.tsx#makeDiamondSvg"]={docgenInfo:makeDiamondSvg.__docgenInfo,name:"makeDiamondSvg",path:"src/TopBarTools/DiamondTool/index.tsx#makeDiamondSvg"})}catch(__react_docgen_typescript_loader_error){}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/DiamondTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/DiamondTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var HorizontalLineIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/HorizontalLineIcon.js");function lines_slicedToArray(arr,i){return function lines_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function lines_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function lines_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return lines_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lines_arrayLikeToArray(o,minLen)}(arr,i)||function lines_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lines_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function calcOrientation(pointA,pointB){var _pointA=lines_slicedToArray(pointA,2),x1=_pointA[0],y1=_pointA[1],_pointB=lines_slicedToArray(pointB,2),x2=_pointB[0],y2=_pointB[1];return x2===x1?y2>y1?"down":"up":y2===y1?x2>x1?"right":"left":x2<x1&&y2<y1?"nw":x2>x1&&y2<y1?"ne":x2>x1&&y2>y1?"se":"sw"}function getStartAndEndPoint(width,height,orientation){return"right"===orientation?[[0,height/2],[width,height/2]]:"left"===orientation?[[width,height/2],[0,height/2]]:"down"===orientation?[[width/2,0],[width/2,height]]:"up"===orientation?[[width/2,height],[width/2,0]]:"nw"===orientation?[[width,height],[0,0]]:"ne"===orientation?[[0,height],[width,0]]:"se"===orientation?[[0,0],[width,height]]:[[width,0],[0,height]]}function StraightLineTool_slicedToArray(arr,i){return function StraightLineTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StraightLineTool_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function StraightLineTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StraightLineTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StraightLineTool_arrayLikeToArray(o,minLen)}(arr,i)||function StraightLineTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StraightLineTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const StraightLineTool={id:constants.Oi,tooltip:"Straight Line Tool",icon:(0,jsx_runtime.jsx)(HorizontalLineIcon.Z,{}),onDrawStart:function onDrawStart(data){var div=data.containerDiv,lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity),newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),div.append(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,viewContainer){(0,utils.X5)(data);var orientation=calcOrientation(data.coords[0],data.coords[data.coords.length-1]);data.customData.set(constants.QP,orientation);var newSvg=makeLineInOrientation(data,orientation),div=data.containerDiv;div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){var orientation=data.customData.get(constants.QP);if(!orientation)throw new Error("orientation not set");var newSvg=makeLineInOrientation(data,orientation),div=data.containerDiv;div.removeChild(data.element),div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:updateSvgPathStroke,lineWidth:updateSvgPathWidth,opacity:updateEleOpacity}};function makeLineInOrientation(data,orientation){var bounds=(0,utils.RZ)(data),width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,newSvg=createSvg(width,height,data.style.opacity);newSvg.style.overflow="visible";var _getStartAndEndPoint2=StraightLineTool_slicedToArray(getStartAndEndPoint(width,height,orientation),2),start=_getStartAndEndPoint2[0],end=_getStartAndEndPoint2[1],lineSvg=createLineSvg(data.style);return lineSvg.setAttribute("x1",start[0].toString()),lineSvg.setAttribute("y1",start[1].toString()),lineSvg.setAttribute("x2",end[0].toString()),lineSvg.setAttribute("y2",end[1].toString()),newSvg.appendChild(lineSvg),newSvg}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/StraightLineTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/StraightLineTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/web.timers.js");const TextAreaTool={icon:(0,jsx_runtime.jsx)("span",{style:{display:"inline-block",fontWeight:"bold",fontSize:"20px"},children:"A"}),id:constants.UH,tooltip:"Textarea Tool",cursor:"text",onDrawStart:function onDrawStart(data,ctx){setupTextAreaDiv(data,ctx)},onDrawing:function onDrawing(data,viewContainer){},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onSelect:function onSelect(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onUnSelect:function onUnSelect(data){cleanHandlers(data,!1),setBoundsFromDiv(data.containerDiv,(0,utils.RZ)(data))},onAfterUpdate:function onAfterUpdate(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},undoHandlers:{create:undoCreate,delete:redoDelete,input:undoTextAreaInput,color:undoTextAreaColor,background:undoTextAreaBackground,opacity:undoEleOpacity,fontSize:undoFontSize},redoHandlers:{create:undoCreate,delete:redoDelete,input:undoTextAreaInput,color:undoTextAreaColor,background:undoTextAreaBackground,opacity:undoEleOpacity,fontSize:undoFontSize},onDeleteObject:function onDeleteObject(data,ctx){cleanHandlers(data,!0)},styleHandlers:{color:function updateTextColor(data,value){return updateTextStyle(data,"color","color",value)},background:function updateTextBackgroundColor(data,value){return updateTextStyle(data,"background","backgroundColor",value)},opacity:updateEleOpacity,fontSize:function updateTextAreaFontSize(data,value){var curr=data.style.fontSize;return data.style.fontSize=value,data.containerDiv.style.fontSize=value+"px",setBoundsFromDiv(data.containerDiv,(0,utils.RZ)(data)),(0,updateStyles_utils.wp)(data,"fontSize",curr)}}};function undoFontSize(action,ctx){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),curr=object.style.fontSize,styleToSave=action.data;return object.style.fontSize=styleToSave,object.containerDiv.style.fontSize=styleToSave+"px",action.data=curr,action}function undoTextAreaInput(action,ctx){var ele=(0,utils_utils.s7)(ctx.objectsMap,action.objectId).element;if(!ele)throw new Error("tried to undo text but no ele found");var currentInput=ele.innerHTML,undoInput=action.data;return ele.innerHTML=undoInput,action.data=currentInput,action}function undoTextAreaColor(action,ctx){return undoTextAreaStyle(action,ctx,"color","color")}function undoTextAreaBackground(action,ctx){return undoTextAreaStyle(action,ctx,"background","backgroundColor")}function undoTextAreaStyle(action,ctx,dataKey,divKey){var object=(0,utils_utils.s7)(ctx.objectsMap,action.objectId),currColor=object.style[dataKey],colorTo=action.data;return object.style[dataKey]=colorTo,object.containerDiv.style[divKey]=colorTo,action.data=currColor,action}function cleanHandlers(data,deleteCapture){var textArea=data.element;if(textArea){var handler=data.customData.get("handler");handler&&(textArea.removeEventListener("keypress",handler),data.customData.delete("handler"));var capture=data.customData.get("capture");deleteCapture&&capture&&(textArea.removeEventListener("input",capture),data.customData.delete("capture"))}}function setBoundsFromDiv(div,bounds){var trueBounds=div.getBoundingClientRect(),width=trueBounds.width,height=trueBounds.height;bounds.bottom=bounds.top+height,bounds.right=bounds.left+width}function placeCaretAtEnd(el){if(el.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var range=document.createRange();range.selectNodeContents(el),range.collapse(!1);var sel=window.getSelection();if(sel)return sel.removeAllRanges(),sel.addRange(range),!0}return console.error("cannot place caret at end"),!1}function setTextContainerStyles(data){var div=data.containerDiv;div.style.padding="5px",div.style.borderRadius="2px",div.style.boxSizing="border-box";var styleTag=document.createElement("style");return styleTag.innerHTML="\n\t.react-draw-cursor {\n\t\toutline: none;\t\t\n\t\theight: 100%;\n\t}",div.appendChild(styleTag),data}function setTextToolStyles(data){var fontSize=parseInt(data.style.fontSize),div=data.containerDiv,bounds=(0,utils.RZ)(data),bottom=bounds.top+fontSize+5;return div.style.height="",div.style.minHeight=bottom-bounds.top+"px",div.style.minWidth=div.style.width,div.style.width="",div.style.border="1px solid black",data}function setupTextAreaDiv(data,ctx){var div=data.containerDiv,bounds=(0,utils.RZ)(data);(0,updateStyles_utils.s3)(data),setTextToolStyles(data),setTextContainerStyles(data);var cursorDiv=function makeCursorDiv(){var div=document.createElement("div");return div.setAttribute("contenteditable","true"),div.style.minWidth="1px",div.style.height="100%",div.className="react-draw-cursor",div}();return cursorDiv.style.opacity=data.style.opacity,data.element=cursorDiv,div.appendChild(cursorDiv),setBoundsFromDiv(div,bounds),cursorDiv.setAttribute("tabindex","1"),addCaptureHandler(data,ctx),setTimeout((function(){cursorDiv.focus()}),0),cursorDiv}function addCaptureHandler(data,ctx){var div=data.element,customData=data.customData;function captureDidType(e){var currentMS=(new Date).getTime(),lastCaptureMS=customData.get("lastCapture");if(lastCaptureMS){if(currentMS-lastCaptureMS>5e3){var target=e.target,_action={toolId:data.toolId,action:"input",data:target.innerHTML,toolType:"top-bar-tool",objectId:data.id};(0,pushActionToStack.P)(_action,ctx)}}else{var action={toolId:data.toolId,action:"input",data:"",toolType:"top-bar-tool",objectId:data.id};(0,pushActionToStack.P)(action,ctx)}customData.set("lastCapture",currentMS)}div.addEventListener("input",captureDidType),customData.set("capture",captureDidType)}try{placeCaretAtEnd.displayName="placeCaretAtEnd",placeCaretAtEnd.__docgenInfo={description:"",displayName:"placeCaretAtEnd",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/TextAreaTool/index.tsx#placeCaretAtEnd"]={docgenInfo:placeCaretAtEnd.__docgenInfo,name:"placeCaretAtEnd",path:"src/TopBarTools/TextAreaTool/index.tsx#placeCaretAtEnd"})}catch(__react_docgen_typescript_loader_error){}try{setTextContainerStyles.displayName="setTextContainerStyles",setTextContainerStyles.__docgenInfo={description:"",displayName:"setTextContainerStyles",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},containerDiv:{defaultValue:null,description:"",name:"containerDiv",required:!0,type:{name:"HTMLDivElement"}},coords:{defaultValue:null,description:"",name:"coords",required:!0,type:{name:"Point[]"}},element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"HTMLElement | SVGSVGElement | null"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ToolPropertiesMap"}},toolId:{defaultValue:null,description:"",name:"toolId",required:!0,type:{name:"string"}},customData:{defaultValue:null,description:"",name:"customData",required:!0,type:{name:"Map<string, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/TextAreaTool/index.tsx#setTextContainerStyles"]={docgenInfo:setTextContainerStyles.__docgenInfo,name:"setTextContainerStyles",path:"src/TopBarTools/TextAreaTool/index.tsx#setTextContainerStyles"})}catch(__react_docgen_typescript_loader_error){}try{setTextToolStyles.displayName="setTextToolStyles",setTextToolStyles.__docgenInfo={description:"",displayName:"setTextToolStyles",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},containerDiv:{defaultValue:null,description:"",name:"containerDiv",required:!0,type:{name:"HTMLDivElement"}},coords:{defaultValue:null,description:"",name:"coords",required:!0,type:{name:"Point[]"}},element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"HTMLElement | SVGSVGElement | null"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ToolPropertiesMap"}},toolId:{defaultValue:null,description:"",name:"toolId",required:!0,type:{name:"string"}},customData:{defaultValue:null,description:"",name:"customData",required:!0,type:{name:"Map<string, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/TextAreaTool/index.tsx#setTextToolStyles"]={docgenInfo:setTextToolStyles.__docgenInfo,name:"setTextToolStyles",path:"src/TopBarTools/TextAreaTool/index.tsx#setTextToolStyles"})}catch(__react_docgen_typescript_loader_error){}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/TextAreaTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/TextAreaTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var ArrowRightBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/ArrowRightBoldIcon.js");function ArrowTool_slicedToArray(arr,i){return function ArrowTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ArrowTool_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function ArrowTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ArrowTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ArrowTool_arrayLikeToArray(o,minLen)}(arr,i)||function ArrowTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ArrowTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const ArrowTool={icon:(0,jsx_runtime.jsx)(ArrowRightBoldIcon.Z,{}),id:constants.K1,tooltip:"Arrow Tool",onDrawStart:function onDrawStart(data){var div=data.containerDiv,lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity),newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),div.append(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,_ref){_ref.viewContainer;(0,utils.X5)(data);var orientation=calcOrientation(data.coords[0],data.coords[data.coords.length-1]);data.customData.set(constants.QP,orientation);var newSvg=makeArrowSvg(data,orientation),div=data.containerDiv;div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){ctx.shouldKeepHistory&&saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){var orientation=data.customData.get(constants.QP);if(!orientation)throw new Error("orientation not set");var newSvg=makeArrowSvg(data,orientation),div=data.containerDiv;div.removeChild(data.element),div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateSvgPathStroke(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateSvgPathWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}}};function makeArrowSvg(data,orientation){var lineWidth=parseInt(data.style.lineWidth),_getBoxSize=(0,utils.RZ)(data),width=_getBoxSize.width,height=_getBoxSize.height,_getStartAndEndPoint2=ArrowTool_slicedToArray(getStartAndEndPoint(width,height,orientation),2),start=_getStartAndEndPoint2[0],end=_getStartAndEndPoint2[1],newSvg=createSvg(width+lineWidth,height+lineWidth,data.style.opacity);newSvg.style.overflow="visible";var arrowLine=function makeArrowPath(data,pointA,pointB){var _pointA=ArrowTool_slicedToArray(pointA,2),x1=_pointA[0],y1=_pointA[1],_pointB=ArrowTool_slicedToArray(pointB,2),x2=_pointB[0],y2=_pointB[1],arrow=createPathSvg(data.style),D=[x1-x2,y1-y2],dx=D[0],dy=D[1],mag=Math.sqrt(dx*dx+dy*dy),uD=[dx/mag,dy/mag],uDx=uD[0],uDy=uD[1],axNormed=uDx*(Math.sqrt(3)/2)-.5*uDy,ayNormed=1*uDx/2+uDy*(Math.sqrt(3)/2),bxNormed=uDx*(Math.sqrt(3)/2)+.5*uDy,byNormed=.5*-uDx+uDy*(Math.sqrt(3)/2),lineLength=20,ax=-axNormed*lineLength,ay=-ayNormed*lineLength,bx=-bxNormed*lineLength,by=-byNormed*lineLength;return arrow.setAttribute("d","M "+x1+" "+y1+" L "+x2+" "+y2+" L "+(x2-ax)+" "+(y2-ay)+" L "+x2+" "+y2+" L "+(x2-bx)+" "+(y2-by)),arrow}(data,start,end);return newSvg.appendChild(arrowLine),newSvg}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/ArrowTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/ArrowTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var EraserIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/EraserIcon.js");function EraseTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function EraseTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EraseTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EraseTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function EraseTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const EraseTool={icon:(0,jsx_runtime.jsx)(EraserIcon.Z,{}),tooltip:"Eraser tool",id:constants.V5,cursor:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOSAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjA2MTYgMC41ODY1NzNMNS4zMTE1OSA1LjMzNjU3TDAuNTgxNTg1IDEwLjE3NjZDMC4yMDkwODQgMTAuNTUxMyAwIDExLjA1ODIgMCAxMS41ODY2QzAgMTIuMTE0OSAwLjIwOTA4NCAxMi42MjE4IDAuNTgxNTg1IDEyLjk5NjZMNC44ODE1OSAxNy4yOTY2QzUuMDY3ODUgMTcuNDgxMyA1LjMxOTI1IDE3LjU4NTUgNS41ODE1OSAxNy41ODY2SDE3LjU4MTZWMTUuNTg2NkgxMC41ODE2TDE3LjgwMTYgOC4zNjY1N0MxNy45ODc1IDguMTgwODMgMTguMTM1MSA3Ljk2MDI1IDE4LjIzNTcgNy43MTc0NUMxOC4zMzY0IDcuNDc0NjYgMTguMzg4MiA3LjIxNDQgMTguMzg4MiA2Ljk1MTU3QzE4LjM4ODIgNi42ODg3NCAxOC4zMzY0IDYuNDI4NDkgMTguMjM1NyA2LjE4NTY5QzE4LjEzNTEgNS45NDI5IDE3Ljk4NzUgNS43MjIzMiAxNy44MDE2IDUuNTM2NTdMMTIuODkxNiAwLjU4NjU3M0MxMi43MDU4IDAuNDAwNjIgMTIuNDg1MyAwLjI1MzEwMiAxMi4yNDI1IDAuMTUyNDU0QzExLjk5OTcgMC4wNTE4MDUzIDExLjczOTQgMCAxMS40NzY2IDBDMTEuMjEzOCAwIDEwLjk1MzUgMC4wNTE4MDUzIDEwLjcxMDcgMC4xNTI0NTRDMTAuNDY3OSAwLjI1MzEwMiAxMC4yNDczIDAuNDAwNjIgMTAuMDYxNiAwLjU4NjU3M1YwLjU4NjU3M1pNNS45OTE1OSAxNS41ODY2TDEuOTkxNTkgMTEuNTg2Nkw2Ljc0MTU5IDYuNzQ2NTdMNy40ODE1OSA1Ljk5NjU3TDEyLjQzMTYgMTAuOTQ2Nkw3Ljg3MTU5IDE1LjUwNjZMNy44MDE1OSAxNS41ODY2SDUuOTkxNTlaIiBmaWxsPSJibGFjayI+PC9wYXRoPgo8L3N2Zz4=) 0 16, pointer",onDrawStart:function onDrawStart(data,viewContainer){},onDrawing:function onDrawing(data,ctx){var viewContainer=ctx.viewContainer;(0,utils.Fb)(data);var boxSize=(0,utils.RZ)(data),newSvg=createSvg(boxSize.width,boxSize.height,"1"),eraserPath=function getEraserPath(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.style.strokeWidth="10px",newPath.setAttribute("d",function getEraserPathDString(data,viewContainer){for(var pathString="",lastPoint=data.coords[0],i=0;i<data.coords.length;i++){var point=data.coords[i],mappedPoint=(0,utils.ti)(point,data.containerDiv,viewContainer);pathString+=EraseTool_getPathPoint(mappedPoint,lastPoint,i),lastPoint=mappedPoint,i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath.setAttribute("stroke","rgba(232, 16, 84, 0.142)"),newPath}(data,viewContainer);newSvg.appendChild(eraserPath);var containerDiv=data.containerDiv;containerDiv.innerHTML="",containerDiv.appendChild(newSvg),data.element=newSvg;var _step,lastPoint=data.coords[data.coords.length-1],bounds=(0,utils.Zc)(lastPoint),_iterator=EraseTool_createForOfIteratorHelper(ctx.objectsMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var objectId=_step.value,object=ctx.objectsMap.get(objectId);if(object){var objectBounds=(0,utils.RZ)(object);(0,utils.Je)(objectBounds,bounds)&&((0,utils_utils.$Q)(objectId,ctx),addObjectToCustomState(ctx,object))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;if(ctx.viewContainer.removeChild(data.containerDiv),objectsMap.delete(data.id),(0,utils_utils.ge)('[id^="react-draw-erase-tool"',ctx.viewContainer),ctx.fullState[constants.V5].deletedObjects.size>0&&ctx.shouldKeepHistory){var action={toolId:data.toolId,toolType:"top-bar-tool",objectId:"",action:"delete",data:ctx.fullState[constants.V5].deletedObjects};ctx.fullState[constants.V5].deletedObjects=new Map,(0,pushActionToStack.P)(action,ctx)}},undoHandlers:{delete:recreateDeletedObjects},redoHandlers:{create:deleteCreatedObjects},onResize:function onResize(data,ctx){}};function addObjectToCustomState(ctx,object){ctx.fullState[constants.V5].deletedObjects.set(object.id,object)}function EraseTool_getPathPoint(curr,prev,index){return 0===index?"M "+curr[0]+" "+curr[1]:"l "+(curr[0]-prev[0])+" "+(curr[1]-prev[1])}try{DrawingTools.displayName="DrawingTools",DrawingTools.__docgenInfo={description:"icon: the icon to be displayed in the top bar tools\nid: required so that react draw can identify objects created by this id.\ncursor: sets the the cursor of the mouse while over the viewContainer\n----",displayName:"DrawingTools",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TopBarTools/EraseTool/index.tsx#DrawingTools"]={docgenInfo:DrawingTools.__docgenInfo,name:"DrawingTools",path:"src/TopBarTools/EraseTool/index.tsx#DrawingTools"})}catch(__react_docgen_typescript_loader_error){}var UndoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/UndoIcon.js");function UndoTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function UndoTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UndoTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UndoTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function UndoTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const UndoTool={id:"react-draw-undo-tool",tooltip:"Undo",icon:(0,jsx_runtime.jsx)(UndoIcon.Z,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.undoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.undoStack.pop();if(lastAction)return"top-bar-tool"===lastAction.toolType?function handleTopBarUndo(ctx,action){var toolId=action.toolId,tool=(0,utils_utils.uL)(ctx.drawingTools,toolId),handlers=tool.undoHandlers,actionKey=action.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];handler||console.error("tool:",tool,"does not implement undo action:",actionKey);var result=handler(action,ctx);ctx.shouldKeepHistory&&ctx.redoStack.push(result)}(ctx,lastAction):"batch"===lastAction.toolType?function handleBatchAction(ctx,action){var _step,data=action.data,result=[],_iterator=UndoTool_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,toolId=obj.toolId,tool=(0,utils_utils.uL)(ctx.drawingTools,toolId),handlers=tool.undoHandlers,actionKey=obj.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];if(!handler)return void console.error("tool:",tool,"does not implement action:",actionKey);result.push(handler(obj,ctx))}}catch(err){_iterator.e(err)}finally{_iterator.f()}action.data=result,ctx.shouldKeepHistory&&ctx.redoStack.push(action)}(ctx,lastAction):void 0}};var RedoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/RedoIcon.js");function RedoTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function RedoTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RedoTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RedoTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function RedoTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const RedoTool={id:"react-draw-redo-tool",tooltip:"Redo",icon:(0,jsx_runtime.jsx)(RedoIcon.Z,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.redoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.redoStack.pop();if(lastAction)return"top-bar-tool"===lastAction.toolType?function handleTopBarRedo(ctx,action){var toolId=action.toolId,tool=(0,utils_utils.uL)(ctx.drawingTools,toolId),handlers=tool.redoHandlers,actionKey=action.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];handler||console.error("tool:",tool,"does not implement undo action:",actionKey);var result=handler(action,ctx);ctx.shouldKeepHistory&&ctx.undoStack.push(result)}(ctx,lastAction):"batch"===lastAction.toolType?function RedoTool_handleBatchAction(ctx,action){var _step,data=action.data,result=[],_iterator=RedoTool_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,toolId=obj.toolId,tool=(0,utils_utils.uL)(ctx.drawingTools,toolId),handlers=tool.redoHandlers,actionKey=obj.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];if(!handler)return void console.error("tool:",tool,"does not implement action:",actionKey);result.push(handler(obj,ctx))}}catch(err){_iterator.e(err)}finally{_iterator.f()}action.data=result,ctx.shouldKeepHistory&&ctx.undoStack.push(action)}(ctx,lastAction):void 0}};var TrashCanBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/TrashCanBoldIcon.js");const TrashTool={id:"react-draw-trash-tool",icon:(0,jsx_runtime.jsx)(TrashCanBoldIcon.Z,{}),tooltip:"Delete selected objects",getDisplayMode:function getDisplayMode(ctx){return(0,select_utils.sy)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=(0,select_utils.sy)(ctx);selectedIds.length<1||(0,utils_utils.Hm)(selectedIds,ctx)}};__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js");var DuplicateIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DuplicateIcon.js");const DuplicateTool={id:"react-draw-duplicate-tool",tooltip:"Duplicate objects",icon:(0,jsx_runtime.jsx)(DuplicateIcon.Z,{}),getDisplayMode:function getDisplayMode(ctx){return(0,select_utils.sy)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){duplicateSelectedObjects(ctx)}};function duplicateSelectedObjects(ctx){var selectedIds=(0,select_utils.sy)(ctx);if(selectedIds.length<1)return null;var objects=selectedIds.map((function(id){return(0,utils_utils.s7)(ctx.objectsMap,id)}));(0,select_utils.HF)(objects,ctx);var newObjects=objects.map((function(o){return function duplicateObject(object,ctx){var div=object.containerDiv,newDiv=div.cloneNode(!0),_makeNewId=function makeNewId(divId){var newId=(0,utils.YO)(6),parts=divId.split("-");return parts[parts.length-1]=(0,utils.YO)(6),{divId:parts.join("-"),newId}}(div.id),newId=_makeNewId.newId,divId=_makeNewId.divId;newDiv.id=divId;var currentMaxZindex=(0,utils_utils.f4)(ctx),nextZindex=currentMaxZindex+1,data={coords:object.coords.slice(0),toolId:object.toolId,element:newDiv.lastElementChild,style:Object.assign({},object.style,{zIndex:nextZindex.toString()}),customData:new Map(object.customData),containerDiv:newDiv,id:newId},bbox=(0,utils.RZ)(object);newDiv.style.top=bbox.top+5+"px",newDiv.style.left=bbox.left+10+"px",newDiv.style.zIndex=nextZindex.toString();var tool=(0,utils_utils.uL)(ctx.drawingTools,object.toolId);if(tool.onDuplicate)return tool.onDuplicate(data,ctx);return data}(o,ctx)})),resultData=newObjects.map((function(object){var toolId=object.toolId,id=object.id;return ctx.objectsMap.set(id,object),ctx.viewContainer.appendChild(object.containerDiv),{action:"create",toolType:"top-bar-tool",toolId,objectId:id,data:object}}));if(ctx.shouldKeepHistory){var resultAction={toolId:"",objectId:"",toolType:"batch",action:"batch",data:resultData};(0,pushActionToStack.P)(resultAction,ctx)}return 1===selectedIds.length?(0,select_utils.G7)(newObjects[0],ctx):(0,select_utils.os)(newObjects,ctx),ctx.fullState[constants.xV].selectedIds=newObjects.map((function(o){return o.id})),newObjects}try{duplicateSelectedObjects.displayName="duplicateSelectedObjects",duplicateSelectedObjects.__docgenInfo={description:"returns null if there are no selected objects\nreturns the list of new drawing data that was created",displayName:"duplicateSelectedObjects",props:{viewContainer:{defaultValue:null,description:"",name:"viewContainer",required:!0,type:{name:"HTMLDivElement"}},objectsMap:{defaultValue:null,description:"",name:"objectsMap",required:!0,type:{name:"DrawingDataMap"}},lastEvent:{defaultValue:null,description:"",name:"lastEvent",required:!0,type:{name:"CapturedEvent"}},prevMousePosition:{defaultValue:null,description:"",name:"prevMousePosition",required:!0,type:{name:"MutableRefObject<Point | null>"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},fullState:{defaultValue:null,description:"",name:"fullState",required:!0,type:{name:"CustomState"}},undoStack:{defaultValue:null,description:"",name:"undoStack",required:!0,type:{name:"ActionObject[]"}},redoStack:{defaultValue:null,description:"",name:"redoStack",required:!0,type:{name:"ActionObject[]"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!0,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!0,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:null,description:"",name:"shouldCornerResizePreserveRatio",required:!0,type:{name:"boolean"}},globalStyles:{defaultValue:null,description:"",name:"globalStyles",required:!0,type:{name:"ToolPropertiesMap"}},selectDrawingTool:{defaultValue:null,description:"",name:"selectDrawingTool",required:!0,type:{name:"(tool: DrawingTools) => void"}},selectObject:{defaultValue:null,description:"",name:"selectObject",required:!0,type:{name:"(object: DrawingData) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/BottomBarTools/DuplicateTool/index.tsx#duplicateSelectedObjects"]={docgenInfo:duplicateSelectedObjects.__docgenInfo,name:"duplicateSelectedObjects",path:"src/BottomBarTools/DuplicateTool/index.tsx#duplicateSelectedObjects"})}catch(__react_docgen_typescript_loader_error){}var BackIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/BackIcon.js");function BringBackTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringBackTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringBackTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringBackTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringBackTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const BringBackTool={id:"react-draw-back-tool",icon:(0,jsx_runtime.jsx)(BackIcon.Z,{}),tooltip:"Move object back",getDisplayMode:function getDisplayMode(ctx){return(0,select_utils.sy)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){bringSelectedBack(ctx)}};function bringSelectedBack(ctx){var selectedIds=(0,select_utils.sy)(ctx);if(!(selectedIds.length<1)){var selectedObjects=[],selectedIdSet=new Set;selectedIds.forEach((function(id){selectedObjects.push((0,utils_utils.s7)(ctx.objectsMap,id)),selectedIdSet.add(id)}));for(var _i=0,_selectedObjects=selectedObjects;_i<_selectedObjects.length;_i++){var object=_selectedObjects[_i];object.style.zIndex="0",object.containerDiv.style.zIndex="0"}var _step,lowestNumNotSelected=1/0,_iterator=BringBackTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _object$containerDiv$,_object=_step.value;if(!selectedIdSet.has(_object.id)){var objectZIndex=parseInt(null!==(_object$containerDiv$=_object.containerDiv.style.zIndex)&&void 0!==_object$containerDiv$?_object$containerDiv$:"0");objectZIndex<lowestNumNotSelected&&(lowestNumNotSelected=objectZIndex)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}var amountToAdd=1;lowestNumNotSelected<0&&(amountToAdd=1-lowestNumNotSelected);var _step2,_iterator2=BringBackTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _object2$containerDiv,_object2=_step2.value;if(!selectedIdSet.has(_object2.id)){var newZIndex=parseInt(null!==(_object2$containerDiv=_object2.containerDiv.style.zIndex)&&void 0!==_object2$containerDiv?_object2$containerDiv:"0")+amountToAdd;_object2.style.zIndex=newZIndex.toString(),_object2.containerDiv.style.zIndex=newZIndex.toString()}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}try{bringSelectedBack.displayName="bringSelectedBack",bringSelectedBack.__docgenInfo={description:"Always use div ele as source of truth\nAlgo:\n1. take the selected Objects and set their z-index to min num\n   ei: if there are 3 selected then z-index will be 0,0,0 (TODO: preserve order)\n2. find the current lowest object not selected\n3. add the different from the lowest(unselected) to the highest (selected)",displayName:"bringSelectedBack",props:{viewContainer:{defaultValue:null,description:"",name:"viewContainer",required:!0,type:{name:"HTMLDivElement"}},objectsMap:{defaultValue:null,description:"",name:"objectsMap",required:!0,type:{name:"DrawingDataMap"}},lastEvent:{defaultValue:null,description:"",name:"lastEvent",required:!0,type:{name:"CapturedEvent"}},prevMousePosition:{defaultValue:null,description:"",name:"prevMousePosition",required:!0,type:{name:"MutableRefObject<Point | null>"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},fullState:{defaultValue:null,description:"",name:"fullState",required:!0,type:{name:"CustomState"}},undoStack:{defaultValue:null,description:"",name:"undoStack",required:!0,type:{name:"ActionObject[]"}},redoStack:{defaultValue:null,description:"",name:"redoStack",required:!0,type:{name:"ActionObject[]"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!0,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!0,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:null,description:"",name:"shouldCornerResizePreserveRatio",required:!0,type:{name:"boolean"}},globalStyles:{defaultValue:null,description:"",name:"globalStyles",required:!0,type:{name:"ToolPropertiesMap"}},selectDrawingTool:{defaultValue:null,description:"",name:"selectDrawingTool",required:!0,type:{name:"(tool: DrawingTools) => void"}},selectObject:{defaultValue:null,description:"",name:"selectObject",required:!0,type:{name:"(object: DrawingData) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/BottomBarTools/BringBackTool/index.tsx#bringSelectedBack"]={docgenInfo:bringSelectedBack.__docgenInfo,name:"bringSelectedBack",path:"src/BottomBarTools/BringBackTool/index.tsx#bringSelectedBack"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.sort.js");var ForwardIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/ForwardIcon.js");function BringForwardTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringForwardTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringForwardTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringForwardTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringForwardTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const BringForwardTool={id:"react-draw-forward-tool",tooltip:"Move object forward",icon:(0,jsx_runtime.jsx)(ForwardIcon.Z,{}),getDisplayMode:function getDisplayMode(ctx){return(0,select_utils.sy)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){moveSelectedForward(ctx)}};function moveSelectedForward(ctx){var selectedIds=(0,select_utils.sy)(ctx);if(!(selectedIds.length<1)){var selectedObjects=selectedIds.map((function(id){return(0,utils_utils.s7)(ctx.objectsMap,id)}));selectedObjects.sort((function(a,b){return getCurrentZIndex(a)-getCurrentZIndex(b)}));var _step,nonSelectedObjects=[],_iterator=BringForwardTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var objectOnCanvas=_step.value;selectedIds.includes(objectOnCanvas.id)||nonSelectedObjects.push(objectOnCanvas)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,currentZToSetSelected=nonSelectedObjects.length+1,_iterator2=BringForwardTool_createForOfIteratorHelper(selectedObjects);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var selected=_step2.value;selected.style.zIndex=currentZToSetSelected.toString(),selected.containerDiv.style.zIndex=currentZToSetSelected.toString(),currentZToSetSelected+=1}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}nonSelectedObjects.sort((function(a,b){var zIndexA=getCurrentZIndex(a);return getCurrentZIndex(b)-zIndexA}));var currentZToSetNonSelected=nonSelectedObjects.length;nonSelectedObjects.forEach((function(o){o.style.zIndex=currentZToSetNonSelected.toString(),o.containerDiv.style.zIndex=currentZToSetNonSelected.toString(),currentZToSetNonSelected-=1}))}}var getCurrentZIndex=function getCurrentZIndex(obj){return obj.containerDiv.style.zIndex?parseInt(obj.containerDiv.style.zIndex):obj.style.zIndex?parseInt(obj.style.zIndex):0};try{moveSelectedForward.displayName="moveSelectedForward",moveSelectedForward.__docgenInfo={description:"Algorithm:\nget list of selected elements\nget the list of non-selected elements\nfor each of the selected elements make the z index equal to the number of non-selected elements + 1,\n  this ensures that there will be enough numbers between this and 0 for the other elements\nsort the list of non-selected elements by their current z-index\nfor each of the non-selected elements, iterate through and set z-index to current - 1\n\nThis ensures that the selected are at the top, and the rest maintain their ordering\n\nExample:\nselected = [object1 (z=1), object2 (z=4)]\nnon-selected = [object3 (z=5), object4 (z=2), object5(z=10), object6(z=3)]\n\nobject1.zindex = 4\nobject2.zindex = 5\n\nnon-selected\n(sorted) = [object5, object3, object6, object4],\n(set zindex) = [(z=3), (z=2), (z=1), (z=0)]",displayName:"moveSelectedForward",props:{viewContainer:{defaultValue:null,description:"",name:"viewContainer",required:!0,type:{name:"HTMLDivElement"}},objectsMap:{defaultValue:null,description:"",name:"objectsMap",required:!0,type:{name:"DrawingDataMap"}},lastEvent:{defaultValue:null,description:"",name:"lastEvent",required:!0,type:{name:"CapturedEvent"}},prevMousePosition:{defaultValue:null,description:"",name:"prevMousePosition",required:!0,type:{name:"MutableRefObject<Point | null>"}},drawingTools:{defaultValue:null,description:"",name:"drawingTools",required:!0,type:{name:"DrawingTools[]"}},fullState:{defaultValue:null,description:"",name:"fullState",required:!0,type:{name:"CustomState"}},undoStack:{defaultValue:null,description:"",name:"undoStack",required:!0,type:{name:"ActionObject[]"}},redoStack:{defaultValue:null,description:"",name:"redoStack",required:!0,type:{name:"ActionObject[]"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!0,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!0,type:{name:"boolean"}},shouldCornerResizePreserveRatio:{defaultValue:null,description:"",name:"shouldCornerResizePreserveRatio",required:!0,type:{name:"boolean"}},globalStyles:{defaultValue:null,description:"",name:"globalStyles",required:!0,type:{name:"ToolPropertiesMap"}},selectDrawingTool:{defaultValue:null,description:"",name:"selectDrawingTool",required:!0,type:{name:"(tool: DrawingTools) => void"}},selectObject:{defaultValue:null,description:"",name:"selectObject",required:!0,type:{name:"(object: DrawingData) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/BottomBarTools/BringForwardTool/index.tsx#moveSelectedForward"]={docgenInfo:moveSelectedForward.__docgenInfo,name:"moveSelectedForward",path:"src/BottomBarTools/BringForwardTool/index.tsx#moveSelectedForward"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.string.replace.js");function ColorPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,label=_ref.label,styleValue=_ref.styleValue,id=(0,react.useRef)((0,utils.YO)(5));return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:(0,jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:label})}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[(0,jsx_runtime.jsx)("span",{style:{display:"inline-block",borderRadius:5,width:30,height:30,backgroundColor:styleValue}}),(0,jsx_runtime.jsxs)("div",{style:{marginLeft:10,display:"flex"},children:[(0,jsx_runtime.jsx)("span",{style:{borderRadius:"5px 0px 0px 5px",width:30,padding:5,fontWeight:"bold",fontSize:18,textAlign:"center",color:"grey",backgroundColor:"lightgray"},children:"#"}),(0,jsx_runtime.jsx)("input",{id:id.current,value:styleValue.replace("#",""),onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,"transparent"===value?value:"#"+value)},style:{width:80,borderRadius:"0px 5px 5px 0px"}})]})]})]})}ColorPicker.displayName="ColorPicker";const StyleComponents_ColorPicker=ColorPicker;try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"src/StyleComponents/ColorPicker.tsx#ColorPicker"})}catch(__react_docgen_typescript_loader_error){}var ColorStyle=function ColorStyle(props){return(0,jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"color"}))};ColorStyle.displayName="ColorStyle";const Color=ColorStyle;var BackgroundStyle=function BackgroundStyle(props){return(0,jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"background"}))};BackgroundStyle.displayName="BackgroundStyle";const Background=BackgroundStyle;function LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=(0,react.useRef)((0,utils.YO)(5));return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:(0,jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:"line width"})}),(0,jsx_runtime.jsx)("div",{style:{width:"100%"},children:(0,jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"number",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",step:"1"})})]})}LineWidthPicker.displayName="LineWidthPicker";try{LineWidth.displayName="LineWidth",LineWidth.__docgenInfo={description:"",displayName:"LineWidth",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/LineWidth.tsx#LineWidth"]={docgenInfo:LineWidth.__docgenInfo,name:"LineWidth",path:"src/StyleComponents/LineWidth.tsx#LineWidth"})}catch(__react_docgen_typescript_loader_error){}function OpacityPicker_LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=(0,react.useRef)((0,utils.YO)(5));return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:(0,jsx_runtime.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:["opacity (",styleValue,")"]})}),(0,jsx_runtime.jsx)("div",{style:{width:"100%"},children:(0,jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"range",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",max:"1",step:"0.1"})})]})}OpacityPicker_LineWidthPicker.displayName="LineWidthPicker";try{OpacityPicker.displayName="OpacityPicker",OpacityPicker.__docgenInfo={description:"",displayName:"OpacityPicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/OpacityPicker.tsx#OpacityPicker"]={docgenInfo:OpacityPicker.__docgenInfo,name:"OpacityPicker",path:"src/StyleComponents/OpacityPicker.tsx#OpacityPicker"})}catch(__react_docgen_typescript_loader_error){}function FontSizePicker_LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=(0,react.useRef)((0,utils.YO)(5));return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:(0,jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:"font size"})}),(0,jsx_runtime.jsx)("div",{style:{width:"100%"},children:(0,jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"number",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",step:"1"})})]})}FontSizePicker_LineWidthPicker.displayName="LineWidthPicker";try{FontSizePicker.displayName="FontSizePicker",FontSizePicker.__docgenInfo={description:"",displayName:"FontSizePicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/FontSizePicker.tsx#FontSizePicker"]={docgenInfo:FontSizePicker.__docgenInfo,name:"FontSizePicker",path:"src/StyleComponents/FontSizePicker.tsx#FontSizePicker"})}catch(__react_docgen_typescript_loader_error){}var TrashCanIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/TrashCanIcon.js"),hooks=__webpack_require__("./src/Styles/hooks.ts"),ClearAllButton=function ClearAllButton(_ref){var getContext=_ref.getContext,classes=(0,hooks.y)(constants.SI),buttonId=react.useRef((0,utils.YO)(6));return(0,jsx_runtime.jsxs)("button",{className:classes,id:buttonId.current,onClick:function handleClearAll(){var ctx=getContext();if(0!==ctx.objectsMap.size){var objectKeys=ctx.objectsMap.keys();(0,utils_utils.Hm)(Array.from(objectKeys),ctx)}},children:[(0,jsx_runtime.jsx)("div",{style:{padding:"0px 5px",height:20},children:(0,jsx_runtime.jsx)(TrashCanIcon.Z,{width:15,height:20})}),(0,jsx_runtime.jsx)("label",{htmlFor:buttonId.current,style:{padding:"0px 10px",pointerEvents:"none"},children:"Clear All"})]})};ClearAllButton.displayName="ClearAllButton";const MenuComponents_ClearAllButton=ClearAllButton;__webpack_require__("./src/types.ts"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js");var readStyles=__webpack_require__("./src/utils/readStyles.ts");function serialization_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function serialization_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return serialization_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return serialization_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function serialization_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function serializeObjects(serializers,ctx){var _step,serializedObjects=[],_iterator=serialization_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var drawingObject=_step.value,serializerFunc=serializers[drawingObject.toolId];if(void 0===serializerFunc)return toolNotFoundError(drawingObject,serializers);serializedObjects.push(serializerFunc(drawingObject))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return JSON.stringify(serializedObjects)}var serializeArrow=function serializeArrow(obj){var _serializeSvgSetup=serializeSvgSetup(obj),containerState=_serializeSvgSetup.containerState,customData=_serializeSvgSetup.customData;return Object.assign({},obj,{containerDiv:containerState,customData})},serializeCircle=function serializeCircle(obj){var containerState=getContainerState(obj),customData=serializeCustomData(obj);return Object.assign({},obj,{containerDiv:containerState,customData})},serializeDiamond=function serializeDiamond(obj){var _serializeSvgSetup2=serializeSvgSetup(obj),containerState=_serializeSvgSetup2.containerState,customData=_serializeSvgSetup2.customData;return Object.assign({},obj,{containerDiv:containerState,customData})};function getContainerState(obj){return{rotation:(0,getRotateFromDiv.O)(obj.containerDiv),bbox:(0,utils.RZ)(obj),scale:null,other:{}}}function serializeSvgSetup(obj){var _obj$element,containerState=getContainerState(obj);return containerState.scale=(0,readStyles.Q)(obj),containerState.other.viewbox=null===(_obj$element=obj.element)||void 0===_obj$element?void 0:_obj$element.getAttribute("viewbox"),{containerState,customData:serializeCustomData(obj)}}function serializeDomSetup(obj){return{containerState:getContainerState(obj),customData:serializeCustomData(obj)}}var serializeFreeDraw=function serializeFreeDraw(obj){var _serializeSvgSetup3=serializeSvgSetup(obj),containerState=_serializeSvgSetup3.containerState,customData=_serializeSvgSetup3.customData;return Object.assign({},obj,{containerDiv:containerState,customData})},serializeCustomData=function serializeCustomData(obj){var _step2,customData={},_iterator2=serialization_createForOfIteratorHelper(obj.customData.keys());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _key=_step2.value;customData[_key]=obj.customData.get(_key)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return customData},serializeSquare=function serializeSquare(obj){var _serializeDomSetup=serializeDomSetup(obj),containerState=_serializeDomSetup.containerState,customData=_serializeDomSetup.customData;return Object.assign({},obj,{containerDiv:containerState,customData})},serializeLine=function serializeLine(obj){var _serializeSvgSetup4=serializeSvgSetup(obj),containerState=_serializeSvgSetup4.containerState,customData=_serializeSvgSetup4.customData;return Object.assign({},obj,{containerDiv:containerState,customData})},serializeText=function serializeText(obj){var _serializeDomSetup2=serializeDomSetup(obj),containerState=_serializeDomSetup2.containerState,customData=_serializeDomSetup2.customData;return containerState.other.text=obj.containerDiv.innerText,Object.assign({},obj,{containerDiv:containerState,customData})};function deserializeData(stringifiedData,deserializers,ctx){var _step3,shouldAddToCanvas=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],results=[],_iterator3=serialization_createForOfIteratorHelper(JSON.parse(stringifiedData));try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var obj=_step3.value,deserializerFunction=deserializers[obj.toolId];if(void 0===deserializerFunction)return toolNotFoundError(obj,deserializers);var drawingDataObject=deserializerFunction(obj,ctx,shouldAddToCanvas);results.push(drawingDataObject)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return results}function toolNotFoundError(object,serializers){throw new Error("toolid not function in serializers. id: "+object.toolId+" .options: "+Object.keys(serializers)+" . object: "+JSON.stringify(object))}function deserializationSetup(obj){var _freeDrawObj$style$zI,freeDrawObj=obj,containerState=freeDrawObj.containerDiv,customData=freeDrawObj.customData,p=freeDrawObj.coords[0],lineWidth=parseInt(freeDrawObj.style.lineWidth),zIndex=parseInt(null!==(_freeDrawObj$style$zI=freeDrawObj.style.zIndex)&&void 0!==_freeDrawObj$style$zI?_freeDrawObj$style$zI:"0"),_makeNewDiv=(0,utils.wG)(p[0],p[1],lineWidth,freeDrawObj.toolId,zIndex),id=_makeNewDiv.id,div=_makeNewDiv.div;return{drawingData:{toolId:freeDrawObj.toolId,id,style:freeDrawObj.style,customData:deserializeCustomData(customData),containerDiv:div,element:null,coords:freeDrawObj.coords},div,containerState}}function addToContainer(data,ele){data.containerDiv.innerHTML="",data.containerDiv.appendChild(ele),data.element=ele}function applyRotation(ele,containerState){ele.style.transform="rotate("+containerState.rotation+"deg)"}var deserializeFreeDraw=function deserializeFreeDraw(obj,ctx){var _containerState$scale,_containerState$scale2,shouldAddToCanvas=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_deserializationSetup=deserializationSetup(obj),drawingData=_deserializationSetup.drawingData,div=_deserializationSetup.div,containerState=_deserializationSetup.containerState,originalBounds=drawingData.customData.get(constants.Y8),bbox=containerState.bbox;setDivToBounds(div,originalBounds),shouldAddToCanvas&&(0,utils_utils.rW)(ctx,drawingData);var newSvg=createSvg(originalBounds.width,originalBounds.height,drawingData.style.opacity);newSvg.setAttribute("viewbox",containerState.other.viewbox),newSvg.style.overflow="visible";var newPath=svgPathFromData(drawingData,ctx.viewContainer);return newPath.style.transform="scale("+(null===(_containerState$scale=containerState.scale)||void 0===_containerState$scale?void 0:_containerState$scale.x)+", "+(null===(_containerState$scale2=containerState.scale)||void 0===_containerState$scale2?void 0:_containerState$scale2.y)+")",newSvg.appendChild(newPath),addToContainer(drawingData,newSvg),applyRotation(newSvg,containerState),setDivToBounds(div,bbox),drawingData},deserializeSquare=function deserializeSquare(intermedObj,ctx,shouldAddToCanvas){var _deserializationSetup2=deserializationSetup(intermedObj),drawingData=_deserializationSetup2.drawingData,containerState=_deserializationSetup2.containerState,div=_deserializationSetup2.div;return addToContainer(drawingData,makeSquareDiv(intermedObj.style)),applyRotation(div,containerState),setDivToBounds(div,containerState.bbox),shouldAddToCanvas&&(0,utils_utils.rW)(ctx,drawingData),drawingData},deserializeCircle=function deserializeCircle(obj,ctx,shouldAddToCanvas){var _deserializationSetup3=deserializationSetup(obj),drawingData=_deserializationSetup3.drawingData,containerState=_deserializationSetup3.containerState,div=_deserializationSetup3.div;return setDivToBounds(div,containerState.bbox),addToContainer(drawingData,makeCircleDiv(drawingData.style)),applyRotation(div,containerState),shouldAddToCanvas&&(0,utils_utils.rW)(ctx,drawingData),drawingData},deserializeDiamond=function deserializeDiamond(obj,ctx,shouldAdd){var _deserializationSetup4=deserializationSetup(obj),drawingData=_deserializationSetup4.drawingData,div=_deserializationSetup4.div,containerState=_deserializationSetup4.containerState,originalBounds=drawingData.customData.get(constants.Y8),bbox=containerState.bbox;setDivToBounds(div,originalBounds),shouldAdd&&(0,utils_utils.rW)(ctx,drawingData);var newSvg=makeDiamondSvg(drawingData);newSvg.setAttribute("viewbox",containerState.other.viewbox),newSvg.style.overflow="visible";var _containerState$scale3,_containerState$scale4,innerPath=newSvg.getElementsByTagName("path")[0];innerPath&&(innerPath.style.transform="scale("+(null===(_containerState$scale3=containerState.scale)||void 0===_containerState$scale3?void 0:_containerState$scale3.x)+", "+(null===(_containerState$scale4=containerState.scale)||void 0===_containerState$scale4?void 0:_containerState$scale4.y)+")");return addToContainer(drawingData,newSvg),applyRotation(newSvg,containerState),setDivToBounds(div,bbox),drawingData},deserializeLine=function deserializeLine(obj,ctx,shouldAdd){var _deserializationSetup5=deserializationSetup(obj),drawingData=_deserializationSetup5.drawingData,div=_deserializationSetup5.div,containerState=_deserializationSetup5.containerState,orientation=drawingData.customData.get(constants.QP);setDivToBounds(div,containerState.bbox),shouldAdd&&(0,utils_utils.rW)(ctx,drawingData);var newSvg=makeLineInOrientation(drawingData,orientation);return newSvg.setAttribute("viewbox",containerState.other.viewbox),newSvg.style.overflow="visible",addToContainer(drawingData,newSvg),applyRotation(newSvg,containerState),drawingData},deserializeTextArea=function deserializeTextArea(obj,ctx,shouldAdd){var _deserializationSetup6=deserializationSetup(obj),drawingData=_deserializationSetup6.drawingData,containerState=_deserializationSetup6.containerState,div=_deserializationSetup6.div;return setupTextAreaDiv(drawingData,ctx),div.innerHTML=containerState.other.text,setDivToBounds(div,containerState.bbox),applyRotation(div,containerState),shouldAdd&&(0,utils_utils.rW)(ctx,drawingData),drawingData},deserializeArrow=function deserializeArrow(obj,ctx,shouldAdd){var _deserializationSetup7=deserializationSetup(obj),drawingData=_deserializationSetup7.drawingData,div=_deserializationSetup7.div,containerState=_deserializationSetup7.containerState,orientation=drawingData.customData.get(constants.QP);setDivToBounds(div,containerState.bbox),shouldAdd&&(0,utils_utils.rW)(ctx,drawingData);var newSvg=makeArrowSvg(drawingData,orientation);return newSvg.setAttribute("viewbox",containerState.other.viewbox),newSvg.style.overflow="visible",addToContainer(drawingData,newSvg),applyRotation(newSvg,containerState),drawingData};function deserializeCustomData(customData){var data=new Map;for(var _key3 in customData){var value=customData[_key3];data.set(_key3,value)}return data}__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function createText(ctx,options){var toolId=options.toolId,text=options.text,viewLocation=options.viewLocation,editable=options.editable,useTextToolDefaults=options.useTextToolDefaults,location=null!=viewLocation?viewLocation:(0,utils_utils.gZ)(ctx),newDrawingData=(0,utils_utils.tA)(ctx,location,toolId);if(useTextToolDefaults){var textCursor=setupTextAreaDiv(newDrawingData,ctx);return textCursor.innerHTML=text,(0,utils_utils.rW)(ctx,newDrawingData),placeCaretAtEnd(textCursor),newDrawingData}var textWrapper=document.createElement("div");textWrapper.style.width="fit-content",textWrapper.innerText=text;var containerDiv=newDrawingData.containerDiv;containerDiv.appendChild(textWrapper),newDrawingData.element=textWrapper,(0,utils_utils.rW)(ctx,newDrawingData);var boundOfText=textWrapper.getBoundingClientRect();return containerDiv.style.width=boundOfText.width+"px",containerDiv.style.height=boundOfText.height+"px",containerDiv.style.display="flex",containerDiv.style.justifyContent="center",containerDiv.style.alignItems="center",(0,updateStyles_utils.s3)(newDrawingData),editable?(textWrapper.setAttribute("tabindex","1"),textWrapper.contentEditable="true",toolId===TextAreaTool.id&&addCaptureHandler(newDrawingData,ctx),newDrawingData):(textWrapper.contentEditable="false",newDrawingData)}function publicUtils_createCircle(ctx,options){var newDrawingObject=(0,utils_utils.tA)(ctx,options.pointA,options.toolId),newCircle=makeCircleDiv(ctx.globalStyles);return newDrawingObject.containerDiv.appendChild(newCircle),newDrawingObject.element=newCircle,newDrawingObject.coords.push(options.pointB),(0,utils.X5)(newDrawingObject),(0,utils_utils.rW)(ctx,newDrawingObject),ctx.selectObject(newDrawingObject),newDrawingObject}function getLoadingPlaceholder(){var styleEle=document.createElement("style");styleEle.innerHTML=".skeleton-loader {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tbackground: linear-gradient(\n\t\t\t\t\t\t\tto right,\n\t\t\t\t\t\t\trgba(255, 255, 255, 0),\n\t\t\t\t\t\t\trgba(255, 255, 255, 0.5) 50%,\n\t\t\t\t\t\t\trgba(255, 255, 255, 0) 80%\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlightgray;\n\t\t\t\t\tbackground-repeat: repeat-y;\n\t\t\t\t\tbackground-size: 50px 500px;\n\t\t\t\t\tbackground-position: 0 0;\n\t\t\t\t\tanimation: shine 1s infinite;\n\t\t\t\t}\n\t\t\t\t@keyframes shine {\n\t\t\t\t\tto {\n\t\t\t\t\t\tbackground-position: 100% 0, /* move highlight to right */ 0 0;\n\t\t\t\t\t}\n\t\t\t\t}";var loadingEle=document.createElement("div");loadingEle.appendChild(styleEle),loadingEle.style.width="100%",loadingEle.style.height="100%";var innerEle=document.createElement("span");return innerEle.className="skeleton-loader",loadingEle.appendChild(innerEle),loadingEle}function createImage(_x,_x2){return _createImage.apply(this,arguments)}function _createImage(){return _createImage=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(ctx,options){var newData,imageUrl;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return newData=(0,utils_utils.tA)(ctx,options.pointA,options.toolId),(0,utils_utils.rW)(ctx,newData),newData.coords.push(options.pointB),(0,utils.X5)(newData),imageUrl=options.url,_context.abrupt("return",new Promise((function(resolve,reject){var handleImageLoaded=function handleImageLoaded(img){newData.element=img,newData.containerDiv.innerHTML="",newData.containerDiv.appendChild(img),ctx.shouldSelectAfterCreate&&ctx.selectObject(newData),resolve(newData)};if(imageUrl){if(options.showLoading){var _options$loadingEleme,loadingEle=null!==(_options$loadingEleme=options.loadingElement)&&void 0!==_options$loadingEleme?_options$loadingEleme:getLoadingPlaceholder();newData.containerDiv.appendChild(loadingEle)}var img=new Image;return img.style.width="100%",img.style.height="100%",img.crossOrigin="anonymous",img.onload=function(){handleImageLoaded(img)},img.onerror=function(){reject(null)},img.src=imageUrl,newData}var htmlImage=options.image;if(!htmlImage)throw new Error("createImage must be given either url (string) or image (HTMLImageElement) options. Neither provided.");handleImageLoaded(htmlImage)})));case 6:case"end":return _context.stop()}}),_callee)}))),_createImage.apply(this,arguments)}function selectAll(ctx){var selectedIds=(0,select_utils.sy)(ctx),currentlySelected=(0,getSelectedDrawingObjects.K)(selectedIds,ctx.objectsMap);currentlySelected.length>0&&(0,select_utils.HF)(currentlySelected,ctx);var idsToSelect=Array.from(ctx.objectsMap.keys());ctx.fullState[constants.xV].selectedIds=idsToSelect;var objectsToSelect=Array.from(ctx.objectsMap.values());return 1===objectsToSelect.length?((0,select_utils.DB)(ctx.drawingTools,objectsToSelect[0],ctx),(0,select_utils.G7)(objectsToSelect[0],ctx)):objectsToSelect.length>1?(0,select_utils.os)(objectsToSelect,ctx):void 0}function getSelectedObjects(ctx){var selectedIds=(0,select_utils.sy)(ctx);return(0,getSelectedDrawingObjects.K)(selectedIds,ctx.objectsMap)}},"./src/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>isDrawingTool,m:()=>isActionTool});__webpack_require__("./src/constants.ts");function isDrawingTool(tool){return void 0!==tool.onDrawStart}function isActionTool(tool){return void 0!==tool.getDisplayMode}},"./src/utils/alertAfterUpdate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>alertAfterUpdate});__webpack_require__("./node_modules/core-js/modules/es.array.find.js");function alertAfterUpdate(data,ctx){var toolId=data.toolId,tool=ctx.drawingTools.find((function(t){return t.id===toolId}));tool&&tool.onAfterUpdate&&tool.onAfterUpdate(data,ctx)}},"./src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Fb:()=>expandContainer,Je:()=>isRectBounding,Ni:()=>isPointWithinBounds,RZ:()=>getBoxSize,TE:()=>distance,X5:()=>setContainerRect,YO:()=>makeid,Zc:()=>makeBoundingRect,bH:()=>scaleSvg,eM:()=>makeNewBoundingDiv,jU:()=>isBrowser,ti:()=>mapPointToRect,wG:()=>makeNewDiv,zZ:()=>getNumFrom});__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeid(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<length;i++)result+=characters.charAt(Math.floor(62*Math.random()));return result}function isBrowser(){return void 0!==typeof window}function makeNewBoundingDiv(relativePoint,stylesToInitialize,toolId){var _stylesToInitialize$z;if(!isBrowser())throw new Error("new bounding div called on the server.");var lineWidth=parseInt(stylesToInitialize.lineWidth),zIndex=parseInt(null!==(_stylesToInitialize$z=stylesToInitialize.zIndex)&&void 0!==_stylesToInitialize$z?_stylesToInitialize$z:"0"),_relativePoint=_slicedToArray(relativePoint,2),_makeNewDiv=makeNewDiv(_relativePoint[0],_relativePoint[1],lineWidth,toolId,zIndex),id=_makeNewDiv.id;return{coords:[relativePoint],element:null,toolId,containerDiv:_makeNewDiv.div,id,style:Object.assign({},stylesToInitialize),customData:new Map}}function makeNewDiv(pointX,pointY,lineWidth,toolId,zIndex){var id=makeid(6),div=document.createElement("div"),left=pointX-lineWidth,top=pointY-lineWidth;return div.id=toolId+"-"+id,div.style.width=2*lineWidth+"px",div.style.height=2*lineWidth+"px",div.style.position="absolute",div.style.left=left+"px",div.style.top=top+"px",div.style.pointerEvents="none",div.style.zIndex=zIndex.toString(),div.style.boxSizing="border-box",{div,id,top,left,right:left+lineWidth+lineWidth,bottom:top+lineWidth+lineWidth}}function scaleSvg(svgEle,bounds){var _getOriginalDimension=function getOriginalDimensions(svg){var viewBox=svg.getAttribute("viewbox");if(!viewBox)throw new Error("no viewbox found on ele");var each=viewBox.split(" ");return{width:parseFloat(each[2]),height:parseFloat(each[3])}}(svgEle),width=_getOriginalDimension.width,height=_getOriginalDimension.height,widthDiff=(bounds.right-bounds.left)/width,heightDiff=(bounds.bottom-bounds.top)/height;svgEle.lastElementChild.style.transform="scale("+widthDiff+", "+heightDiff+")"}function mapPointToRect(point,containerDiv,viewContainer){var containerBounds=containerDiv.getBoundingClientRect(),viewBounds=viewContainer.getBoundingClientRect(),topOfCotainerRelativeToView=containerBounds.top-viewBounds.top,pointYRelativeToContainer=point[1]-topOfCotainerRelativeToView,leftOfContainerRelativeToView=containerBounds.left-viewBounds.left;return[point[0]-leftOfContainerRelativeToView,pointYRelativeToContainer]}function expandContainer(data){var didExapnd=!1,_data$coords=_slicedToArray(data.coords[data.coords.length-1],2),newX=_data$coords[0],newY=_data$coords[1],container=data.containerDiv,bounds=getBoxSize(data),lineWidth=parseInt(data.style.lineWidth);if(newX-lineWidth<=bounds.left){var newLeft=newX-lineWidth,diff=bounds.left-newLeft;container.style.left=newLeft+"px",container.style.width=bounds.width+diff+"px",didExapnd=!0}else newX+lineWidth>=bounds.right&&(container.style.width=newX+2*lineWidth-bounds.left+"px",didExapnd=!0);if(newY+lineWidth>=bounds.bottom)container.style.height=newY+2*lineWidth-bounds.top+"px",didExapnd=!0;else if(newY-lineWidth<=bounds.top){var newTop=newY-lineWidth,_diff=bounds.top-newTop;container.style.top=newTop+"px",container.style.height=bounds.height+_diff+"px",didExapnd=!0}return didExapnd}function setContainerRect(data){if(data.coords.length<2)throw new Error("data coords must be at least length 2");var _data$coords$=_slicedToArray(data.coords[0],2),firstX=_data$coords$[0],firstY=_data$coords$[1],_data$coords2=_slicedToArray(data.coords[data.coords.length-1],2),lastX=_data$coords2[0],lastY=_data$coords2[1],minX=(parseInt(data.style.lineWidth),Math.min(firstX,lastX)),minY=Math.min(firstY,lastY),maxX=Math.max(firstX,lastX),maxY=Math.max(firstY,lastY),div=data.containerDiv;return div.style.top=minY+"px",div.style.left=minX+"px",div.style.width=Math.max(maxX-minX,1)+"px",div.style.height=Math.max(maxY-minY,1)+"px",data.coords}function isRectBounding(bounds,object){return bounds.top<=object.top&&bounds.bottom>=object.bottom&&bounds.left<=object.left&&bounds.right>=object.right}function isPointWithinBounds(bounds,point){var _point=_slicedToArray(point,2),x=_point[0],y=_point[1],width=bounds.width,height=bounds.height;return width/2>=x&&-width/2<=x&&height/2>=y&&-height/2<=y}function distance(pointA,pointB){return Math.sqrt(Math.pow(Math.abs(pointA[0]-pointB[0]),2)+Math.pow(Math.abs(pointA[1]-pointB[1]),2))}function makeBoundingRect(point){var _point2=_slicedToArray(point,2),x=_point2[0],y=_point2[1];return{top:y,right:x,bottom:y,left:x}}function getBoxSize(data){var div=data.containerDiv,bbox=div.getBoundingClientRect(),left=getNumFrom(div.style.left),top=getNumFrom(div.style.top),styleHeight=getNumFrom(div.style.height),styleWidth=getNumFrom(div.style.width),height=0===styleHeight?bbox.height:styleHeight,width=0===styleWidth?bbox.width:styleWidth;return{left,top,height,width,right:left+width,bottom:top+height}}var numRegex=/-?\d+\.*\d*/;function getNumFrom(str){var match=str.match(numRegex);return match?parseFloat(match[0]):0}},"./src/utils/pushActionToStack.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>pushActionToStack});__webpack_require__("./node_modules/core-js/modules/es.array.splice.js");function pushActionToStack(action,ctx){ctx.shouldKeepHistory&&(ctx.undoStack.push(action),ctx.redoStack.splice(0))}},"./src/utils/readStyles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>getScaleFromSvg,o:()=>getZindexFromDiv});__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-int.js");var _updateStyles_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/utils/updateStyles/utils.ts"),scaleRegex=/\d+\.*\d*/g;function getScaleFromSvg(data){var scale=(0,_updateStyles_utils__WEBPACK_IMPORTED_MODULE_3__.Ep)(data).style.transform.match(scaleRegex);return scale?{x:scale[0],y:scale[1]}:{x:"1",y:"1"}}function getZindexFromDiv(div){return void 0===div.style.zIndex?0:parseInt(div.style.zIndex)}},"./src/utils/resizeObject.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CL:()=>unifiedResizeFunction,Cy:()=>getDiffCoords,NM:()=>round,QN:()=>getPointRelativeToOther,pe:()=>rotatePointAroundOrigin});__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var ___WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/utils/index.ts"),_select_getRotateFromDiv__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/utils/select/getRotateFromDiv.ts"),_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/utils/utils.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getDiffCoords(data,ctx){var center=(0,_utils__WEBPACK_IMPORTED_MODULE_13__.Lb)((0,___WEBPACK_IMPORTED_MODULE_11__.RZ)(data)),currRotation=(0,_select_getRotateFromDiv__WEBPACK_IMPORTED_MODULE_12__.O)(data.containerDiv);if(0===currRotation)return[ctx.newPoint[0]-ctx.previousPoint[0],ctx.newPoint[1]-ctx.previousPoint[1]];var _getPointRelativeToOt2=_slicedToArray(getPointRelativeToOther(ctx.previousPoint,center),2),relativePrevX=_getPointRelativeToOt2[0],relativePrevY=_getPointRelativeToOt2[1],_getPointRelativeToOt4=_slicedToArray(getPointRelativeToOther(ctx.newPoint,center),2),relativeNewX=_getPointRelativeToOt4[0],relativeNewY=_getPointRelativeToOt4[1],rotatedPrev=rotatePointAroundOrigin(relativePrevX,relativePrevY,-currRotation);return getPointRelativeToOther(rotatePointAroundOrigin(relativeNewX,relativeNewY,-currRotation),rotatedPrev)}function unifiedResizeFunction(data,changeInCenter,changeInDimensions){var _changeInCenter=_slicedToArray(changeInCenter,2),centerDx=_changeInCenter[0],centerDy=_changeInCenter[1],_changeInDimensions=_slicedToArray(changeInDimensions,2),dX=_changeInDimensions[0],dY=_changeInDimensions[1],bounds=(0,___WEBPACK_IMPORTED_MODULE_11__.RZ)(data),div=data.containerDiv,currentRotation=(0,_select_getRotateFromDiv__WEBPACK_IMPORTED_MODULE_12__.O)(div),_getCenterPoint2=_slicedToArray((0,_utils__WEBPACK_IMPORTED_MODULE_13__.Lb)(bounds),2),previousCenterX=_getCenterPoint2[0],previousCenterY=_getCenterPoint2[1],_rotatePointAroundOri2=_slicedToArray(rotatePointAroundOrigin(centerDx,centerDy,currentRotation),2),newNormalizedCenterX=_rotatePointAroundOri2[0],newNormalizedCenterY=_rotatePointAroundOri2[1],newHeight=bounds.height+dY,newWidth=bounds.width+dX,newTop=previousCenterY-(newNormalizedCenterY+newHeight/2),newLeft=newNormalizedCenterX-newWidth/2+previousCenterX;div.style.top=newTop+"px",div.style.left=newLeft+"px",div.style.width=newWidth+"px",div.style.height=newHeight+"px"}function getPointRelativeToOther(point,other){var _other=_slicedToArray(other,2),previousCenterX=_other[0],previousCenterY=_other[1],_point=_slicedToArray(point,2);return[_point[0]-previousCenterX,previousCenterY-_point[1]]}var RESIZE_ROUNDING=5;function rotatePointAroundOrigin(x,y,theta){var radians=theta*(Math.PI/180),rotatedX=x*Math.cos(radians)+y*Math.sin(radians),rotatedY=-x*Math.sin(radians)+y*Math.cos(radians);return[round(rotatedX,RESIZE_ROUNDING),round(rotatedY,RESIZE_ROUNDING)]}function round(num,decimals){var multiplier=Math.pow(10,decimals);return Math.round(num*multiplier)/multiplier}},"./src/utils/select/getRotateFromDiv.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>getRotateFromDiv});__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js");var rotateNumRegex=/-{0,1}\d+\.*\d*/g;function getRotateFromDiv(div){var rotateStyle=div.style.transform;if(!rotateStyle)return 0;var match=rotateStyle.match(rotateNumRegex);return match?parseFloat(match[0]):0}},"./src/utils/select/getSelectedDrawingObjects.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>getSelectedDrawingObjects});__webpack_require__("./node_modules/core-js/modules/es.array.map.js");function getSelectedDrawingObjects(selectedIds,objects){return selectedIds.map((function(id){var object=objects.get(id);if(!object)throw new Error("object not found in map");return object}))}},"./src/utils/select/unselectElement.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>unselectElement});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _constants__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/constants.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function unselectElement(data,ctx){var objectId=data.id,div=data.containerDiv,state=ctx.fullState[_constants__WEBPACK_IMPORTED_MODULE_13__.xV],handlers=state.handlers[objectId];if(handlers){var _step,_iterator=_createForOfIteratorHelper(handlers);try{for(_iterator.s();!(_step=_iterator.n()).done;){var handler=_step.value;handler.ele.removeEventListener(handler.eventName,handler.fn)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}var selectFrame=div.querySelector('[id^="select-frame"');state.handlers[objectId]=[],null!==selectFrame&&div.removeChild(selectFrame);var indexInSelectedIds=state.selectedIds.indexOf(objectId);indexInSelectedIds>=0&&state.selectedIds.splice(indexInSelectedIds,1)}},"./src/utils/select/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sy:()=>getSelectedIdsFromFullState,DB:()=>notifyTool,G7:()=>selectElement,os:()=>selectManyElements,HF:()=>unselectAll,dt:()=>unselectEverythingAndReturnPrevious});__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var constants=__webpack_require__("./src/constants.ts"),resizeObject=__webpack_require__("./src/utils/resizeObject.ts"),utils=__webpack_require__("./src/utils/index.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function forcePreserveAspectRatio(_ref,data,direction){var _ref2=_slicedToArray(_ref,2),dX=_ref2[0],dY=_ref2[1],_getBoxSize=(Math.abs(dX),Math.abs(dY),(0,utils.RZ)(data)),currentAspectRatio=_getBoxSize.width/_getBoxSize.height,aspectX=function getXFunction(direction){return function(input){var dir=direction[0],x=Math.abs(input.dX),y=Math.abs(input.dY),changeAr=x/y;switch(dir){case"E":case"W":return 0===input.dY||changeAr>input.currAR?input.dX:y*input.currAR*input.dirFlag*input.reverseFlag;default:return input.dX}}}(direction),aspectY=function getYFunction(direction){return function(input){var x=Math.abs(input.dX),changeAr=x/Math.abs(input.dY);switch(direction[0]){case"N":case"S":return 0===input.dX||changeAr<input.currAR?input.dY:x/input.currAR*input.dirFlag*input.reverseFlag;default:return input.dY}}}(direction),reverseFlag=function getReverseFlag(direction){if("S"===direction[1]||"W"===direction[1])return-1;return 1}(direction),dirFlag=function getDirectionFlag(direction,dX,dY){switch(direction[0]){case"N":return dX<0?1:-1;case"S":return dX<0?-1:1;case"E":return dY<0?1:-1;case"W":return dY<0?-1:1}return 1}(direction,dX,dY),inputs={dX,dY,currAR:currentAspectRatio,dirFlag,reverseFlag};return[aspectX(inputs),aspectY(inputs)]}function resizeN_slicedToArray(arr,i){return function resizeN_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeN_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function resizeN_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeN_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeN_arrayLikeToArray(o,minLen)}(arr,i)||function resizeN_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeN_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resizeN(data,ctx,preserveAR){var dXdY=(0,resizeObject.Cy)(data,ctx);if(void 0!==preserveAR){var _forcePreserveAspectR2=resizeN_slicedToArray(forcePreserveAspectRatio(dXdY,data,preserveAR),2),yDiff=(_forcePreserveAspectR2[0],_forcePreserveAspectR2[1]);return(0,resizeObject.CL)(data,[0,-yDiff/2],[0,-yDiff])}(0,resizeObject.CL)(data,[0,-dXdY[1]/2],[0,-dXdY[1]])}function resizeW_slicedToArray(arr,i){return function resizeW_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeW_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function resizeW_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeW_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeW_arrayLikeToArray(o,minLen)}(arr,i)||function resizeW_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeW_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resizeW(data,ctx,preserveAR){var dXdY=(0,resizeObject.Cy)(data,ctx);if(void 0!==preserveAR){var _forcePreserveAspectR2=resizeW_slicedToArray(forcePreserveAspectRatio(dXdY,data,preserveAR),2),xDiff=_forcePreserveAspectR2[0];_forcePreserveAspectR2[1];return(0,resizeObject.CL)(data,[xDiff/2,0],[-xDiff,0])}(0,resizeObject.CL)(data,[dXdY[0]/2,0],[-dXdY[0],0])}function resizeS_slicedToArray(arr,i){return function resizeS_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeS_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function resizeS_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeS_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeS_arrayLikeToArray(o,minLen)}(arr,i)||function resizeS_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeS_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resizeS(data,ctx,preserveAR){var dXdY=(0,resizeObject.Cy)(data,ctx);if(void 0!==preserveAR){var _forcePreserveAspectR2=resizeS_slicedToArray(forcePreserveAspectRatio(dXdY,data,preserveAR),2),yDiff=(_forcePreserveAspectR2[0],_forcePreserveAspectR2[1]);return(0,resizeObject.CL)(data,[0,-yDiff/2],[0,yDiff])}(0,resizeObject.CL)(data,[0,-dXdY[1]/2],[0,dXdY[1]])}function resizeSW(data,ctx){resizeS(data,ctx,"SW"),resizeW(data,ctx,"WS")}function resizeE_slicedToArray(arr,i){return function resizeE_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function resizeE_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function resizeE_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return resizeE_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return resizeE_arrayLikeToArray(o,minLen)}(arr,i)||function resizeE_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function resizeE_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resizeE(data,ctx,preserveAR){var dXdY=(0,resizeObject.Cy)(data,ctx);if(void 0!==preserveAR){var _forcePreserveAspectR2=resizeE_slicedToArray(forcePreserveAspectRatio(dXdY,data,preserveAR),2),xDiff=_forcePreserveAspectR2[0];_forcePreserveAspectR2[1];return(0,resizeObject.CL)(data,[xDiff/2,0],[xDiff,0])}(0,resizeObject.CL)(data,[dXdY[0]/2,0],[dXdY[0],0])}function resizeSE(data,ctx){resizeE(data,ctx,"ES"),resizeS(data,ctx,"SE")}function resizeNW(data,ctx){resizeN(data,ctx,"NW"),resizeW(data,ctx,"WN")}function resizeNE(data,ctx){resizeN(data,ctx,"NE"),resizeE(data,ctx,"EN")}var utils_utils=__webpack_require__("./src/utils/utils.ts"),ROTATE_BUTTON_PRE="button-rotate",SELECT_FRAME_PRE="select-frame",CORNER_BUTTON_PRE="corner-button",ROTATE_BUTTON_STYLES={top:"-45px",cursor:"grab",left:"calc(50% - 8px)"},SELECT_FRAME_DIV_STYLES={width:"calc(100% + 16px)",height:"calc(100% + 16px)",position:"absolute",border:"2px dotted "+constants.DM.primary.main,top:"-6px",left:"-6px",cursor:"all-scroll",pointerEvents:"all",boxSizing:"border-box"},ROTATE_DOTTED_LINE_STYLES={width:"0px",height:"35px",borderLeft:"2px dotted black",position:"absolute",left:"5px",pointerEvents:"none"},SELECTED_BUTTON_WIDTH=16,SELECTED_BUTTON_HEIGHT=16,SELECTED_CORNER_BUTTON={position:"absolute",borderRadius:"50%",width:SELECTED_BUTTON_WIDTH+"px",height:SELECTED_BUTTON_HEIGHT+"px"},getSelectedDrawingObjects=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts")),alertAfterUpdate=__webpack_require__("./src/utils/alertAfterUpdate.ts"),pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts");function dragDivs_slicedToArray(arr,i){return function dragDivs_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function dragDivs_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||dragDivs_unsupportedIterableToArray(arr,i)||function dragDivs_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dragDivs_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return dragDivs_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dragDivs_arrayLikeToArray(o,minLen):void 0}}function dragDivs_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function dragDivs(objects,prevPoint,newPoint){var _step,_newPoint=dragDivs_slicedToArray(newPoint,2),currentMouseX=_newPoint[0],currentMouseY=_newPoint[1],_prevPoint=dragDivs_slicedToArray(prevPoint,2),newLeft=currentMouseX-_prevPoint[0],newTop=currentMouseY-_prevPoint[1],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=dragDivs_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(objects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,div=obj.containerDiv,bounds=(0,utils.RZ)(obj),left=bounds.left,top=bounds.top;div.style.top=top+newTop+"px",div.style.left=left+newLeft+"px"}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function startDragging(ctx,relativePoint){var state=ctx.fullState[constants.xV],prevPoint=state.prevPoint;if(prevPoint){var selectedObjects=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap);dragDivs(selectedObjects,prevPoint,relativePoint),state.prevPoint=relativePoint,1===selectedObjects.length&&(0,alertAfterUpdate.x)(selectedObjects[0],ctx)}else console.error("handleDrag prev point not set")}function startDrag(ctx,relativePoint){ctx.fullState[constants.xV].prevPoint=relativePoint,function pushDragToUndoStack(ctx){var state=ctx.fullState[constants.xV],selectedObjects=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap),action={objectId:"",toolId:constants.xV,toolType:"top-bar-tool",action:"drag",data:selectedObjects.map((function(o){var bounds=(0,utils.RZ)(o);return{objectId:o.id,top:bounds.top,left:bounds.left}}))};(0,pushActionToStack.P)(action,ctx)}(ctx)}function stopDrag(ctx){ctx.fullState[constants.xV].prevPoint=null}function addHandlersToSelectFrame(selectFrame,objectId,ctx){var handleStartDrag=function handleStartDrag(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("mousemove",handleDrag),window.addEventListener("mouseup",handleStopDrag)},handleDrag=function handleDrag(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDrag=function handleStopDrag(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("mousemove",handleDrag),window.removeEventListener("mouseup",handleStopDrag)},handleStartDragTouch=function handleStartDragTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("touchmove",handleDragTouch,{passive:!0}),window.addEventListener("touchend",handleStopDragTouch,{passive:!0}),window.addEventListener("touchcancel",handleStopDragTouch,{passive:!0})},handleDragTouch=function handleDragTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDragTouch=function handleStopDragTouch(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("touchmove",handleDragTouch),window.removeEventListener("touchend",handleStopDragTouch),window.removeEventListener("touchcancel",handleStopDragTouch)},customState=ctx.fullState[constants.xV],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartDrag}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartDragTouch}),selectFrame.addEventListener("mousedown",handleStartDrag),selectFrame.addEventListener("touchstart",handleStartDragTouch,{passive:!0})}function startResizing(ctx,relativePoint,resizeFn){var state=ctx.fullState[constants.xV],prevPoint=state.prevPoint;if(prevPoint){var selectedObject=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0],toolUsed=(0,utils_utils.uL)(ctx.drawingTools,data.toolId),newResizeCtx={viewContainer:ctx.viewContainer,newPoint:relativePoint,previousPoint:prevPoint,shouldPreserveAspectRatio:ctx.shouldCornerResizePreserveRatio};toolUsed.doResize?toolUsed.doResize(data,newResizeCtx):resizeFn(data,newResizeCtx),toolUsed.onResize(data,newResizeCtx),state.prevPoint=relativePoint}}function startResize(ctx,relativePoint){ctx.fullState[constants.xV].prevPoint=relativePoint,function pushResizeToUndoStack(ctx){var state=ctx.fullState[constants.xV],selectedObjects=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap);if(1!==selectedObjects.length)throw new Error("resize push to stack expects 1 object selected");var object=selectedObjects[0],bounds=(0,utils.RZ)(object),action={objectId:object.id,toolId:constants.xV,toolType:"top-bar-tool",action:"resize",data:{bounds:{top:bounds.top,left:bounds.left,right:bounds.right,bottom:bounds.bottom}}};(0,pushActionToStack.P)(action,ctx)}(ctx)}function stopResize(ctx){ctx.fullState[constants.xV].prevPoint=null}function addHandlersToCornerButton(buttonEle,objectId,ctx,resizeFn){var handleStartResizeMouse=function handleStartResizeMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("mousemove",handleResizeMouse),window.addEventListener("mouseup",handleStopResizeMouse)},handleResizeMouse=function handleResizeMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeMouse=function handleStopResizeMouse(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("mousemove",handleResizeMouse),window.removeEventListener("mouseup",handleStopResizeMouse)},handleStartResizeTouch=function handleStartResizeTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("touchmove",handleResizeTouch,{passive:!0}),window.addEventListener("touchend",handleStopResizeTouch,{passive:!0}),window.addEventListener("touchcancel",handleStopResizeTouch,{passive:!0})},handleResizeTouch=function handleResizeTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeTouch=function handleStopResizeTouch(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("touchmove",handleResizeTouch),window.removeEventListener("touchend",handleStopResizeTouch),window.removeEventListener("touchcancel",handleStopResizeTouch)},customState=ctx.fullState[constants.xV],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:buttonEle,eventName:"mousedown",fn:handleStartResizeMouse}),handlers.push({ele:buttonEle,eventName:"touchstart",fn:handleStartResizeTouch}),buttonEle.addEventListener("mousedown",handleStartResizeMouse),buttonEle.addEventListener("touchstart",handleStartResizeTouch,{passive:!0})}var getRotateFromDiv=__webpack_require__("./src/utils/select/getRotateFromDiv.ts");function startRotating(ctx,relativePoint){var state=ctx.fullState[constants.xV];if(state.prevPoint){var selectedObject=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0];!function rotateDiv(object,newPoint,referenceCenter){var div=object.containerDiv,x=newPoint[0]-referenceCenter[0],y=newPoint[1]-referenceCenter[1],angleDeg=180*Math.atan2(y,x)/Math.PI+90;div.style.transform="rotate("+(0,resizeObject.NM)(angleDeg,5)+"deg)"}(data,relativePoint,(0,utils_utils.Lb)((0,utils.RZ)(data))),state.prevPoint=relativePoint,(0,alertAfterUpdate.x)(data,ctx)}}function startRotate(ctx,relativePoint){ctx.fullState[constants.xV].prevPoint=relativePoint,function pushRotateToUndoStack(ctx){var state=ctx.fullState[constants.xV],selectedObjects=(0,getSelectedDrawingObjects.K)(state.selectedIds,ctx.objectsMap),action={objectId:"",toolId:constants.xV,toolType:"top-bar-tool",action:"rotate",data:selectedObjects.map((function(o){return{objectId:o.id,rotate:(0,getRotateFromDiv.O)(o.containerDiv)}}))};(0,pushActionToStack.P)(action,ctx)}(ctx)}function stopRotate(ctx){ctx.fullState[constants.xV].prevPoint=null}var unselectElement=__webpack_require__("./src/utils/select/unselectElement.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return utils_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||utils_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function utils_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function utils_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?utils_arrayLikeToArray(o,minLen):void 0}}function utils_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function selectManyElements(selectObjects,ctx){var _step,_iterator=utils_createForOfIteratorHelper(selectObjects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var data=_step.value,selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.id,ctx),data.containerDiv.appendChild(selectFrame))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function makeSelectFrameDiv(data){var containerDiv=data.containerDiv,objectId=data.id;if(function isElementSelected(div){return null!==div.querySelector('[id^="select-frame"')}(containerDiv))return null;var div=document.createElement("div");return div.setAttribute("id",SELECT_FRAME_PRE+"-"+objectId),(0,utils_utils.tt)(div,SELECT_FRAME_DIV_STYLES),div}function unselectEverythingAndReturnPrevious(ctx){var selectedIds=_toConsumableArray(ctx.fullState[constants.xV].selectedIds),objectsMap=ctx.objectsMap,prevMousePosition=ctx.prevMousePosition,objects=(0,getSelectedDrawingObjects.K)(selectedIds,objectsMap);if(unselectAll(objects,ctx),1===objects.length){var tool=(0,utils_utils.uL)(ctx.drawingTools,objects[0].toolId);tool&&ctx&&tool.onUnSelect&&tool.onUnSelect(objects[0],ctx)}return prevMousePosition.current=null,{ids:selectedIds.splice(0,selectedIds.length),objects}}function notifyTool(tools,data,ctx){var tool=(0,utils_utils.uL)(tools,data.toolId);tool&&ctx&&tool.onSelect&&tool.onSelect(data,ctx)}function unselectAll(selectedObjects,ctx){var _step2,_iterator2=utils_createForOfIteratorHelper(selectedObjects);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value;(0,unselectElement.e)(obj,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}function selectElement(data,ctx){var selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.id,ctx),function addToolsToSelectionDiv(div,data,ctx){var eleId=data.id,topLeftCorner=createButtonWithOffsets(eleId,2,0,0,2);addHandlersToCornerButton(topLeftCorner,eleId,ctx,resizeNW);var topButton=createButtonWithOffsets(eleId,2,1);addHandlersToCornerButton(topButton,eleId,ctx,resizeN);var topRightCorner=createButtonWithOffsets(eleId,2,2);addHandlersToCornerButton(topRightCorner,eleId,ctx,resizeNE);var rightButton=createButtonWithOffsets(eleId,0,2,1);addHandlersToCornerButton(rightButton,eleId,ctx,resizeE);var bottomRightCorner=createButtonWithOffsets(eleId,0,2,2);addHandlersToCornerButton(bottomRightCorner,eleId,ctx,resizeSE);var bottomButton=createButtonWithOffsets(eleId,0,1,2);addHandlersToCornerButton(bottomButton,eleId,ctx,resizeS);var bottomLeftCorner=createButtonWithOffsets(eleId,0,0,2,2);addHandlersToCornerButton(bottomLeftCorner,eleId,ctx,resizeSW);var leftButton=createButtonWithOffsets(eleId,0,0,1,2);addHandlersToCornerButton(leftButton,eleId,ctx,resizeW),div.appendChild(topLeftCorner),div.appendChild(topButton),div.appendChild(topRightCorner),div.appendChild(rightButton),div.appendChild(bottomRightCorner),div.appendChild(bottomButton),div.appendChild(bottomLeftCorner),div.appendChild(leftButton);var rotateButton=createButtonWithOffsets(eleId);rotateButton.id=ROTATE_BUTTON_PRE+"-"+eleId,(0,utils_utils.tt)(rotateButton,ROTATE_BUTTON_STYLES),function addHandlersToRotateButton(selectFrame,objectId,ctx){var handleStartRotateMouse=function handleStartRotateMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("mousemove",handleRotateMouse),window.addEventListener("mouseup",handleStopRotateMouse)},handleRotateMouse=function handleRotateMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=(0,utils_utils.rs)(point,ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateMouse=function handleStopRotateMouse(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("mousemove",handleRotateMouse),window.removeEventListener("mouseup",handleStopRotateMouse)},handleStartRotateTouch=function handleStartRotateTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("touchmove",handleRotatingTouch,{passive:!0}),window.addEventListener("touchend",handleStopRotateTouch,{passive:!0}),window.addEventListener("touchcancel",handleStopRotateTouch,{passive:!0})},handleRotatingTouch=function handleRotatingTouch(e){e.stopPropagation();var startPoint=(0,utils_utils.Pw)(e),relativePoint=(0,utils_utils.rs)(startPoint,ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateTouch=function handleStopRotateTouch(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("touchmove",handleRotatingTouch),window.removeEventListener("touchend",handleStopRotateTouch),window.removeEventListener("touchcancel",handleStopRotateTouch)},customState=ctx.fullState[constants.xV],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartRotateMouse}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartRotateTouch}),selectFrame.addEventListener("mousedown",handleStartRotateMouse),selectFrame.addEventListener("touchstart",handleStartRotateTouch,{passive:!0})}(rotateButton,eleId,ctx);var divLine=document.createElement("div");(0,utils_utils.tt)(divLine,ROTATE_DOTTED_LINE_STYLES),divLine.id="line-div-"+eleId,rotateButton.appendChild(divLine),div.appendChild(rotateButton)}(selectFrame,data,ctx),data.containerDiv.appendChild(selectFrame))}var CORNER_BUTTON_OFFSET=-12;function createButtonWithOffsets(eleId){var top=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,right=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,bottom=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,left=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,button=document.createElement("button");(0,utils_utils.tt)(button,SELECTED_CORNER_BUTTON);var buttonId="";return 2===top&&(button.style.top=CORNER_BUTTON_OFFSET+"px",buttonId+="n"),2===bottom?(button.style.bottom=CORNER_BUTTON_OFFSET+"px",buttonId+="s"):1===bottom&&(button.style.bottom="calc(50% - "+SELECTED_BUTTON_HEIGHT/2+"px)"),2===right?(button.style.right=CORNER_BUTTON_OFFSET+"px",buttonId+="e"):1===right&&(button.style.right="calc(50% - "+SELECTED_BUTTON_WIDTH/2+"px)"),2===left&&(button.style.left=CORNER_BUTTON_OFFSET+"px",buttonId+="w"),button.id=CORNER_BUTTON_PRE+"-"+buttonId+"-"+eleId,button.style.cursor=buttonId+"-resize",button}function getSelectedIdsFromFullState(ctx){var selectState=ctx.fullState[constants.xV];if(!selectState)throw new Error("no select state present");return _toConsumableArray(selectState.selectedIds)}},"./src/utils/updateStyles/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function actionObjToSave(data,action,saveValue){return{objectId:data.id,toolId:data.toolId,toolType:"top-bar-tool",action,data:saveValue}}function setContainerStyles(data){var div=data.containerDiv;return div.style.backgroundColor=data.style.background,div.style.borderRadius="2px",div.style.boxSizing="border-box",div.style.color=data.style.color,div.style.opacity=data.style.opacity,div.style.fontSize=data.style.fontSize+"px",data}function getInnerEleFromSvg(data){var svg=data.element;if(!svg)throw new Error;var path=svg.querySelector("path");if(path||(path=svg.querySelector("line")),!path)throw new Error;return path}__webpack_require__.d(__webpack_exports__,{Ep:()=>getInnerEleFromSvg,s3:()=>setContainerStyles,wp:()=>actionObjToSave})},"./src/utils/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$Q:()=>deleteObjectAndNotify,Hm:()=>batchDelete,Lb:()=>getCenterPoint,Pw:()=>getTouchCoords,dv:()=>centerObject,ee:()=>makeDeleteAction,f4:()=>getCurrentHighestZIndex,gZ:()=>getViewCenterPoint,ge:()=>makeSureArtifactsGone,pT:()=>isNotUndefined,rW:()=>addObject,rs:()=>getRelativePoint,s7:()=>getObjectFromMap,tA:()=>createNewObject,tt:()=>setStyles,uL:()=>getToolById});__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js");var _select_unselectElement__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/utils/select/unselectElement.ts"),_pushActionToStack__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/utils/pushActionToStack.ts"),___WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/utils/index.ts"),_readStyles__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/utils/readStyles.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function setStyles(div,styles){for(var key in styles)div.style[key]=styles[key];return div}function getToolById(tools,toolId){var tool=tools.find((function(t){return t.id===toolId}));if(!tool)throw new Error("could not find the used tool");return tool}function deleteObjectAndNotify(objectId,ctx){var objectsMap=ctx.objectsMap,viewContainer=ctx.viewContainer,object=getObjectFromMap(ctx.objectsMap,objectId);(0,_select_unselectElement__WEBPACK_IMPORTED_MODULE_22__.e)(object,ctx);var containerDiv=object.containerDiv,id=object.id;viewContainer.removeChild(containerDiv),objectsMap.delete(id);var tool=getToolById(ctx.drawingTools,object.toolId);tool.onDeleteObject&&tool.onDeleteObject(object,ctx)}function getObjectFromMap(map,objectId){var object=map.get(objectId);if(!object)throw new Error("could not get object from map");return object}function getRelativePoint(point,container){if(!container)throw new Error("Container not set.");var rect=container.getBoundingClientRect();return[point[0]-rect.left,point[1]-rect.top]}function getTouchCoords(e){var touch=e.touches[0];return touch||(touch=e.targetTouches[0]),touch||(touch=e.changedTouches[0]),[touch.clientX,touch.clientY]}function getCenterPoint(bounds){var width=bounds.width,height=bounds.height,top=bounds.top;return[bounds.left+width/2,top+height/2]}function getViewCenterPoint(ctx){var bbox=ctx.viewContainer.getBoundingClientRect();return[bbox.width/2,bbox.height/2]}function makeSureArtifactsGone(query,container){var objects=container.querySelectorAll(query);objects.length>0&&objects.forEach((function(obj){container.removeChild(obj)}))}function isNotUndefined(item){return void 0!==item}function batchDelete(deleteIds,ctx){var _step,action={action:"batch",toolType:"batch",toolId:"",objectId:"",data:[]},couldNotDeleteToolsSet=new Set,_iterator=_createForOfIteratorHelper(deleteIds);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _tool$undoHandlers,objectId=_step.value,object=getObjectFromMap(ctx.objectsMap,objectId),toolId=object.toolId,tool=getToolById(ctx.drawingTools,toolId);if(ctx.shouldKeepHistory&&null!=tool&&null!==(_tool$undoHandlers=tool.undoHandlers)&&void 0!==_tool$undoHandlers&&_tool$undoHandlers.delete){var toolAction={action:"delete",toolType:"top-bar-tool",toolId,objectId,data:object};action.data.push(toolAction)}else couldNotDeleteToolsSet.add(toolId);deleteObjectAndNotify(objectId,ctx)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(ctx.shouldKeepHistory){if((0,_pushActionToStack__WEBPACK_IMPORTED_MODULE_23__.P)(action,ctx),couldNotDeleteToolsSet.size>0)for(var i=ctx.undoStack.length-1;i>=0;i--)couldNotDeleteToolsSet.has(ctx.undoStack[i].toolId)&&(ctx.undoStack.splice(i,1),i++)}else ctx.undoStack.splice(0)}function createNewObject(ctx,point,toolId){var styles=Object.assign({},ctx.globalStyles),nextZindex=getCurrentHighestZIndex(ctx)+1;return styles.zIndex=nextZindex.toString(),(0,___WEBPACK_IMPORTED_MODULE_24__.eM)(point,styles,toolId)}function addObject(ctx,obj){var containerDiv=obj.containerDiv,id=obj.id;ctx.viewContainer.appendChild(containerDiv),function updateZindex(obj,zIndex){obj.style.zIndex=zIndex.toString(),obj.containerDiv.style.zIndex=zIndex.toString()}(obj,getCurrentHighestZIndex(ctx)+1),ctx.objectsMap.set(id,obj)}function centerObject(ctx,obj,w,h){var viewBox=ctx.viewContainer.getBoundingClientRect(),div=obj.containerDiv;if(!w||!h){var _div$getBoundingClien=div.getBoundingClientRect(),width=_div$getBoundingClien.width,height=_div$getBoundingClien.height;w=w||width,h=h||height}var top=viewBox.height/2-h/2,left=viewBox.width/2-w/2;div.style.top=top+"px",div.style.left=left+"px",div.style.height=h+"px",div.style.width=w+"px"}function makeDeleteAction(ctx){return{toolId:"",toolType:"top-bar-tool",objectId:"",data:[],action:"delete"}}function getCurrentHighestZIndex(ctx){if(0===ctx.objectsMap.size)return 0;var allObjects=Array.from(ctx.objectsMap.values());return allObjects.sort((function(a,b){return(0,_readStyles__WEBPACK_IMPORTED_MODULE_25__.o)(b.containerDiv)-(0,_readStyles__WEBPACK_IMPORTED_MODULE_25__.o)(a.containerDiv)})),(0,_readStyles__WEBPACK_IMPORTED_MODULE_25__.o)(allObjects[0].containerDiv)}},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./stories/DrawingTools.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.h_,{title:"Drawing Tools",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h1",{id:"top-bar-tools-drawing-tools"},"Top Bar Tools (Drawing Tools)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"ReactDraw uses a plugin system for drawing tools.\nThis allows you to have full control over the functionality of the component.\nYou can import the tools you want, hook in to the drawing stages, and create your own tools.\nThe type definition of a drawing tool is described by the typescript below."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"icon: ")," the icon to be displayed in the top bar tools"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"id")," required so that react draw can identify objects created by this id"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"cursor")," sets the the cursor of the mouse while over the viewContainer"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"onDrawStart")," called on mousedown/touchstart. includes data like the coordinates, etc. (see more below)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"onDrawing")," called during each new point. (mousemove)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"onDrawEnd")," called after mouseup/touchend"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"onResize")," called when the object is being resized (corner expand action while using select tool)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"DrawingData")," includes the mouse coordinates, the container div, current styles, etc."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("strong",null,"viewContainer")," the div that is the react-draw full drawing area. This is used to help calculate relative coordinates.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"More of the types included in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"Type Descriptions")," page."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type DrawingTools = {\n  icon: JSX.Element;\n  tooltip?: string;\n  id: string;\n  setupCustomState?: (state: CustomState) => any;\n  onPickTool?: (ctx: ReactDrawContext) => void;\n  onUnPickTool?: (ctx: ReactDrawContext) => void;\n  onDrawStart: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDrawing: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDrawEnd: (data: DrawingData, ctx: ReactDrawContext) => void;\n  doResize?: (data: DrawingData, ctx: OnResizeContext) => void;\n  onResize: (data: DrawingData, ctx: OnResizeContext) => void;\n  onSelect?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onAfterUpdate?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onUnSelect?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDeleteObject?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onKeyPress?: (event: KeyboardEvent, ctx: ReactDrawContext) => void;\n  onUnMount?: (ctx: ReactDrawContext) => void;\n  onDuplicate?: (newData: DrawingData, ctx: ReactDrawContext) => DrawingData;\n  undoHandlers?: {\n    [action: ActionKey]: UndoHandler;\n  };\n  redoHandlers?: {\n    [action: ActionKey]: UndoHandler;\n  };\n  styleHandlers?: {\n    [key: keyof ToolPropertiesMap]: UpdateStyleHandler;\n  };\n  cursor?: string;\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"free-draw-tool"},"Free Draw Tool"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"For example here is the free draw tool implementation."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"During ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"onDrawStart")," the free draw tool creates a circle since there is only a single ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"data.coords `Point`"),". An svg element is created and then appended a child to the object container. The object container is a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"div"),"element that is created for you at the correct position in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,'"viewContainer"')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"During ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"onDrawing")," the tool must expand the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,'"viewContainer" div')," to be the correct dimensions. Then a new svg is created based on the"," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"data.coords")," information. It's important to note that the"," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"data.coords")," points are ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"[x, y]")," coordinates relative to the"," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"viewContainer"),". Drawing in the top left corner of the drawing area will be represented by ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"[0, 0]")," and the bottom right corner is represented by"," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"[width, height]"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"During ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"onDrawEnd")," no more work needs to be done."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"During ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("b",null,"onResize")," the div has been set to the correct dimensions for you and so we need to take care of scaling the svg inside."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},'const freeDrawTool: DrawingTools = {\n  id: "free-draw-tool",\n  tooltip: "Free draw tool",\n  icon: <PencilBoldIcon />,\n  onDrawStart: (data) => {\n    const lineWidth = parseInt(data.style.lineWidth);\n    const newSvg = createSvg(lineWidth, lineWidth, data.style.opacity);\n    newSvg.style.overflow = "visible";\n    const newPath = createCircle(lineWidth / 2, data.style.color);\n    newSvg.appendChild(newPath);\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawing: (data, { viewContainer }) => {\n    smoothCoords(data.coords);\n    expandContainer(data);\n    const boxSize = getBoxSize(data);\n    const newSvg = createSvg(boxSize.width, boxSize.height, data.style.opacity);\n    newSvg.style.overflow = "visible";\n    const path = svgPathFromData(data, viewContainer);\n    newSvg.appendChild(path);\n    data.container.div.innerHTML = "";\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawEnd: (data, ctx) => {\n    saveCreateToUndoStack(data, ctx);\n    if (ctx.shouldSelectAfterCreate) {\n      ctx.selectObject(data);\n    }\n  },\n  onResize: (data, ctx) => {\n    if (!data.element) {\n      return;\n    }\n    scaleSvg(data.element as SVGSVGElement, data.container.bounds);\n  },\n  undoHandlers: {\n    create: undoCreate,\n    delete: redoDelete,\n    color: undoSvgPathColor,\n    lineWidth: undoSvgPathWidth,\n    opacity: undoEleOpacity,\n  },\n  redoHandlers: {\n    create: undoCreate,\n    delete: redoDelete,\n    color: undoSvgPathColor,\n    lineWidth: undoSvgPathWidth,\n    opacity: undoEleOpacity,\n  },\n  styleHandlers: {\n    color: (data, value, _ctx) => updateSvgPathStroke(data, value),\n    lineWidth: (data, value, _ctx) => updateSvgPathWidth(data, value),\n    opacity: (data, value, _ctx) => updateEleOpacity(data, value),\n  },\n  cursor: `url(data:image/svg+xml;base64,${cursorPencilBase64}) 0 16, pointer`,\n};\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Drawing Tools",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/Introduction.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.h_,{title:"Introduction",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h1",{id:"welcome-to-jzohdireact-draw-storybook"},"Welcome to @jzohdi/react-draw Storybook"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"This is a fully customizable drawing area library written in react + typescript.\nIncluded only the tools you want for the smallest bundle size or add your own."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"installation"},"Installation"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"Install using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"npm")," or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"yarn")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{className:"shell"},"npm install @jzohdi/react-draw")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{className:"shell"},"yarn add @jzohdi/react-draw")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"example"},"Example"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport {\n  circleTool,\n  squareTool,\n  selectTool,\n  freeDrawTool,\n  diamondTool,\n  straightLineTool,\n  textAreaTool,\n  eraseTool,\n  undoTool,\n  redoTool,\n  trashTool,\n  duplicateTool,\n  bringBackTool,\n  bringForwardTool,\n  ColorStyle,\n  BackgroundStyle,\n  LineWidthStyle,\n  OpacityStyle,\n  arrowTool,\n  ClearAllButton,\n  FontSizeStyle,\n} from "../src";\n\nexport default function MyComponent() {\n  <div>\n    <h1>Example page title</h1>\n    <ReactDraw\n      drawingTools={[\n        selectTool,\n        freeDrawTool,\n        squareTool,\n        circleTool,\n        diamondTool,\n        straightLineTool,\n        arrowTool,\n      ]}\n      actionTools={[\n        undoTool,\n        redoTool,\n        trashTool,\n        duplicateTool,\n        bringBackTool,\n        bringForwardTool,\n      ]}\n      shouldSelectAfterCreate={true}\n      styleComponents={{\n        color: { order: 3, component: ColorStyle },\n        background: { order: 4, component: BackgroundStyle },\n        lineWidth: { order: 1, component: LineWidthStyle },\n        opacity: { order: 0, component: OpacityStyle },\n        fontSize: { order: 2, component: FontSizeStyle },\n      }}\n      menuComponents={[ClearAllButton]}\n    >\n      ... any child you want can go inside the drawing area.\n    </ReactDraw>\n  </div>;\n}\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"reactdraw-prop-types"},"ReactDraw Prop Types"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"See all types ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("a",{parentName:"p",href:"https://github.com/jzohdi/reactdraw/blob/main/src/types.ts",target:"_blank",rel:"nofollow noopener noreferrer"},"here")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},'type ReactDrawProps = {\n  children?: ReactChild;\n  layout?: LayoutOption;\n  drawingTools: DrawingTools[];\n  hideTopBar?: boolean;\n  actionTools: ActionTools[];\n  hideBottomBar?: boolean;\n  shouldKeepHistory?: boolean;\n  shouldSelectAfterCreate?: boolean;\n  id: string;\n  styleComponents?: StyleComponents;\n  menuComponents?: MenuComponent[];\n  styles?: StylesObject;\n  classNames?: ClassNamesObject;\n};\n\ntype LayoutOption = "default" | LayoutAbsolute | "fit";\n\ntype LayoutAbsolute = {\n  width: number | string;\n  height: number | string;\n};\n\ntype StylesObject = {\n  bottomBarContainer?: StylesValue;\n  toolIconWrapper?: StylesValue;\n  clearAllButton?: StylesValue;\n  alertMessageDialog?: StylesValue;\n  bottomToolButton?: StylesValue;\n  menuButton?: StylesValue;\n  menuContainer?: StylesValue;\n  topBarBontainer?: StylesValue;\n  [other: string]: StylesValue | undefined;\n};\n\ntype ClassNamesObject = {\n  bottomBarContainer?: string;\n  toolIconWrapper?: string;\n  clearAllButton?: string;\n  alertMessageDialog?: string;\n  bottomToolButton?: string;\n  menuButton?: string;\n  menuContainer?: string;\n  topBarBontainer?: string;\n  [other: string]: string | undefined;\n};\n\ntype KeyFramesValue = {\n  [percent: string]: CSSProperties;\n};\n\ntype KeyFramesDefinition = {\n  [keyframesDef: string]: KeyFramesValue;\n};\n\ntype StylesValue =\n  | CSSProperties\n  | {\n      [selector: string]: CSSProperties;\n    }\n  | KeyFramesDefinition;\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"roadmap"},"Roadmap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("ul",{className:"contains-task-list"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","duplicate action"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","reorder (back front) actions"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","tooltips"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","optional tool labels"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","clear all"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","text area font size update"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","forward ref"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","tool bar overflow"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","styles/classnames props"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","remove dep on styled components - used for hover and animations"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","give example of to image"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","improve docs"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","responsive mode?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","save/load"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","fix select object when rotated (correctly calculate the new bounds if rotated) (maybe fix getCenterPoint too)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","provide utils as part of package"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul"},"[-][free draw bezier curve]",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("a",{parentName:"li",href:"https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74",target:"_blank",rel:"nofollow noopener noreferrer"},"1")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul"},"[-]"," fix resize when rotated"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","fix ssr css")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"stack"},"Stack"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("ul",{className:"contains-task-list"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","react"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","typescript"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","styled-components"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","storybook"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ul",className:"task-list-item"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","rollup")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/Serialization.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.h_,{title:"Serialization (Saving + Loading)",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h1",{id:"serialization-saving--loading-canvas"},"Serialization (Saving + Loading) Canvas"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"A common use case for the canvas objects is to be able to save the canvas and restore the state later.\nAn example of this behavior can be seen under ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"ReactDraw/Save And Load Canvas JSON")," where the source code is also provided."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"The function `serializeObjects` is provided from the root of this project and returns a string which can be saved to localStorage or sent to a server. This gives you the control when to save the canvas data and what to do with it. You can create custom buttons to save and load the data such as in the example mentioned above. Alternatively you can load the data using the `ReactDraw` onLoad prop."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-javascript"},'import {\n  ReactDraw,\n  Serializers,\n  serializeObjects,\n  Deserializers,\n  deserializeData,\n  serializeFreeDraw,\n  deserializeFreeDraw,\n} from "../src";\n\nconst serializers: Serializers = {\n  [freeDrawTool.id]: serializeFreeDraw,\n};\n\nconst deserializers: Deserializers = {\n  [freeDrawTool.id]: deserializeFreeDraw,\n};\n\n// collected serialization of each drowing object on the canvas\n// call this when you want to save canvas (returns string for you to save at your desired location)\nconst data = serializeObjects(serializers, ctx);\n\n// turn the data (string) back into the canvas state\ndeserializeData(data, deserializers, ctx);\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"serializeobjects"},"serializeObjects"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"Below shows the implementation of the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"serializeObjects")," function. Each of the drawing objects must\nbe turned into ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"IntermediateStringableObject")," because the object's html elements are not json stringifiable.\nSee below for an example of how ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"serializeFreeDraw")," is implemented. If you want to serialize and deserialize your custom\ndrawing tools you must create the serialization and deserialization functions for it as well."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-javascript"},"export function serializeObjects(\n  serializers: Serializers,\n  ctx: ReactDrawContext\n): string {\n  const serializedObjects: IntermediateStringableObject[] = [];\n  for (const drawingObject of ctx.objectsMap.values()) {\n    const toolId = drawingObject.toolId;\n    const serializerFunc = serializers[toolId];\n    if (serializerFunc === undefined) {\n      return toolNotFoundError(drawingObject, serializers);\n    }\n    serializedObjects.push(serializerFunc(drawingObject));\n  }\n  return JSON.stringify(serializedObjects);\n}\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h1",{id:"deserializedata"},"deserializeData"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"Below shows the implementation of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"deserializeData"),", there is a 4th optional arguement if you would like\nto return the drawing objects and not add them to the canvas right away. See below for implementation example\nfor ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"p"},"deserializeFreeDraw"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-javascript"},"export function deserializeData(\n  stringifiedData: string,\n  deserializers: Deserializers,\n  ctx: ReactDrawContext,\n  shouldAddToCanvas: boolean = true\n): DrawingData[] {\n  const toArray: IntermediateStringableObject[] = JSON.parse(stringifiedData);\n  const results: DrawingData[] = [];\n  for (const obj of toArray) {\n    const deserializerFunction = deserializers[obj.toolId];\n    if (deserializerFunction === undefined) {\n      return toolNotFoundError(obj, deserializers);\n    }\n    const drawingDataObject = deserializerFunction(obj, ctx, shouldAddToCanvas);\n    results.push(drawingDataObject);\n  }\n  return results;\n}\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"serializefreedraw"},"serializeFreeDraw"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-javascript"},'export const serializeFreeDraw: SerializerFunction = (obj: DrawingData) => {\n  const containerState = getContainerState(obj);\n  containerState.scale = getScaleFromSvg(obj);\n  containerState.other["viewbox"] = obj.element?.getAttribute("viewbox");\n  const customData = serializeCustomData(obj);\n  const objectCopy = { ...obj, containerDiv: containerState, customData };\n  return objectCopy;\n};\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"deserializefreedraw"},"deserializeFreeDraw"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"The general steps included here are:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("ol",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"grab the previously serialized setup data (constainerState, customData)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"create a new containerDiv (makeNewDiv) with an empty size and center at the original first drawing point."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"create a new ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"li"},"DrawingData")," object"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"deserialize customData (turn back into ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"li"},"Map<string, any>"),")"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"set the containerDiv to the original size and position (this is needed so that we can redraw the svg as it was originally drawn)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"add the containerDiv to the canvas (need to do this first so that it's ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("inlineCode",{parentName:"li"},"div.getBoundingClientRect()")," works)"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"draw the svg again based on the original coords and original position"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("li",{parentName:"ol"},"restore the rotation, scale, and true saved position. (it's important to do this last or the free draw svg won't be created correctly)")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-javascript"},'export const deserializeFreeDraw: DeserializerFunction = (\n  obj: IntermediateStringableObject,\n  ctx: ReactDrawContext,\n  shouldAddToCanvas: boolean = true\n) => {\n  const freeDrawObj = obj as SerializedFreeDraw;\n  const containerState = freeDrawObj.containerDiv;\n  const customData = freeDrawObj.customData;\n  const originalBounds = customData[FREE_DRAW_ORIGINAL_BOUNDS];\n  const p = freeDrawObj.coords[0];\n  const bbox = containerState.bbox;\n  const lineWidth = parseInt(freeDrawObj.style.lineWidth);\n\n  const { id, div } = makeNewDiv(p[0], p[1], lineWidth, freeDrawObj.toolId);\n\n  const newDrwingData: DrawingData = {\n    toolId: freeDrawObj.toolId,\n    id,\n    style: freeDrawObj.style,\n    customData: deserializeCustomData(customData),\n    containerDiv: div,\n    element: null,\n    coords: freeDrawObj.coords,\n  };\n\n  setDivToBounds(div, originalBounds);\n\n  if (shouldAddToCanvas) {\n    addObject(ctx, newDrwingData);\n  }\n  const newSvg = createSvg(\n    originalBounds.width,\n    originalBounds.height,\n    freeDrawObj.style.opacity\n  );\n\n  newSvg.setAttribute("viewbox", containerState.other["viewbox"]);\n  newSvg.style.overflow = "visible";\n  newDrwingData.containerDiv.innerHTML = "";\n  const newPath = svgPathFromData(newDrwingData, ctx.viewContainer);\n  div.style.transform = `rotate(${containerState.rotation}deg)`;\n  newPath.style.transform = `scale(${containerState.scale?.x}, ${containerState.scale?.y})`;\n  newSvg.appendChild(newPath);\n  newDrwingData.containerDiv.appendChild(newSvg);\n  newDrwingData.element = newSvg;\n  setDivToBounds(div, bbox);\n  return newDrwingData;\n};\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Serialization (Saving + Loading)",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories/TypeDescriptions.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.h_,{title:"Type Descriptions",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h1",{id:"type-descriptions"},"Type Descriptions"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("p",null,"This document contains descriptions and explanations of the different objects seen in ReactDraw"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"point"},"Point"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type Point = [number, number];\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"rectbounds"},"RectBounds"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type RectBounds = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"drawingcontainer"},"DrawingContainer"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type DrawingContainer = {\n  div: HTMLDivElement;\n  id: string;\n  bounds: RectBounds;\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"drawingdata"},"DrawingData"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type DrawingData = {\n  coords: Point[];\n  container: DrawingContainer;\n  element: HTMLElement | SVGSVGElement | null;\n  style: {\n    lineWidth: number;\n    zIndex: number;\n  };\n  toolId: string;\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"onresizecontext"},"OnResizeContext"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},"type OnResizeContext = {\n  viewContainer: HTMLDivElement;\n  previousPoint: Point;\n  newPoint: Point;\n  mode: SelectMode;\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("h2",{id:"selectmode"},"SelectMode"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)("code",{parentName:"pre",className:"language-typescript"},'type SelectMode =\n  | "drag"\n  | "rotate"\n  | "resize-nw"\n  | "resize-ne"\n  | "resize-se"\n  | "resize-sw";\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Type Descriptions",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.kt)(MDXContent,null))}});const __WEBPACK_DEFAULT_EXPORT__=componentMeta;var __namedExportsOrder=["__page"]},"./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./AddImages.stories.tsx":"./stories/AddImages.stories.tsx","./ReactDraw.stories.tsx":"./stories/ReactDraw.stories.tsx","./SaveCanvas.stories.tsx":"./stories/SaveCanvas.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./DrawingTools.stories.mdx":"./stories/DrawingTools.stories.mdx","./Introduction.stories.mdx":"./stories/Introduction.stories.mdx","./Serialization.stories.mdx":"./stories/Serialization.stories.mdx","./TypeDescriptions.stories.mdx":"./stories/TypeDescriptions.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C[\\\\/]%7C(?:(?:(?%21(?:^%7C[\\\\/])\\.).)*?)[\\\\/])(?%21\\.)(?=.)[^\\\\/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[174],(()=>(__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);