(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},options:{storySort:{method:"alphabetical",order:["Introduction","Drawing Tools","Type Descriptions"],locales:"en-US"}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src/ReactDraw/index.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js");var react=__webpack_require__("./node_modules/react/index.js"),react_default=__webpack_require__.n(react),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var defaultStyles={boxShadow:"#000000 0px 1px 3px 0px",borderRadius:4,display:"flex",flexDirection:"column",position:"relative",fontFamily:"sans-serif"},ReactDraw_Container=Object(react.forwardRef)((function Container(_ref,ref){var children=_ref.children,styles=function getStyles(layout){return"default"===layout?{width:500,height:500,maxWidth:"100%"}:"fit"===layout?{maxWidth:"100%"}:void 0}(_ref.layout);return Object(jsx_runtime.jsx)("div",{style:Object.assign({},defaultStyles,styles),ref:ref,children:children})}));try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"LayoutOption"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/Container.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/ReactDraw/Container.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}var _templateObject,_templateObject2,styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),constants=__webpack_require__("./src/constants.ts");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var Wrapper=styled_components_browser_esm.b.button(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),constants.b,constants.b,constants.d.grey.light,(function(props){return props.selected&&Object(styled_components_browser_esm.a)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n      background-color: "," !important;\n      > svg path {\n        fill: white;\n      }\n    "])),constants.d.primary.main)}));function ToolIconWrapper(_ref){var children=_ref.children,selected=_ref.selected,onSelect=_ref.onSelect;return Object(jsx_runtime.jsx)(Wrapper,{selected:selected,onClick:onSelect,children:children})}ToolIconWrapper.displayName="ToolIconWrapper";try{ToolIconWrapper.displayName="ToolIconWrapper",ToolIconWrapper.__docgenInfo={description:"",displayName:"ToolIconWrapper",props:{selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"]={docgenInfo:ToolIconWrapper.__docgenInfo,name:"ToolIconWrapper",path:"src/ReactDraw/ToolIconWrapper.tsx#ToolIconWrapper"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var TopToolBar_templateObject,initialData={color:null,message:null,position:"top"},AlertMessageContext=Object(react.createContext)([initialData,function(){}]);function AlertMessageProvider(_ref){var children=_ref.children,_useState2=_slicedToArray(Object(react.useState)(initialData),2),state=_useState2[0],setState=_useState2[1];return Object(jsx_runtime.jsx)(AlertMessageContext.Provider,{value:[state,function updateState(newState){setState(newState)}],children:children})}AlertMessageProvider.displayName="AlertMessageProvider";try{AlertMessageProvider.displayName="AlertMessageProvider",AlertMessageProvider.__docgenInfo={description:"",displayName:"AlertMessageProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Alerts/context.tsx#AlertMessageProvider"]={docgenInfo:AlertMessageProvider.__docgenInfo,name:"AlertMessageProvider",path:"src/Alerts/context.tsx#AlertMessageProvider"})}catch(__react_docgen_typescript_loader_error){}function hooks_slicedToArray(arr,i){return function hooks_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function hooks_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function hooks_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return hooks_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hooks_arrayLikeToArray(o,minLen)}(arr,i)||function hooks_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hooks_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useAlerts(){var _useContext2=hooks_slicedToArray(Object(react.useContext)(AlertMessageContext),2);return[_useContext2[0],_useContext2[1]]}function ToolTip_slicedToArray(arr,i){return function ToolTip_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ToolTip_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ToolTip_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ToolTip_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ToolTip_arrayLikeToArray(o,minLen)}(arr,i)||function ToolTip_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ToolTip_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ToolTip(_ref){var children=_ref.children,text=_ref.text,position=_ref.position,disabled=_ref.disabled,_useAlerts2=ToolTip_slicedToArray(useAlerts(),2),state=_useAlerts2[0],setState=_useAlerts2[1];if(!children)return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{});if(!text)return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children});return Object(jsx_runtime.jsx)("span",{onMouseOver:function handleMouseEnter(){disabled||function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}()||setState(Object.assign({},state,{message:text,position:position}))},onMouseLeave:function handleMouseLeave(){null!==state.message&&setState(Object.assign({},state,{message:null}))},"aria-label":"label mouse listener "+text,children:children})}ToolTip.displayName="ToolTip";try{ToolTip.displayName="ToolTip",ToolTip.__docgenInfo={description:"",displayName:"ToolTip",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"enum",value:[{value:'"top"'},{value:'"bottom"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Alerts/ToolTip.tsx#ToolTip"]={docgenInfo:ToolTip.__docgenInfo,name:"ToolTip",path:"src/Alerts/ToolTip.tsx#ToolTip"})}catch(__react_docgen_typescript_loader_error){}var TopBarContainer=styled_components_browser_esm.b.div(TopToolBar_templateObject||(TopToolBar_templateObject=function TopToolBar_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  display: flex;\n  background-color: ",";\n  z-index: 1000;\n  width: 100%;\n  overflow-x: auto;\n  /* Firefox */\n  * {\n    scrollbar-width: none;\n    scrollbar-color: "," #e2ecf5;\n  }\n\n  /* Chrome, Edge, and Safari */\n  &::-webkit-scrollbar {\n    height: 10px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #e2ecf5;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: #035195;\n    border-radius: 10px;\n    border: 3px none #ffffff;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background-color: #00294d;\n  }\n"])),constants.d.primary.light,constants.d.primary.main);function TopToolBar(_ref){var tools=_ref.tools,onSelectTool=_ref.onSelectTool,currentTool=_ref.currentTool;return Object(jsx_runtime.jsx)(TopBarContainer,{children:tools.filter((function(tool){return!!tool.icon})).map((function(tool,i){var tooltip=tool.tooltip;return Object(jsx_runtime.jsx)(ToolTip,{text:tooltip,position:"top",children:Object(jsx_runtime.jsx)(ToolIconWrapper,{selected:tool.id===currentTool,onSelect:function onSelect(){return onSelectTool(tool.id)},children:tool.icon})},tool.id)}))})}TopToolBar.displayName="TopToolBar";try{TopToolBar.displayName="TopToolBar",TopToolBar.__docgenInfo={description:"",displayName:"TopToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"TopBarTool[]"}},onSelectTool:{defaultValue:null,description:"",name:"onSelectTool",required:!0,type:{name:"(id: string) => void"}},currentTool:{defaultValue:null,description:"",name:"currentTool",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/TopToolBar.tsx#TopToolBar"]={docgenInfo:TopToolBar.__docgenInfo,name:"TopToolBar",path:"src/ReactDraw/TopToolBar.tsx#TopToolBar"})}catch(__react_docgen_typescript_loader_error){}var BottomToolBar_templateObject,BottomToolBar_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,utils=__webpack_require__("./src/utils/index.ts"),MenuIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/MenuIcon.js"),PaletteBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PaletteBoldIcon.js");__webpack_require__("./node_modules/core-js/modules/es.array.sort.js");function StylesMenu_slicedToArray(arr,i){return function StylesMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StylesMenu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function StylesMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StylesMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StylesMenu_arrayLikeToArray(o,minLen)}(arr,i)||function StylesMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StylesMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StylesMenu(_ref){var getEditProps=_ref.getEditProps,_ref$styleComponents=_ref.styleComponents,styleComponents=void 0===_ref$styleComponents?{}:_ref$styleComponents,onUpdateStyle=_ref.onUpdateStyle,_useState2=StylesMenu_slicedToArray(Object(react.useState)(getEditProps()),2),state=_useState2[0],setState=_useState2[1],keysToRender=Object.keys(state).filter((function(k){return!!styleComponents[k]}));Object(react.useEffect)((function(){function updateEditProps(){var newState=getEditProps();setState(newState)}return window.addEventListener("click",updateEditProps),function(){window.removeEventListener("click",updateEditProps)}}),[state]);var onUpdate=function onUpdate(key,value){var _Object$assign;setState(Object.assign({},state,((_Object$assign={})[key]=value,_Object$assign))),onUpdateStyle(key,value)};return 0===keysToRender.length?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(keysToRender.sort((function(a,b){var orderA=styleComponents[a].order;return styleComponents[b].order-orderA})),Object(jsx_runtime.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:keysToRender.map((function(key){var Component=styleComponents[key].component;return Object(jsx_runtime.jsx)(Component,{onUpdate:onUpdate,styleKey:key,styleValue:state[key]},key)}))}))}StylesMenu.displayName="StylesMenu";try{StylesMenu.displayName="StylesMenu",StylesMenu.__docgenInfo={description:"",displayName:"StylesMenu",props:{getEditProps:{defaultValue:null,description:"",name:"getEditProps",required:!0,type:{name:"() => StringObject"}},styleComponents:{defaultValue:{value:"{}"},description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},onUpdateStyle:{defaultValue:null,description:"",name:"onUpdateStyle",required:!0,type:{name:"UpdateStyleFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/StylesMenu.tsx#StylesMenu"]={docgenInfo:StylesMenu.__docgenInfo,name:"StylesMenu",path:"src/ReactDraw/StylesMenu.tsx#StylesMenu"})}catch(__react_docgen_typescript_loader_error){}function BottomToolBar_slicedToArray(arr,i){return function BottomToolBar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function BottomToolBar_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function BottomToolBar_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BottomToolBar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BottomToolBar_arrayLikeToArray(o,minLen)}(arr,i)||function BottomToolBar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BottomToolBar_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BottomToolBar_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var BottomBarContainer=styled_components_browser_esm.b.div(BottomToolBar_templateObject||(BottomToolBar_templateObject=BottomToolBar_taggedTemplateLiteralLoose(["\n  display: flex;\n  background-color: ",";\n  z-index: 1000;\n  width: 100%;\n  overflow-x: auto;\n  /* Firefox */\n  * {\n    scrollbar-width: none;\n    scrollbar-color: "," #e2ecf5;\n  }\n\n  /* Chrome, Edge, and Safari */\n  &::-webkit-scrollbar {\n    height: 10px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #e2ecf5;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: #035195;\n    border-radius: 10px;\n    border: 3px none #ffffff;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background-color: #00294d;\n  }\n"])),constants.d.primary.light,constants.d.primary.main),BottomToolButton=styled_components_browser_esm.b.button(BottomToolBar_templateObject2||(BottomToolBar_templateObject2=BottomToolBar_taggedTemplateLiteralLoose(["\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  ","\n"])),constants.b,constants.b,(function(props){return"hide"===props.mode?Object(styled_components_browser_esm.a)(_templateObject3||(_templateObject3=BottomToolBar_taggedTemplateLiteralLoose(["\n        display: none;\n      "]))):props.disabled?Object(styled_components_browser_esm.a)(_templateObject4||(_templateObject4=BottomToolBar_taggedTemplateLiteralLoose(["\n        cursor: not-allowed;\n        background-color: white;\n        > svg path {\n          fill: lightgrey;\n          stroke: lightgrey;\n        }\n      "]))):Object(styled_components_browser_esm.a)(_templateObject5||(_templateObject5=BottomToolBar_taggedTemplateLiteralLoose(["\n      &:hover {\n        background-color: ",";\n      }\n      display: inline-block;\n    "])),constants.d.grey.light)})),MenuButton=styled_components_browser_esm.b.button(_templateObject6||(_templateObject6=BottomToolBar_taggedTemplateLiteralLoose(["\n  position: relative;\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  border: none;\n  background-color: transparent;\n  border-radius: 2px;\n  transition: background-color 150ms ease-in-out;\n  @media only screen and (min-width: ","px) {\n    width: 40px;\n    height: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    width: 30px;\n    height: 30px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),constants.b,constants.b,constants.d.grey.light,(function(props){return props.open?Object(styled_components_browser_esm.a)(_templateObject7||(_templateObject7=BottomToolBar_taggedTemplateLiteralLoose(["\n        background-color: "," !important;\n        > svg path {\n          fill: white;\n          stroke: white;\n        }\n      "])),constants.d.primary.main):Object(styled_components_browser_esm.a)(_templateObject8||(_templateObject8=BottomToolBar_taggedTemplateLiteralLoose([""])))})),MenuContainer=styled_components_browser_esm.b.div(_templateObject9||(_templateObject9=BottomToolBar_taggedTemplateLiteralLoose(["\n  position: absolute;\n  left: 0;\n  padding: 15px;\n  border: 1px solid ",";\n  z-index: 1000;\n  background-color: white;\n  border-radius: 0px 5px 0px 0px;\n  max-height: calc(100% - 80px);\n  max-width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n\n  @media only screen and (min-width: ","px) {\n    bottom: 40px;\n  }\n  @media only screen and (max-width: ","px) {\n    bottom: 30px;\n  }\n  /* Firefox */\n  * {\n    scrollbar-width: none;\n    scrollbar-color: "," #e2ecf5;\n  }\n\n  /* Chrome, Edge, and Safari */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #e2ecf5;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: ",";\n    border-radius: 8px;\n    border: 3px none #ffffff;\n  }\n"])),constants.d.primary.main,constants.b,constants.b,constants.d.primary.main,constants.d.primary.main);function BottomToolBar(_ref){var tools=_ref.tools,displayMap=_ref.displayMap,dispatch=_ref.dispatch,stylesMenu=_ref.stylesMenu,children=_ref.children,_useState2=BottomToolBar_slicedToArray(Object(react.useState)(null),2),menuOpen=_useState2[0],setMenuOpen=_useState2[1],handleToggleMenu=function handleToggleMenu(key){return setMenuOpen(key===menuOpen?null:key)},hasStyleMenu=!!stylesMenu.styleComponents&&!function isObjEmpty(obj){for(var _x in obj)return!1;return!0}(stylesMenu.styleComponents),hasMenu=!!children&&react_default.a.Children.count(children)>0;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["styles"===menuOpen&&Object(jsx_runtime.jsx)(MenuContainer,{children:Object(jsx_runtime.jsx)(StylesMenu,Object.assign({},stylesMenu))}),"menu"===menuOpen&&Object(jsx_runtime.jsx)(MenuContainer,{children:children}),Object(jsx_runtime.jsxs)(BottomBarContainer,{children:[hasMenu&&Object(jsx_runtime.jsx)(ToolTip,{text:"Menu",position:"bottom",children:Object(jsx_runtime.jsx)(MenuButton,{onClick:function onClick(){return handleToggleMenu("menu")},open:"menu"===menuOpen,children:Object(jsx_runtime.jsx)(MenuIcon.a,{size:20})})}),hasStyleMenu&&Object(jsx_runtime.jsx)(ToolTip,{text:"Styles",position:"bottom",children:Object(jsx_runtime.jsx)(MenuButton,{onClick:function onClick(){return handleToggleMenu("styles")},open:"styles"===menuOpen,children:Object(jsx_runtime.jsx)(PaletteBoldIcon.a,{size:20})})}),tools.map((function(tool,i){var toolId=tool.id,toolDisplayMode=displayMap.get(toolId)||"hide";return Object(jsx_runtime.jsx)(ToolTip,{text:tool.tooltip,position:"bottom",disabled:"disabled"===toolDisplayMode,children:Object(jsx_runtime.jsx)(BottomToolButton,{disabled:"disabled"===toolDisplayMode,mode:toolDisplayMode,onClick:function onClick(){return dispatch(tool.handleContext)},children:tool.icon})},tool.id)}))]})]})}try{BottomToolBar.displayName="BottomToolBar",BottomToolBar.__docgenInfo={description:"",displayName:"BottomToolBar",props:{tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"ActionTools[]"}},displayMap:{defaultValue:null,description:"",name:"displayMap",required:!0,type:{name:"BottomToolDisplayMap"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"(fn: (ctx: ReactDrawContext) => void) => void"}},stylesMenu:{defaultValue:null,description:"",name:"stylesMenu",required:!0,type:{name:"{ getEditProps: () => StringObject; styleComponents?: StyleComponents | undefined; onUpdateStyle: UpdateStyleFn; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/BottomToolBar.tsx#BottomToolBar"]={docgenInfo:BottomToolBar.__docgenInfo,name:"BottomToolBar",path:"src/ReactDraw/BottomToolBar.tsx#BottomToolBar"})}catch(__react_docgen_typescript_loader_error){}var AlertMessage_templateObject,AlertMessage_templateObject2,utils_utils=__webpack_require__("./src/utils/utils.ts"),select_utils=__webpack_require__("./src/utils/select/utils.ts"),getSelectedDrawingObjects=__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts"),pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts");function AlertMessage_slicedToArray(arr,i){return function AlertMessage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AlertMessage_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AlertMessage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AlertMessage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AlertMessage_arrayLikeToArray(o,minLen)}(arr,i)||function AlertMessage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AlertMessage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AlertMessage_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var Dialog=styled_components_browser_esm.b.dialog(AlertMessage_templateObject||(AlertMessage_templateObject=AlertMessage_taggedTemplateLiteralLoose(["\n  position: absolute;\n  /* top: 10px; */\n  white-space: nowrap;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px 10px;\n  z-index: 1001;\n  ","\n"])),(function(props){return Object(styled_components_browser_esm.a)(AlertMessage_templateObject2||(AlertMessage_templateObject2=AlertMessage_taggedTemplateLiteralLoose(["\n      ",": 10px\n    "])),props.position)}));function AlertMessage(){var state=AlertMessage_slicedToArray(useAlerts(),1)[0];return Object(jsx_runtime.jsx)(Dialog,{style:{backgroundColor:state.color||"black",color:"white"},position:state.position,open:null!==state.message,children:state.message})}AlertMessage.displayName="AlertMessage";var _excluded=["children","id","topBarTools","hideTopBar","bottomBarTools","hideBottomBar","shouldKeepHistory","shouldSelectAfterCreate","styleComponents","menuComponents"];function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ReactDraw_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ReactDraw_slicedToArray(arr,i){return function ReactDraw_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReactDraw_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ReactDraw_unsupportedIterableToArray(arr,i)||function ReactDraw_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReactDraw_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ReactDraw_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ReactDraw_arrayLikeToArray(o,minLen):void 0}}function ReactDraw_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.a=Object(react.forwardRef)((function ReactDraw(_ref,ref){var children=_ref.children,_ref$id=_ref.id,id=void 0===_ref$id?"main":_ref$id,topBarTools=_ref.topBarTools,hideTopBar=_ref.hideTopBar,_ref$bottomBarTools=_ref.bottomBarTools,bottomBarTools=void 0===_ref$bottomBarTools?[]:_ref$bottomBarTools,hideBottomBar=_ref.hideBottomBar,_ref$shouldKeepHistor=_ref.shouldKeepHistory,shouldKeepHistory=void 0===_ref$shouldKeepHistor||_ref$shouldKeepHistor,_ref$shouldSelectAfte=_ref.shouldSelectAfterCreate,shouldSelectAfterCreate=void 0===_ref$shouldSelectAfte||_ref$shouldSelectAfte,styleComponents=_ref.styleComponents,_ref$menuComponents=_ref.menuComponents,menuComponents=void 0===_ref$menuComponents?[]:_ref$menuComponents,props=_objectWithoutProperties(_ref,_excluded),drawingAreaRef=Object(react.useRef)(null),_useState2=ReactDraw_slicedToArray(Object(react.useState)(topBarTools[0]),2),currentDrawingTool=_useState2[0],setCurrentDrawingTool=_useState2[1],_validateProps=function validateProps(children,layout){var numChildren=react.Children.count(children);if(numChildren>1)throw new Error("ReactDraw expects either 0 or 1 children, detected more.");void 0===layout&&(layout="default");return{numChildren:numChildren,layout:layout}}(children,props.layout),layout=_validateProps.layout,renderedElementsMap=Object(react.useRef)(new Map),currDrawObj=Object(react.useRef)(null),drawingAreaId=Object(react.useRef)("drawing-area-container-"+id),previousMousePos=Object(react.useRef)(null),latestEvent=Object(react.useRef)(null),customState=Object(react.useRef)(function setupCustomStateSpace(tools){var _state,state=((_state={})[constants.h]={selectedIds:[],handlers:{},prevPoint:null},_state[constants.f]={deletedObjects:new Map},_state);return tools.reduce((function(prev,curr){return void 0===prev[curr.id]&&(prev[curr.id]={}),curr.setupCustomState&&(prev[curr.id]=Object.assign(prev[curr.id],curr.setupCustomState(state))),prev}),state)}(topBarTools)),undoStack=Object(react.useRef)([]),redoStack=Object(react.useRef)([]),objectToSelect=Object(react.useRef)(null),globalStyles=Object(react.useRef)(function setupGlobalStyles(topBarTools){return Object.assign({},defaultEditableProps)}()),_useState4=ReactDraw_slicedToArray(Object(react.useState)(new Map),2),bottomToolsDisplayMap=_useState4[0],setBottomToolsDisplayMap=_useState4[1],updateBottomToolDisplayMap=function updateBottomToolDisplayMap(){var newMap=function makeBottomBarDisplayMap(){var bottomDisplayMap=new Map;return bottomBarTools.reduce((function(prev,curr){return prev.set(curr.id,curr.getDisplayMode(getReactDrawContext())),prev}),bottomDisplayMap)}();if(newMap.size!==bottomToolsDisplayMap.size)return setBottomToolsDisplayMap(newMap);var _step,_iterator=_createForOfIteratorHelper(newMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _key=_step.value;if(newMap.get(_key)!==bottomToolsDisplayMap.get(_key))return setBottomToolsDisplayMap(newMap)}}catch(err){_iterator.e(err)}finally{_iterator.f()}};Object(react.useEffect)((function(){updateBottomToolDisplayMap()}),[]),Object(react.useEffect)((function(){if(currentDrawingTool.id===constants.h){var obj=objectToSelect.current;if(obj){var ctx=getReactDrawContext();unselectEverything(ctx),ctx.fullState[constants.h].selectedIds=[obj.container.id],Object(select_utils.c)(obj,ctx),objectToSelect.current=null}}updateBottomToolDisplayMap()}),[currentDrawingTool]);var selectObject=function selectObject(data){if(currentDrawingTool.id!==constants.h)return objectToSelect.current=data,setCurrentDrawingTool(getToolById(topBarTools,constants.h));var ctx=getReactDrawContext();unselectEverything(ctx),ctx.fullState[constants.h].selectedIds=[data.container.id],Object(select_utils.c)(data,ctx),updateBottomToolDisplayMap()},getReactDrawContext=function getReactDrawContext(viewC){var viewContainer=viewC||getViewContainer(),fullState=customState.current;return{viewContainer:viewContainer,objectsMap:renderedElementsMap.current,lastEvent:latestEvent.current,prevMousePosition:previousMousePos,drawingTools:topBarTools,fullState:fullState,undoStack:undoStack.current,redoStack:redoStack.current,shouldKeepHistory:shouldKeepHistory,selectDrawingTool:handleSelectTopTool,selectObject:selectObject,shouldSelectAfterCreate:shouldSelectAfterCreate,globalStyles:globalStyles.current}};function alertToolOfKeydown(e){currentDrawingTool.onKeyPress&&(currentDrawingTool.onKeyPress(e,getReactDrawContext()),updateBottomToolDisplayMap())}var getViewContainer=function getViewContainer(){var viewContainer=drawingAreaRef.current;if(!viewContainer)throw new Error("no view container while resizing");return viewContainer};function starDraw(relativePoint){var ctx=getReactDrawContext(),styles=Object.assign({},globalStyles.current),newDrawingData=Object(utils.i)(relativePoint,styles,currentDrawingTool.id);currDrawObj.current=newDrawingData,ctx.viewContainer.append(newDrawingData.container.div),currentDrawingTool.onDrawStart(newDrawingData,ctx)}function drawing(relativePoint){var currentDrawingData=currDrawObj.current;if(currentDrawingData){var ctx=getReactDrawContext();currentDrawingData.coords.push(relativePoint),currentDrawingTool.onDrawing(currentDrawingData,ctx)}}function endDraw(relativePoint){var currentDrawingData=currDrawObj.current;previousMousePos.current=null,currDrawObj.current=null,currentDrawingData&&(currentDrawingData.coords.push(relativePoint),renderedElementsMap.current.set(currentDrawingData.container.id,currentDrawingData),currentDrawingTool.onDrawEnd(currentDrawingData,getReactDrawContext()),updateBottomToolDisplayMap())}Object(react.useEffect)((function(){var container=drawingAreaRef.current;if(container)return container.addEventListener("mousedown",startDrawMouse),container.addEventListener("mouseup",endDrawMouse),container.addEventListener("mousemove",drawMouse),container.addEventListener("touchstart",startDrawTouch,{passive:!1}),container.addEventListener("touchmove",drawTouch,{passive:!1}),container.addEventListener("touchcancel",endDrawTouch),container.addEventListener("touchend",endDrawTouch),container.addEventListener("mouseleave",endDrawMouse),window.addEventListener("keydown",alertToolOfKeydown),function(){container.removeEventListener("mousedown",startDrawMouse),container.removeEventListener("mouseup",endDrawMouse),container.removeEventListener("mousemove",drawMouse),container.removeEventListener("touchstart",startDrawTouch),container.removeEventListener("touchmove",drawTouch),container.removeEventListener("touchcancel",endDrawTouch),container.removeEventListener("touchend",endDrawTouch),container.removeEventListener("mouseleave",endDrawMouse),window.removeEventListener("keydown",alertToolOfKeydown);var _step2,ctx=getReactDrawContext(container),_iterator2=_createForOfIteratorHelper(topBarTools);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var tool=_step2.value;tool.onUnMount&&tool.onUnMount(ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}};function startDrawMouse(e){latestEvent.current=e;var startPoint=[e.clientX,e.clientY];starDraw(Object(utils_utils.h)(startPoint,container))}function drawMouse(e){latestEvent.current=e;var point=[e.clientX,e.clientY];drawing(Object(utils_utils.h)(point,container))}function endDrawMouse(e){latestEvent.current=e;var point=[e.clientX,e.clientY];endDraw(Object(utils_utils.h)(point,container))}function startDrawTouch(e){latestEvent.current=e,e.preventDefault();var startPoint=Object(utils_utils.j)(e);starDraw(Object(utils_utils.h)(startPoint,container))}function drawTouch(e){latestEvent.current=e,e.preventDefault();var point=Object(utils_utils.j)(e);drawing(Object(utils_utils.h)(point,container))}function endDrawTouch(e){latestEvent.current=e,e.preventDefault();var startPoint=Object(utils_utils.j)(e);endDraw(Object(utils_utils.h)(startPoint,container))}}),[currentDrawingTool]);var handleSelectTopTool=function handleSelectTopTool(toolId){if(currentDrawingTool.id!==toolId){var selectedTool=getToolById(topBarTools,toolId);if(selectedTool){var currentTool=currentDrawingTool,currentCtx=getReactDrawContext();currentTool.onUnPickTool&&currentTool.onUnPickTool(currentCtx),selectedTool.onPickTool&&selectedTool.onPickTool(currentCtx),setCurrentDrawingTool(selectedTool),updateBottomToolDisplayMap()}}},pushStyleUpdateToStack=function pushStyleUpdateToStack(actions,ctx){var filterUndefined=actions.filter(utils_utils.k);if(0!==filterUndefined.length){var action={data:filterUndefined,objectId:"",toolId:"",toolType:"batch",action:"batch"};Object(pushActionToStack.a)(action,ctx)}};return Object(jsx_runtime.jsx)(AlertMessageProvider,{children:Object(jsx_runtime.jsxs)(ReactDraw_Container,{layout:layout,ref:ref,children:[!hideTopBar&&Object(jsx_runtime.jsx)(TopToolBar,{tools:topBarTools,onSelectTool:handleSelectTopTool,currentTool:currentDrawingTool.id}),Object(jsx_runtime.jsxs)("div",{id:drawingAreaId.current,style:{position:"relative",width:"100%",flex:1,overflow:"hidden",boxSizing:"border-box"},ref:drawingAreaRef,children:[Object(jsx_runtime.jsx)(AlertMessage,{}),children]}),!hideBottomBar&&Object(jsx_runtime.jsx)(BottomToolBar,{displayMap:bottomToolsDisplayMap,tools:bottomBarTools,dispatch:function dispatchBottomToolCtx(cb){cb(getReactDrawContext()),updateBottomToolDisplayMap()},stylesMenu:{getEditProps:function handleGetEditProps(){var ctx=getReactDrawContext(),selectedIds=Object(select_utils.a)(ctx);if(0===selectedIds.length)return globalStyles.current;var styles=function getEditStylesFromSelected(selectedIds,ctx){var _step3,styles={},selectedObjects=selectedIds.map((function(i){return Object(utils_utils.g)(ctx.objectsMap,i)})),counter={},_iterator3=_createForOfIteratorHelper(selectedObjects);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var object=_step3.value,tool=getToolById(ctx.drawingTools,object.toolId);if(tool.styleHandlers)for(var toolsAllowedStyles=Object.keys(tool.styleHandlers),_i2=0,_toolsAllowedStyles=toolsAllowedStyles;_i2<_toolsAllowedStyles.length;_i2++){var _key3=_toolsAllowedStyles[_i2],currentObjectValue=object.style[_key3];currentObjectValue?(styles[_key3]=currentObjectValue,counter[_key3]=(counter[_key3]||0)+1):console.error("could not get style value for key:",_key3,"from object",object)}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}for(var _key2 in counter)counter[_key2]!==selectedObjects.length&&delete styles[_key2];return styles}(selectedIds,ctx);return styles},styleComponents:styleComponents,onUpdateStyle:function handleUpdateStyles(key,value){var ctx=getReactDrawContext(),selectedIds=Object(select_utils.a)(ctx);if(0===selectedIds.length)return globalStyles.current[key]=value,[];var selectObjects=selectedIds.map((function(id){return Object(utils_utils.g)(ctx.objectsMap,id)})),allActions=selectObjects.map((function(obj){var handlers=getToolById(ctx.drawingTools,obj.toolId).styleHandlers;if(handlers&&handlers[key])return handlers[key](obj,value,ctx)}));return pushStyleUpdateToStack(allActions,ctx),allActions}},children:menuComponents.map((function(MenuItem,i){return Object(jsx_runtime.jsx)(MenuItem,{getContext:getReactDrawContext},i)}))}),Object(jsx_runtime.jsx)("style",{children:"\n\t\t#"+drawingAreaId.current+" {\n\t\t\tcursor: "+(currentDrawingTool.cursor||"default")+";\n\t\t}\n\t  "})]})})}));function getToolById(tools,id){var tool=tools.find((function(t){return t.id===id}));if(!tool)throw new Error("could not find the used tool");return tool}function unselectEverything(ctx){var currSelected=ctx.fullState[constants.h].selectedIds;if(currSelected.length>0){var objects=Object(getSelectedDrawingObjects.a)(currSelected,ctx.objectsMap);Object(select_utils.e)(objects,ctx)}}var defaultEditableProps={lineWidth:"4",zIndex:"1",color:"#000000",fontSize:"14",background:"transparent",opacity:"1"};try{ReactDraw.displayName="ReactDraw",ReactDraw.__docgenInfo={description:"",displayName:"ReactDraw",props:{layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"LayoutOption"}},topBarTools:{defaultValue:null,description:"",name:"topBarTools",required:!0,type:{name:"DrawingTools[]"}},hideTopBar:{defaultValue:null,description:"",name:"hideTopBar",required:!1,type:{name:"boolean"}},bottomBarTools:{defaultValue:null,description:"",name:"bottomBarTools",required:!0,type:{name:"ActionTools[]"}},hideBottomBar:{defaultValue:null,description:"",name:"hideBottomBar",required:!1,type:{name:"boolean"}},shouldKeepHistory:{defaultValue:null,description:"",name:"shouldKeepHistory",required:!1,type:{name:"boolean"}},shouldSelectAfterCreate:{defaultValue:null,description:"",name:"shouldSelectAfterCreate",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},styleComponents:{defaultValue:null,description:"",name:"styleComponents",required:!1,type:{name:"StyleComponents"}},menuComponents:{defaultValue:null,description:"",name:"menuComponents",required:!1,type:{name:"MenuComponent[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactDraw/index.tsx#ReactDraw"]={docgenInfo:ReactDraw.__docgenInfo,name:"ReactDraw",path:"src/ReactDraw/index.tsx#ReactDraw"})}catch(__react_docgen_typescript_loader_error){}},"./src/constants.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"i",(function(){return SQUARE_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"c",(function(){return CIRCLE_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"e",(function(){return DIAMOND_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"j",(function(){return STRAIGHT_LINE_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ARROW_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ERASE_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"h",(function(){return SELECT_TOOL_ID})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BPmd})),__webpack_require__.d(__webpack_exports__,"g",(function(){return SELECT_TOOL_DRAG_MIN_DISTANCE})),__webpack_require__.d(__webpack_exports__,"d",(function(){return COLORS}));var SQUARE_TOOL_ID="react-draw-square-tool",CIRCLE_TOOL_ID="react-draw-circle-tool",DIAMOND_TOOL_ID="react-draw-diamond-tool",STRAIGHT_LINE_TOOL_ID="react-draw-line-tool",ARROW_TOOL_ID="react-draw-arrow-tool",ERASE_TOOL_ID="react-draw-erase-tool",SELECT_TOOL_ID="react-draw-cursor",BPmd=450,SELECT_TOOL_DRAG_MIN_DISTANCE=75,COLORS={primary:{light:"#bddefb",main:"#228be6"},grey:{light:"#ececec"}}},"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return ReactDraw.a})),__webpack_require__.d(__webpack_exports__,"s",(function(){return FreeDrawTool})),__webpack_require__.d(__webpack_exports__,"u",(function(){return SelectTool})),__webpack_require__.d(__webpack_exports__,"v",(function(){return SquareTool})),__webpack_require__.d(__webpack_exports__,"n",(function(){return CircleTool})),__webpack_require__.d(__webpack_exports__,"p",(function(){return DiamondTool})),__webpack_require__.d(__webpack_exports__,"w",(function(){return StraightLineTool})),__webpack_require__.d(__webpack_exports__,"x",(function(){return TextAreaTool})),__webpack_require__.d(__webpack_exports__,"r",(function(){return EraseTool})),__webpack_require__.d(__webpack_exports__,"z",(function(){return UndoTool})),__webpack_require__.d(__webpack_exports__,"t",(function(){return RedoTool})),__webpack_require__.d(__webpack_exports__,"y",(function(){return TrashTool})),__webpack_require__.d(__webpack_exports__,"q",(function(){return DuplicateTool})),__webpack_require__.d(__webpack_exports__,"k",(function(){return BringBackTool})),__webpack_require__.d(__webpack_exports__,"l",(function(){return BringForwardTool})),__webpack_require__.d(__webpack_exports__,"d",(function(){return Color})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Background})),__webpack_require__.d(__webpack_exports__,"f",(function(){return LineWidthPicker})),__webpack_require__.d(__webpack_exports__,"g",(function(){return OpacityPicker_LineWidthPicker})),__webpack_require__.d(__webpack_exports__,"e",(function(){return FontSizePicker_LineWidthPicker})),__webpack_require__.d(__webpack_exports__,"j",(function(){return ArrowTool})),__webpack_require__.d(__webpack_exports__,"c",(function(){return MenuComponents_ClearAllButton})),__webpack_require__.d(__webpack_exports__,"b",(function(){return constants.d})),__webpack_require__.d(__webpack_exports__,"o",(function(){return utils_utils.d})),__webpack_require__.d(__webpack_exports__,"i",(function(){return utils_utils.a})),__webpack_require__.d(__webpack_exports__,"m",(function(){return utils_utils.c}));var ReactDraw=__webpack_require__("./src/ReactDraw/index.tsx"),PencilBoldIcon=(__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PencilBoldIcon.js")),react=__webpack_require__("./node_modules/react/index.js"),react_default=__webpack_require__.n(react),utils=__webpack_require__("./src/utils/index.ts");__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");function createPathSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createLineSvg(style){var newPath=document.createElementNS("http://www.w3.org/2000/svg","line");return newPath.setAttribute("fill","transparent"),newPath.setAttribute("stroke",style.color),newPath.style.strokeWidth=style.lineWidth+"px",newPath.setAttribute("stroke-linejoin","round"),newPath.setAttribute("stroke-linecap","round"),newPath}function createSvg(w,h,opacity){if(!Object(utils.f)())throw new Error("createSVG called on server");var newSVG=document.createElementNS("http://www.w3.org/2000/svg","svg");return newSVG.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),newSVG.setAttribute("viewbox","0 0 "+w+" "+h),newSVG.style.overflow="visible",newSVG.style.position="absolute",newSVG.style.top="0",newSVG.style.left="0",newSVG.style.opacity=opacity,newSVG.style.width="100%",newSVG.style.height="100%",newSVG}function createCircle(radius,color){if(!Object(utils.f)())throw new Error("createPath called on server");var ele=document.createElementNS("http://www.w3.org/2000/svg","circle");return ele.setAttribute("fill","black"),ele.setAttribute("cx",""+Math.ceil(radius/2)),ele.setAttribute("cy",""+Math.ceil(radius/2)),ele.setAttribute("r",""+radius),ele}__webpack_require__("./node_modules/core-js/modules/es.map.js");var pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts");__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js");function actionObjToSave(data,action,saveValue){return{objectId:data.container.id,toolId:data.toolId,toolType:"top-bar-tool",action:action,data:saveValue}}function getInnerEleFromSvg(data){var svg=data.element;if(!svg)throw new Error;var path=svg.querySelector("path");if(path||(path=svg.querySelector("line")),!path)throw new Error;return path}var colorRegex=/^(#([0-9A-F]{3}){1,2}|transparent)$/i;function updateSvgStyle(data,dataKey,svgKey,value){if(value.match(colorRegex)){var path=getInnerEleFromSvg(data),currColor=data.style[dataKey];return path.style[svgKey]=value,data.style[dataKey]=value,actionObjToSave(data,dataKey,currColor)}}function updateSvgPathStroke(data,value){return updateSvgStyle(data,"color","stroke",value)}function updateEleBackgroundColor(data,value){var _updateEleStyle=updateEleStyle(data,value,"background"),ele=_updateEleStyle.ele,action=_updateEleStyle.action;return action?(ele.style.backgroundColor=value,action):action}function updateEleStyle(data,value,key){var ele=data.element;if(!ele)throw new Error;if(!value.match(colorRegex))return{ele:ele,action:void 0};var currColor=data.style[key];return data.style[key]=value,{ele:ele,action:actionObjToSave(data,key,currColor)}}function updateEleBorderColor(data,value){var _updateEleStyle2=updateEleStyle(data,value,"color"),ele=_updateEleStyle2.ele,action=_updateEleStyle2.action;return action?(ele.style.border=borderFromStyles(data.style),action):action}function borderFromStyles(styles){return styles.lineWidth+"px solid "+styles.color}function updateTextStyle(data,dataKey,divKey,value){if(value.match(colorRegex)){var currColor=data.style[dataKey];return data.style[dataKey]=value,data.container.div.style[divKey]=value,actionObjToSave(data,dataKey,currColor)}}var utils_utils=__webpack_require__("./src/utils/utils.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=undo_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function undo_slicedToArray(arr,i){return function undo_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function undo_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||undo_unsupportedIterableToArray(arr,i)||function undo_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function undo_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?undo_arrayLikeToArray(o,minLen):void 0}}function undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saveCreateToUndoStack(data,ctx){if(ctx.shouldKeepHistory){var newAction={toolId:data.toolId,toolType:"top-bar-tool",objectId:data.container.id,action:"create",data:null};Object(pushActionToStack.a)(newAction,ctx)}}function undoCreate(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId);return Object(utils_utils.e)(action.objectId,ctx),action.data=object,action.action="delete",action}function redoDelete(action,ctx){var object=action.data;if(!object)throw new Error("redo delete but no data exists");return ctx.objectsMap.set(object.container.id,object),ctx.viewContainer.appendChild(object.container.div),action.data=null,action.action="create",action}function recreateDeletedObjects(action,ctx){var data=action.data;if(!data||"object"!=typeof data)throw new Error("malformed data");var _step,_iterator=_createForOfIteratorHelper(data.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=undo_slicedToArray(_step.value,2),objectId=_ref2[0],object=_ref2[1];ctx.viewContainer.appendChild(object.container.div),ctx.objectsMap.set(objectId,object)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.action="create",action.data=Array.from(data.keys()),action}function deleteCreatedObjects(action,ctx){var data=action.data;if(!data||!Array.isArray(data))throw console.error(action),new Error("malformed data");action.data=new Map;var _step2,_iterator2=_createForOfIteratorHelper(data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var objectId=_step2.value;action.data.set(objectId,Object(utils_utils.g)(ctx.objectsMap,objectId)),Object(utils_utils.e)(objectId,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.action="delete",action}function undoEleOpacity(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),curr=object.style.opacity,styleToSave=action.data,ele=object.element;if(!styleToSave||!ele)throw new Error;return object.style.opacity=styleToSave,ele.style.opacity=object.style.opacity,action.data=curr,action}function undoEleLineWidth(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),curr=object.style.lineWidth,styleToSave=action.data,ele=object.element;if(!styleToSave||!ele)throw new Error;return object.style.lineWidth=styleToSave,ele.style.border=borderFromStyles(object.style),action.data=curr,action}function undoEleBackgroundColor(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),currColor=object.style.background,colorTo=action.data,ele=object.element;if(!colorTo||!ele)throw new Error;return object.style.background=colorTo,ele.style.backgroundColor=colorTo,action.data=currColor,action}function undoEleBorderColor(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),currColor=object.style.color,colorTo=action.data,ele=object.element;if(!colorTo||!ele)throw new Error;return object.style.color=colorTo,ele.style.border=borderFromStyles(object.style),action.data=currColor,action}function undoSvgPathColor(action,ctx){return undoSvgStyle(action,ctx,"color","stroke")}function undoSvgPathFill(action,ctx){return undoSvgStyle(action,ctx,"background","fill")}function undoSvgStyle(action,ctx,dataKey,svgKey){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),currColor=object.style[dataKey],colorTo=action.data,svg=object.element;if(!svg)throw new Error;var path=svg.querySelector("path");if(path||(path=svg.querySelector("line")),!path)throw new Error;return object.style[dataKey]=colorTo,path.style[svgKey]=colorTo,action.data=currColor,action}function undoSvgPathWidth(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),currStyle=object.style.lineWidth,styleTo=action.data,path=getInnerEleFromSvg(object);return object.style.lineWidth=styleTo,path.style.strokeWidth=styleTo+"px",action.data=currStyle,action}__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js");var lineWidthRegex=/^[0-9]+$/g;function updateEleLineWidth(data,value){var ele=data.element;if(!ele)throw new Error;if(value.match(lineWidthRegex)){var curr=data.style.lineWidth;return data.style.lineWidth=value,ele.style.border=borderFromStyles(data.style),actionObjToSave(data,"lineWidth",curr)}}function updateSvgPathWidth(data,value){var valuePx=value.includes("px")?value:value+"px",path=getInnerEleFromSvg(data),currColor=data.style.lineWidth;return path.style.strokeWidth=valuePx,data.style.lineWidth=value,actionObjToSave(data,"lineWidth",currColor)}var opacityRegex=/^(0(\.\d+)?|1(\.0+)?)$/;function updateEleOpacity(data,value){if(value.match(opacityRegex)){var ele=data.element;if(!ele)throw new Error;var curr=data.style.opacity;return data.style.opacity=value,ele.style.opacity=value,actionObjToSave(data,"opacity",curr)}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function FreeDrawTool_slicedToArray(arr,i){return function FreeDrawTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FreeDrawTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function FreeDrawTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FreeDrawTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FreeDrawTool_arrayLikeToArray(o,minLen)}(arr,i)||function FreeDrawTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FreeDrawTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FreeDrawTool={id:"free-draw-tool",tooltip:"Free draw tool",icon:Object(jsx_runtime.jsx)(PencilBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity);newSvg.style.overflow="visible";var newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),data.container.div.appendChild(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,_ref){var viewContainer=_ref.viewContainer;!function smoothCoords(coords){var cLen=coords.length;if(cLen<3)return;var first=coords[cLen-3],last=coords[cLen-1];Object(utils.b)(first,last)<10&&coords.splice(cLen-2,1);Object(utils.b)(first,last)<20&&(coords[cLen-2]=function average(a,b){var _a=FreeDrawTool_slicedToArray(a,2),ax=_a[0],ay=_a[1],_b=FreeDrawTool_slicedToArray(b,2),bx=_b[0],by=_b[1];return[Math.min(ax,bx)+Math.abs(ax-bx)/2,Math.min(ay,by)+Math.abs(ay-by)/2]}(first,last))}(data.coords),Object(utils.c)(data);var boxSize=Object(utils.d)(data),newSvg=createSvg(boxSize.width,boxSize.height,data.style.opacity);newSvg.style.overflow="visible";var path=function svgPathFromData(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.setAttribute("d",function getPathDString(data,viewContainer){for(var pathString="",i=0;i<data.coords.length;i++){var point=data.coords[i];pathString+=getPathPoint(Object(utils.k)(point,data.container,viewContainer),i),i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath}(data,viewContainer);newSvg.appendChild(path),data.container.div.innerHTML="",data.container.div.appendChild(newSvg),data.element=newSvg},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){data.element&&Object(utils.l)(data.element,data.container.bounds)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateSvgPathStroke(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateSvgPathWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}},cursor:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjU4NTggMC41ODU3ODZDMTEuMzY2OCAtMC4xOTUyNjIgMTIuNjMzMiAtMC4xOTUyNjIgMTMuNDE0MiAwLjU4NTc4NkMxNC4xOTUzIDEuMzY2ODMgMTQuMTk1MyAyLjYzMzE2IDEzLjQxNDIgMy40MTQyMUwxMi42MjEzIDQuMjA3MTFMOS43OTI4OSAxLjM3ODY4TDEwLjU4NTggMC41ODU3ODZaIiBmaWxsPSIjMTExODI3Ii8+CjxwYXRoIGQ9Ik04LjM3ODY4IDIuNzkyODlMMCAxMS4xNzE2VjE0SDIuODI4NDJMMTEuMjA3MSA1LjYyMTMyTDguMzc4NjggMi43OTI4OVoiIGZpbGw9IiMxMTE4MjciLz4KPC9zdmc+) 0 16, pointer"};function getPathPoint(curr,index){return 0===index?"M "+curr[0]+" "+curr[1]:"L "+curr[0]+" "+curr[1]}__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js");var CursorClickIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CursorClickIcon.js"),constants=__webpack_require__("./src/constants.ts"),select_utils=__webpack_require__("./src/utils/select/utils.ts"),getSelectedDrawingObjects=__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts"),unselectElement=__webpack_require__("./src/utils/select/unselectElement.ts"),alertAfterUpdate=(__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./src/utils/alertAfterUpdate.ts")),getRotateFromDiv=__webpack_require__("./src/utils/select/getRotateFromDiv.ts");function undo_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function SelectTool_undo_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SelectTool_undo_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectTool_undo_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectTool_undo_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function handleDragUndo(action,ctx){var _step,redoData=[],_iterator=undo_createForOfIteratorHelper(action.data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,object=Object(utils_utils.g)(ctx.objectsMap,obj.objectId),_object$container=object.container,bounds=_object$container.bounds,div=_object$container.div,left=obj.left,top=obj.top;redoData.push({objectId:obj.objectId,top:bounds.top,left:bounds.left}),bounds.top=top,bounds.left=left,div.style.left=left+"px",div.style.top=top+"px",Object(alertAfterUpdate.a)(object,ctx)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return action.data=redoData,action}function handleRotateUndo(action,ctx){var _step2,redoData=[],_iterator2=undo_createForOfIteratorHelper(action.data);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value,object=Object(utils_utils.g)(ctx.objectsMap,obj.objectId),div=object.container.div,currRotate=Object(getRotateFromDiv.a)(div);redoData.push({objectId:obj.objectId,rotate:currRotate}),div.style.transform="rotate("+obj.rotate+"deg)",Object(alertAfterUpdate.a)(object,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return action.data=redoData,action}function handelResizeUndo(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),undoData=action.data,currBounds=object.container.bounds,redoBounds=Object.assign({},currBounds);return function setDivToBounds(div,bounds){div.style.left=bounds.left+"px",div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px"}(object.container.div,undoData.bounds),object.container.bounds=undoData.bounds,Object(utils_utils.i)(ctx.drawingTools,object.toolId).onResize(object,Object.assign({},ctx,{previousPoint:[currBounds.left,currBounds.top],newPoint:[undoData.bounds.left,undoData.bounds.top]})),action.data.bounds=redoBounds,action}function SelectTool_slicedToArray(arr,i){return function SelectTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SelectTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||SelectTool_unsupportedIterableToArray(arr,i)||function SelectTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return SelectTool_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||SelectTool_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SelectTool_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return SelectTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SelectTool_arrayLikeToArray(o,minLen):void 0}}function SelectTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SelectTool={tooltip:"Select tool",icon:Object(jsx_runtime.jsx)(CursorClickIcon.a,{style:{transform:"translate(-2px, -1px)"}}),id:constants.h,onDrawStart:function onDrawStart(data){data.container.div.style.border="1px solid "+constants.d.primary.main,data.container.div.style.backgroundColor=constants.d.primary.light+"4d"},onDrawing:function onDrawing(data,ctx){Object(utils.m)(data),data.coords.splice(1),function handleTrySelectObjects(currData,ctx){var _ctx$lastEvent$shiftK2,_ctx$lastEvent2,didPressShift=null!==(_ctx$lastEvent$shiftK2=null===(_ctx$lastEvent2=ctx.lastEvent)||void 0===_ctx$lastEvent2?void 0:_ctx$lastEvent2.shiftKey)&&void 0!==_ctx$lastEvent$shiftK2&&_ctx$lastEvent$shiftK2,selectedIds=_toConsumableArray(ctx.fullState[constants.h].selectedIds),elementIdsToSelect=function getElementIdsInsideOfBounds(renderedMap,bounds,ctx){var _step,elementIdsToSelect=[],_iterator=function SelectTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=SelectTool_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(renderedMap.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=SelectTool_slicedToArray(_step.value,2),eleId=_ref2[0],eleData=_ref2[1];Object(unselectElement.a)(eleData,ctx),Object(utils.g)(bounds,eleData.container.bounds)&&elementIdsToSelect.push(eleId)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return elementIdsToSelect}(ctx.objectsMap,currData.container.bounds,ctx);didPressShift&&(elementIdsToSelect=_construct(Array,_toConsumableArray(new Set([].concat(_toConsumableArray(elementIdsToSelect),_toConsumableArray(selectedIds))))));handleSelectIds(ctx,elementIdsToSelect)}(data,ctx)},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;ctx.viewContainer.removeChild(data.container.div),objectsMap.delete(data.container.id),Object(utils_utils.l)('[id^="react-draw-cursor"',ctx.viewContainer),SelectTool_tryClickObject(data,ctx)},onResize:function onResize(data){},onUnMount:function onUnMount(ctx){for(var _i=0,_Object$values=Object.values(ctx.objectsMap);_i<_Object$values.length;_i++){var object=_Object$values[_i];Object(unselectElement.a)(object,ctx)}},onUnPickTool:function onUnPickTool(ctx){var state=ctx.fullState[constants.h],selectedIds=state.selectedIds;if(0!==selectedIds.length){var objects=Object(getSelectedDrawingObjects.a)(selectedIds,ctx.objectsMap);Object(select_utils.e)(objects,ctx),state.selectedIds=[]}},onKeyPress:function onKeyPress(event,ctx){if("Delete"===event.key){var selectedIds=ctx.fullState[constants.h].selectedIds;if(!(selectedIds.length<1)){var resultAction=deleteCreatedObjects({toolId:constants.h,toolType:"top-bar-tool",objectId:"",data:_toConsumableArray(selectedIds),action:"delete"},ctx);Object(pushActionToStack.a)(resultAction,ctx)}}},undoHandlers:{delete:recreateDeletedObjects,create:deleteCreatedObjects,drag:handleDragUndo,rotate:handleRotateUndo,resize:handelResizeUndo},redoHandlers:{delete:recreateDeletedObjects,create:deleteCreatedObjects,drag:handleDragUndo,rotate:handleRotateUndo,resize:handelResizeUndo}},SelectTool_tryClickObject=function tryClickObject(drawingData,ctx){var _ctx$lastEvent$shiftK,_ctx$lastEvent,didPressShift=null!==(_ctx$lastEvent$shiftK=null===(_ctx$lastEvent=ctx.lastEvent)||void 0===_ctx$lastEvent?void 0:_ctx$lastEvent.shiftKey)&&void 0!==_ctx$lastEvent$shiftK&&_ctx$lastEvent$shiftK,firstPoint=drawingData.coords[0],lastPoint=drawingData.coords[drawingData.coords.length-1];if(Object(utils.b)(lastPoint,firstPoint)<constants.g){var bounds=Object(utils.a)(Object(utils.h)(firstPoint),lastPoint);SelectTool_handleTryClickObject(ctx,bounds,didPressShift)}},SelectTool_handleTryClickObject=function handleTryClickObject(ctx,bounds,didPressShift){var clickedEle=Object(utils.e)(ctx.objectsMap,bounds),ids=Object(select_utils.f)(ctx).ids;return didPressShift||(ids=[]),null!==clickedEle&&(ids=ids.concat([clickedEle.container.id])),handleSelectIds(ctx,ids),ids};function handleSelectIds(ctx,objectIds){ctx.fullState[constants.h].selectedIds=objectIds;var objects=Object(getSelectedDrawingObjects.a)(objectIds,ctx.objectsMap);return 1===objects.length?(Object(select_utils.b)(ctx.drawingTools,objects[0],ctx),Object(select_utils.c)(objects[0],ctx)):objects.length>1?Object(select_utils.d)(objects,ctx):void 0}var SquareBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/SquareBoldIcon.js"),SquareTool={id:constants.i,tooltip:"Square Tool",icon:Object(jsx_runtime.jsx)(SquareBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var newSquare=function makeSquareDiv(style){var div=document.createElement("div");return div.style.width="100%",div.style.height="100%",div.style.border=style.lineWidth+"px solid "+style.color,div.style.borderRadius="2px",div.style.boxSizing="border-box",div.style.backgroundColor=style.background,div.style.opacity=style.opacity,div}(data.style);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){Object(utils.m)(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},onResize:function onResize(data,ctx){},styleHandlers:{color:updateEleBorderColor,background:updateEleBackgroundColor,lineWidth:updateEleLineWidth,opacity:updateEleOpacity}};var CircleBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/CircleBoldIcon.js"),CircleTool={id:constants.c,tooltip:"Circle tool",icon:Object(jsx_runtime.jsx)(CircleBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var newSquare=function makeCircleDiv(styles){var newDiv=document.createElement("div");return newDiv.style.width="100%",newDiv.style.height="100%",newDiv.style.border=borderFromStyles(styles),newDiv.style.backgroundColor=styles.background,newDiv.style.borderRadius="50%",newDiv.style.boxSizing="border-box",newDiv.style.opacity=styles.opacity,newDiv}(data.style);data.container.div.appendChild(newSquare),data.element=newSquare},onDrawing:function onDrawing(data){Object(utils.m)(data),data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},redoHandlers:{delete:redoDelete,create:undoCreate,color:undoEleBorderColor,background:undoEleBackgroundColor,lineWidth:undoEleLineWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateEleBorderColor(data,value)},background:function background(data,value,_ctx){return updateEleBackgroundColor(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateEleLineWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}}};var DiamondBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DiamondBoldIcon.js"),DiamondTool={id:constants.e,tooltip:"Diamond tool",icon:Object(jsx_runtime.jsx)(DiamondBoldIcon.a,{}),onDrawStart:function onDrawStart(data){var div=data.container.div,newSvg=makeDiamondSvg(data);div.appendChild(newSvg)},onDrawing:function onDrawing(data){Object(utils.m)(data);var div=data.container.div,newSvg=makeDiamondSvg(data);div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){Object(utils.l)(data.element,data.container.bounds)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,background:undoSvgPathFill,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,background:undoSvgPathFill,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:updateSvgPathStroke,background:function updateSvgPathFill(data,value){return updateSvgStyle(data,"background","fill",value)},lineWidth:updateSvgPathWidth,opacity:updateEleOpacity}};function makeDiamondSvg(data){var lineWidth=parseInt(data.style.lineWidth),bounds=data.container.bounds,newSvg=createSvg(bounds.right-bounds.left+lineWidth,bounds.bottom-bounds.top+lineWidth,data.style.opacity),path=function drawDiamondInBounds(bounds,style){var newPath=createPathSvg(style),lineWidth=parseInt(style.lineWidth);return newPath.setAttribute("d",function getPathDiamondString(bounds,lineWidth){var height=bounds.bottom-bounds.top,width=bounds.right-bounds.left,leftCorner=lineWidth/2+" "+height/2;return"M "+leftCorner+" L "+width/2+" "+lineWidth/2+" L "+(width-lineWidth/2)+" "+height/2+" L "+width/2+" "+(height-lineWidth/2)+" L "+leftCorner}(bounds,lineWidth)),newPath}(bounds,data.style);return newSvg.appendChild(path),newSvg}var HorizontalLineIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/HorizontalLineIcon.js");function lines_slicedToArray(arr,i){return function lines_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function lines_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function lines_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return lines_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lines_arrayLikeToArray(o,minLen)}(arr,i)||function lines_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lines_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function calcOrientation(pointA,pointB){var _pointA=lines_slicedToArray(pointA,2),x1=_pointA[0],y1=_pointA[1],_pointB=lines_slicedToArray(pointB,2),x2=_pointB[0],y2=_pointB[1];return x2===x1?y2>y1?"down":"up":y2===y1?x2>x1?"right":"left":x2<x1&&y2<y1?"nw":x2>x1&&y2<y1?"ne":x2>x1&&y2>y1?"se":"sw"}function getStartAndEndPoint(width,height,orientation){return"right"===orientation?[[0,0],[width,0]]:"left"===orientation?[[width,0],[0,0]]:"down"===orientation?[[0,0],[0,height]]:"up"===orientation?[[0,height],[0,0]]:"nw"===orientation?[[width,height],[0,0]]:"ne"===orientation?[[0,height],[width,0]]:"se"===orientation?[[0,0],[width,height]]:[[width,0],[0,height]]}function StraightLineTool_slicedToArray(arr,i){return function StraightLineTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StraightLineTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function StraightLineTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StraightLineTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StraightLineTool_arrayLikeToArray(o,minLen)}(arr,i)||function StraightLineTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StraightLineTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StraightLineTool={id:constants.j,tooltip:"Straight Line Tool",icon:Object(jsx_runtime.jsx)(HorizontalLineIcon.a,{}),onDrawStart:function onDrawStart(data){var div=data.container.div,lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity),newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),div.append(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,viewContainer){Object(utils.m)(data);var orientation=calcOrientation(data.coords[0],data.coords[data.coords.length-1]);data.customData.set("orientation",orientation);var newSvg=makeLineInOrientation(data,orientation),div=data.container.div;div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){var orientation=data.customData.get("orientation");if(!orientation)throw new Error("orientation not set");var newSvg=makeLineInOrientation(data,orientation),div=data.container.div;div.removeChild(data.element),div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:updateSvgPathStroke,lineWidth:updateSvgPathWidth,opacity:updateEleOpacity}};function makeLineInOrientation(data,orientation){var bounds=data.container.bounds,width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,newSvg=createSvg(width,height,data.style.opacity);newSvg.style.overflow="visible";var _getStartAndEndPoint2=StraightLineTool_slicedToArray(getStartAndEndPoint(width,height,orientation),2),start=_getStartAndEndPoint2[0],end=_getStartAndEndPoint2[1],lineSvg=createLineSvg(data.style);return lineSvg.setAttribute("x1",start[0].toString()),lineSvg.setAttribute("y1",start[1].toString()),lineSvg.setAttribute("x2",end[0].toString()),lineSvg.setAttribute("y2",end[1].toString()),newSvg.appendChild(lineSvg),newSvg}__webpack_require__("./node_modules/core-js/modules/web.timers.js");var TextAreaTool={icon:Object(jsx_runtime.jsx)("span",{style:{display:"inline-block",fontWeight:"bold",fontSize:"20px"},children:"A"}),id:"react-draw-textarea-tool",tooltip:"Textarea Tool",cursor:"text",onDrawStart:function onDrawStart(data,ctx){!function setupContainer(data,ctx){var fontSize=12,padding=5,_data$container=data.container,div=_data$container.div,bounds=_data$container.bounds;bounds.bottom=bounds.top+fontSize+padding,div.style.height="",div.style.minHeight=bounds.bottom-bounds.top+"px",div.style.minWidth=div.style.width,div.style.width="",div.style.border="1px solid black",div.style.backgroundColor=data.style.background,div.style.padding=padding+"px",div.style.borderRadius="2px",div.style.boxSizing="border-box",div.style.color=data.style.color,div.style.fontSize=data.style.fontSize+"px";var styleTag=document.createElement("style");styleTag.innerHTML="\n\t.react-draw-cursor {\n\t\toutline: none;\t\t\n\t\theight: 100%;\n\t}",div.appendChild(styleTag);var cursorDiv=function makeCursorDiv(){var div=document.createElement("div");return div.setAttribute("contenteditable","true"),div.style.minWidth="1px",div.style.height="100%",div.className="react-draw-cursor",div}();function setBoundsOnTyping(){var trueBounds=div.getBoundingClientRect(),width=trueBounds.width,height=trueBounds.height;bounds.bottom=bounds.top+height,bounds.right=bounds.left+width}cursorDiv.style.opacity=data.style.opacity,data.element=cursorDiv,data.customData.set("handler",setBoundsOnTyping),cursorDiv.addEventListener("keypress",setBoundsOnTyping),div.appendChild(cursorDiv),setBoundsFromDiv(div,bounds),cursorDiv.setAttribute("tabindex","1"),function addCaptureHandler(data,ctx){var div=data.element,customData=data.customData;function captureDidType(e){var currentMS=(new Date).getTime(),lastCaptureMS=customData.get("lastCapture");if(lastCaptureMS){if(currentMS-lastCaptureMS>5e3){var target=e.target,_action={toolId:data.toolId,action:"input",data:target.innerHTML,toolType:"top-bar-tool",objectId:data.container.id};Object(pushActionToStack.a)(_action,ctx)}}else{var action={toolId:data.toolId,action:"input",data:"",toolType:"top-bar-tool",objectId:data.container.id};Object(pushActionToStack.a)(action,ctx)}customData.set("lastCapture",currentMS)}div.addEventListener("input",captureDidType),customData.set("capture",captureDidType)}(data,ctx),setTimeout((function(){cursorDiv.focus()}),0)}(data,ctx)},onDrawing:function onDrawing(data,viewContainer){},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onSelect:function onSelect(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},onUnSelect:function onUnSelect(data){cleanHandlers(data,!1),setBoundsFromDiv(data.container.div,data.container.bounds)},onAfterUpdate:function onAfterUpdate(data,ctx){cleanHandlers(data,!1),placeCaretAtEnd(data.element)},undoHandlers:{create:undoCreate,delete:redoDelete,input:undoTextAreaInput,color:undoTextAreaColor,background:undoTextAreaBackground,opacity:undoEleOpacity,fontSize:undoFontSize},redoHandlers:{create:undoCreate,delete:redoDelete,input:undoTextAreaInput,color:undoTextAreaColor,background:undoTextAreaBackground,opacity:undoEleOpacity,fontSize:undoFontSize},onDeleteObject:function onDeleteObject(data,ctx){cleanHandlers(data,!0)},styleHandlers:{color:function updateTextColor(data,value){return updateTextStyle(data,"color","color",value)},background:function updateTextBackgroundColor(data,value){return updateTextStyle(data,"background","backgroundColor",value)},opacity:updateEleOpacity,fontSize:function updateTextAreaFontSize(data,value){var curr=data.style.fontSize;return data.style.fontSize=value,data.container.div.style.fontSize=value+"px",setBoundsFromDiv(data.container.div,data.container.bounds),actionObjToSave(data,"fontSize",curr)}}};function undoFontSize(action,ctx){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),curr=object.style.fontSize,styleToSave=action.data;return object.style.fontSize=styleToSave,object.container.div.style.fontSize=styleToSave+"px",action.data=curr,action}function undoTextAreaInput(action,ctx){var ele=Object(utils_utils.g)(ctx.objectsMap,action.objectId).element;if(!ele)throw new Error("tried to undo text but no ele found");var currentInput=ele.innerHTML,undoInput=action.data;return ele.innerHTML=undoInput,action.data=currentInput,action}function undoTextAreaColor(action,ctx){return undoTextAreaStyle(action,ctx,"color","color")}function undoTextAreaBackground(action,ctx){return undoTextAreaStyle(action,ctx,"background","backgroundColor")}function undoTextAreaStyle(action,ctx,dataKey,divKey){var object=Object(utils_utils.g)(ctx.objectsMap,action.objectId),currColor=object.style[dataKey],colorTo=action.data;return object.style[dataKey]=colorTo,object.container.div.style[divKey]=colorTo,action.data=currColor,action}function cleanHandlers(data,deleteCapture){var textArea=data.element;if(textArea){var handler=data.customData.get("handler");handler&&(textArea.removeEventListener("keypress",handler),data.customData.delete("handler"));var capture=data.customData.get("capture");deleteCapture&&capture&&(textArea.removeEventListener("input",capture),data.customData.delete("capture"))}}function setBoundsFromDiv(div,bounds){var trueBounds=div.getBoundingClientRect(),width=trueBounds.width,height=trueBounds.height;bounds.bottom=bounds.top+height,bounds.right=bounds.left+width}function placeCaretAtEnd(el){if(el.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var range=document.createRange();range.selectNodeContents(el),range.collapse(!1);var sel=window.getSelection();if(sel)return sel.removeAllRanges(),sel.addRange(range),!0}return console.error("cannot place caret at end"),!1}var EraserIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/EraserIcon.js");function EraseTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function EraseTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EraseTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EraseTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function EraseTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EraseTool={icon:Object(jsx_runtime.jsx)(EraserIcon.a,{}),tooltip:"Eraser tool",id:constants.f,cursor:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOSAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjA2MTYgMC41ODY1NzNMNS4zMTE1OSA1LjMzNjU3TDAuNTgxNTg1IDEwLjE3NjZDMC4yMDkwODQgMTAuNTUxMyAwIDExLjA1ODIgMCAxMS41ODY2QzAgMTIuMTE0OSAwLjIwOTA4NCAxMi42MjE4IDAuNTgxNTg1IDEyLjk5NjZMNC44ODE1OSAxNy4yOTY2QzUuMDY3ODUgMTcuNDgxMyA1LjMxOTI1IDE3LjU4NTUgNS41ODE1OSAxNy41ODY2SDE3LjU4MTZWMTUuNTg2NkgxMC41ODE2TDE3LjgwMTYgOC4zNjY1N0MxNy45ODc1IDguMTgwODMgMTguMTM1MSA3Ljk2MDI1IDE4LjIzNTcgNy43MTc0NUMxOC4zMzY0IDcuNDc0NjYgMTguMzg4MiA3LjIxNDQgMTguMzg4MiA2Ljk1MTU3QzE4LjM4ODIgNi42ODg3NCAxOC4zMzY0IDYuNDI4NDkgMTguMjM1NyA2LjE4NTY5QzE4LjEzNTEgNS45NDI5IDE3Ljk4NzUgNS43MjIzMiAxNy44MDE2IDUuNTM2NTdMMTIuODkxNiAwLjU4NjU3M0MxMi43MDU4IDAuNDAwNjIgMTIuNDg1MyAwLjI1MzEwMiAxMi4yNDI1IDAuMTUyNDU0QzExLjk5OTcgMC4wNTE4MDUzIDExLjczOTQgMCAxMS40NzY2IDBDMTEuMjEzOCAwIDEwLjk1MzUgMC4wNTE4MDUzIDEwLjcxMDcgMC4xNTI0NTRDMTAuNDY3OSAwLjI1MzEwMiAxMC4yNDczIDAuNDAwNjIgMTAuMDYxNiAwLjU4NjU3M1YwLjU4NjU3M1pNNS45OTE1OSAxNS41ODY2TDEuOTkxNTkgMTEuNTg2Nkw2Ljc0MTU5IDYuNzQ2NTdMNy40ODE1OSA1Ljk5NjU3TDEyLjQzMTYgMTAuOTQ2Nkw3Ljg3MTU5IDE1LjUwNjZMNy44MDE1OSAxNS41ODY2SDUuOTkxNTlaIiBmaWxsPSJibGFjayI+PC9wYXRoPgo8L3N2Zz4=) 0 16, pointer",onDrawStart:function onDrawStart(data,viewContainer){},onDrawing:function onDrawing(data,ctx){var viewContainer=ctx.viewContainer;Object(utils.c)(data);var boxSize=Object(utils.d)(data),newSvg=createSvg(boxSize.width,boxSize.height,"1"),eraserPath=function getEraserPath(data,viewContainer){var newPath=createPathSvg(data.style);return newPath.style.strokeWidth="10px",newPath.setAttribute("d",function getEraserPathDString(data,viewContainer){for(var pathString="",lastPoint=data.coords[0],i=0;i<data.coords.length;i++){var point=data.coords[i],mappedPoint=Object(utils.k)(point,data.container,viewContainer);pathString+=EraseTool_getPathPoint(mappedPoint,lastPoint,i),lastPoint=mappedPoint,i!==data.coords.length-1&&(pathString+=" ")}return pathString}(data,viewContainer)),newPath.setAttribute("stroke","rgba(232, 16, 84, 0.142)"),newPath}(data,viewContainer);newSvg.appendChild(eraserPath),data.container.div.innerHTML="",data.container.div.appendChild(newSvg),data.element=newSvg;var _step,lastPoint=data.coords[data.coords.length-1],bounds=Object(utils.h)(lastPoint),_iterator=EraseTool_createForOfIteratorHelper(ctx.objectsMap.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var objectId=_step.value,object=ctx.objectsMap.get(objectId);object&&(Object(utils.g)(object.container.bounds,bounds)&&(Object(utils_utils.e)(objectId,ctx),addObjectToCustomState(ctx,object)))}}catch(err){_iterator.e(err)}finally{_iterator.f()}},onDrawEnd:function onDrawEnd(data,ctx){var objectsMap=ctx.objectsMap;if(ctx.viewContainer.removeChild(data.container.div),objectsMap.delete(data.container.id),Object(utils_utils.l)('[id^="react-draw-erase-tool"',ctx.viewContainer),ctx.fullState[constants.f].deletedObjects.size>0){var action={toolId:data.toolId,toolType:"top-bar-tool",objectId:"",action:"delete",data:ctx.fullState[constants.f].deletedObjects};ctx.fullState[constants.f].deletedObjects=new Map,Object(pushActionToStack.a)(action,ctx)}},undoHandlers:{delete:recreateDeletedObjects},redoHandlers:{create:deleteCreatedObjects},onResize:function onResize(data,ctx){}};function addObjectToCustomState(ctx,object){ctx.fullState[constants.f].deletedObjects.set(object.container.id,object)}function EraseTool_getPathPoint(curr,prev,index){return 0===index?"M "+curr[0]+" "+curr[1]:"l "+(curr[0]-prev[0])+" "+(curr[1]-prev[1])}var UndoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/UndoIcon.js");function UndoTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function UndoTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UndoTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UndoTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function UndoTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var UndoTool={id:"react-draw-undo-tool",tooltip:"Undo",icon:Object(jsx_runtime.jsx)(UndoIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.undoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.undoStack.pop();if(lastAction)return"top-bar-tool"===lastAction.toolType?function handleTopBarUndo(ctx,action){var toolId=action.toolId,tool=Object(utils_utils.i)(ctx.drawingTools,toolId),handlers=tool.undoHandlers,actionKey=action.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];handler||console.error("tool:",tool,"does not implement undo action:",actionKey);var result=handler(action,ctx);ctx.shouldKeepHistory&&ctx.redoStack.push(result)}(ctx,lastAction):"batch"===lastAction.toolType?function handleBatchAction(ctx,action){var _step,data=action.data,result=[],_iterator=UndoTool_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,toolId=obj.toolId,tool=Object(utils_utils.i)(ctx.drawingTools,toolId),handlers=tool.undoHandlers,actionKey=obj.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];if(!handler)return void console.error("tool:",tool,"does not implement action:",actionKey);result.push(handler(obj,ctx))}}catch(err){_iterator.e(err)}finally{_iterator.f()}action.data=result,ctx.shouldKeepHistory&&ctx.redoStack.push(action)}(ctx,lastAction):void 0}};var RedoIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/RedoIcon.js");function RedoTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function RedoTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RedoTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RedoTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function RedoTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var RedoTool={id:"react-draw-redo-tool",tooltip:"Redo",icon:Object(jsx_runtime.jsx)(RedoIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return ctx.redoStack.length>0?"show":"disabled"},handleContext:function handleContext(ctx){var lastAction=ctx.redoStack.pop();if(lastAction)return"top-bar-tool"===lastAction.toolType?function handleTopBarRedo(ctx,action){var toolId=action.toolId,tool=Object(utils_utils.i)(ctx.drawingTools,toolId),handlers=tool.redoHandlers,actionKey=action.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];handler||console.error("tool:",tool,"does not implement undo action:",actionKey);var result=handler(action,ctx);ctx.shouldKeepHistory&&ctx.undoStack.push(result)}(ctx,lastAction):"batch"===lastAction.toolType?function RedoTool_handleBatchAction(ctx,action){var _step,data=action.data,result=[],_iterator=RedoTool_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value,toolId=obj.toolId,tool=Object(utils_utils.i)(ctx.drawingTools,toolId),handlers=tool.redoHandlers,actionKey=obj.action;if(!handlers)return void console.error("tool:",tool,"does not implement undo functionality");var handler=handlers[actionKey];if(!handler)return void console.error("tool:",tool,"does not implement action:",actionKey);result.push(handler(obj,ctx))}}catch(err){_iterator.e(err)}finally{_iterator.f()}action.data=result,ctx.shouldKeepHistory&&ctx.undoStack.push(action)}(ctx,lastAction):void 0}};var TrashCanBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/TrashCanBoldIcon.js"),TrashTool={id:"react-draw-trash-tool",icon:Object(jsx_runtime.jsx)(TrashCanBoldIcon.a,{}),tooltip:"Delete selected objects",getDisplayMode:function getDisplayMode(ctx){return Object(select_utils.a)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=Object(select_utils.a)(ctx);selectedIds.length<1||Object(utils_utils.b)(selectedIds,ctx)}},DuplicateIcon=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/DuplicateIcon.js")),DuplicateTool={id:"react-draw-duplicate-tool",tooltip:"Duplicate objects",icon:Object(jsx_runtime.jsx)(DuplicateIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return Object(select_utils.a)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=Object(select_utils.a)(ctx);if(!(selectedIds.length<1)){var objects=selectedIds.map((function(id){return Object(utils_utils.g)(ctx.objectsMap,id)}));Object(select_utils.e)(objects,ctx);var newObjects=objects.map((function(o){return function duplicateObject(object,ctx){var _object$container=object.container,div=_object$container.div,bounds=(_object$container.id,_object$container.bounds),newDiv=div.cloneNode(!0),_makeNewId=function makeNewId(divId){var newId=Object(utils.j)(6),parts=divId.split("-");return parts[parts.length-1]=Object(utils.j)(6),{divId:parts.join("-"),newId:newId}}(div.id),newId=_makeNewId.newId,divId=_makeNewId.divId;newDiv.id=divId;var data={coords:object.coords.slice(0),toolId:object.toolId,element:newDiv.lastElementChild,style:Object.assign({},object.style),customData:new Map(object.customData),container:{bounds:{top:bounds.top+10,left:bounds.left+10,bottom:bounds.bottom+10,right:bounds.right+10},div:newDiv,id:newId}};newDiv.style.top=data.container.bounds.top+"px",newDiv.style.left=data.container.bounds.left+"px";var tool=Object(utils_utils.i)(ctx.drawingTools,object.toolId);if(tool.onDuplicate)return tool.onDuplicate(data,ctx);return data}(o,ctx)})),data=new Map,resultAction=recreateDeletedObjects({toolId:constants.h,objectId:"",toolType:"top-bar-tool",action:"delete",data:newObjects.reduce((function(prev,cur){return prev.set(cur.container.id,cur),prev}),data)},ctx);Object(pushActionToStack.a)(resultAction,ctx),1===selectedIds.length?Object(select_utils.c)(newObjects[0],ctx):Object(select_utils.d)(newObjects,ctx),ctx.fullState[constants.h].selectedIds=newObjects.map((function(o){return o.container.id}))}}};__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");var BackIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/BackIcon.js");function BringBackTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringBackTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringBackTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringBackTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringBackTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var BringBackTool={id:"react-draw-back-tool",icon:Object(jsx_runtime.jsx)(BackIcon.a,{}),tooltip:"Move object back",getDisplayMode:function getDisplayMode(ctx){return Object(select_utils.a)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=Object(select_utils.a)(ctx);if(!(selectedIds.length<1)){var _step,selectObjects=selectedIds.map((function(id){return Object(utils_utils.g)(ctx.objectsMap,id)})),lowestZIndex=1/0,_iterator=BringBackTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var z=pushObjectUp(_step.value);z<lowestZIndex&&(lowestZIndex=z)}}catch(err){_iterator.e(err)}finally{_iterator.f()}selectObjects.forEach((function(obj){obj.container.div.style.zIndex=lowestZIndex.toString(),obj.style.zIndex=lowestZIndex.toString()}))}}};function pushObjectUp(data){var currZ=parseInt(data.style.zIndex);return data.container.div.style.zIndex=(currZ+1).toString(),data.style.zIndex=(currZ+1).toString(),currZ}var ForwardIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/ForwardIcon.js");function BringForwardTool_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function BringForwardTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BringForwardTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BringForwardTool_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function BringForwardTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var BringForwardTool={id:"react-draw-forward-tool",tooltip:"Move object forward",icon:Object(jsx_runtime.jsx)(ForwardIcon.a,{}),getDisplayMode:function getDisplayMode(ctx){return Object(select_utils.a)(ctx).length>0?"show":"disabled"},handleContext:function handleContext(ctx){var selectedIds=Object(select_utils.a)(ctx);if(!(selectedIds.length<1)){var _step,selectObjects=selectedIds.map((function(id){return Object(utils_utils.g)(ctx.objectsMap,id)})),lowestZIndex=-1/0,_iterator=BringForwardTool_createForOfIteratorHelper(ctx.objectsMap.values());try{for(_iterator.s();!(_step=_iterator.n()).done;){var z=pushObjectDown(_step.value);z>lowestZIndex&&(lowestZIndex=z)}}catch(err){_iterator.e(err)}finally{_iterator.f()}selectObjects.forEach((function(obj){obj.container.div.style.zIndex=lowestZIndex.toString(),obj.style.zIndex=lowestZIndex.toString()}))}}};function pushObjectDown(data){var currZ=parseInt(data.style.zIndex);return data.container.div.style.zIndex=(currZ-1).toString(),data.style.zIndex=(currZ-1).toString(),currZ}__webpack_require__("./node_modules/core-js/modules/es.string.replace.js");function ColorPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,label=_ref.label,styleValue=_ref.styleValue,id=Object(react.useRef)(Object(utils.j)(5));return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:Object(jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:label})}),Object(jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[Object(jsx_runtime.jsx)("span",{style:{display:"inline-block",borderRadius:5,width:30,height:30,backgroundColor:styleValue}}),Object(jsx_runtime.jsxs)("div",{style:{marginLeft:10,display:"flex"},children:[Object(jsx_runtime.jsx)("span",{style:{borderRadius:"5px 0px 0px 5px",width:30,padding:5,fontWeight:"bold",fontSize:18,textAlign:"center",color:"grey",backgroundColor:"lightgray"},children:"#"}),Object(jsx_runtime.jsx)("input",{id:id.current,value:styleValue.replace("#",""),onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,"transparent"===value?value:"#"+value)},style:{width:80,borderRadius:"0px 5px 5px 0px"}})]})]})]})}ColorPicker.displayName="ColorPicker";var StyleComponents_ColorPicker=ColorPicker;try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"src/StyleComponents/ColorPicker.tsx#ColorPicker"})}catch(__react_docgen_typescript_loader_error){}var Color_ColorStyle=function ColorStyle(props){return Object(jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"color"}))};Color_ColorStyle.displayName="ColorStyle";var Color=Color_ColorStyle,Background_BackgroundStyle=function BackgroundStyle(props){return Object(jsx_runtime.jsx)(StyleComponents_ColorPicker,Object.assign({},props,{label:"background"}))};Background_BackgroundStyle.displayName="BackgroundStyle";var Background=Background_BackgroundStyle;function LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=Object(react.useRef)(Object(utils.j)(5));return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:Object(jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:"line width"})}),Object(jsx_runtime.jsx)("div",{style:{width:"100%"},children:Object(jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"number",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",step:"1"})})]})}LineWidthPicker.displayName="LineWidthPicker";try{LineWidth.displayName="LineWidth",LineWidth.__docgenInfo={description:"",displayName:"LineWidth",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/LineWidth.tsx#LineWidth"]={docgenInfo:LineWidth.__docgenInfo,name:"LineWidth",path:"src/StyleComponents/LineWidth.tsx#LineWidth"})}catch(__react_docgen_typescript_loader_error){}function OpacityPicker_LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=Object(react.useRef)(Object(utils.j)(5));return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:Object(jsx_runtime.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:["opacity (",styleValue,")"]})}),Object(jsx_runtime.jsx)("div",{style:{width:"100%"},children:Object(jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"range",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",max:"1",step:"0.1"})})]})}OpacityPicker_LineWidthPicker.displayName="LineWidthPicker";try{OpacityPicker.displayName="OpacityPicker",OpacityPicker.__docgenInfo={description:"",displayName:"OpacityPicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/OpacityPicker.tsx#OpacityPicker"]={docgenInfo:OpacityPicker.__docgenInfo,name:"OpacityPicker",path:"src/StyleComponents/OpacityPicker.tsx#OpacityPicker"})}catch(__react_docgen_typescript_loader_error){}function FontSizePicker_LineWidthPicker(_ref){var onUpdate=_ref.onUpdate,styleKey=_ref.styleKey,styleValue=_ref.styleValue,id=Object(react.useRef)(Object(utils.j)(5));return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{style:{textAlign:"left",marginBottom:5},children:Object(jsx_runtime.jsx)("label",{style:{fontWeight:"bold"},htmlFor:id.current,children:"font size"})}),Object(jsx_runtime.jsx)("div",{style:{width:"100%"},children:Object(jsx_runtime.jsx)("input",{id:id.current,value:styleValue,onChange:function handleChange(e){var value=e.target.value;onUpdate(styleKey,value)},type:"number",style:{boxSizing:"border-box",width:168,height:30,borderRadius:5,paddingLeft:10,fontSize:19,lineHeight:"1.6"},min:"0",step:"1"})})]})}FontSizePicker_LineWidthPicker.displayName="LineWidthPicker";try{FontSizePicker.displayName="FontSizePicker",FontSizePicker.__docgenInfo={description:"",displayName:"FontSizePicker",props:{onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(key: keyof ToolPropertiesMap, value: string) => void"}},styleKey:{defaultValue:null,description:"",name:"styleKey",required:!0,type:{name:"string"}},styleValue:{defaultValue:null,description:"",name:"styleValue",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StyleComponents/FontSizePicker.tsx#FontSizePicker"]={docgenInfo:FontSizePicker.__docgenInfo,name:"FontSizePicker",path:"src/StyleComponents/FontSizePicker.tsx#FontSizePicker"})}catch(__react_docgen_typescript_loader_error){}var ArrowRightBoldIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/ArrowRightBoldIcon.js");function ArrowTool_slicedToArray(arr,i){return function ArrowTool_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ArrowTool_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ArrowTool_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ArrowTool_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ArrowTool_arrayLikeToArray(o,minLen)}(arr,i)||function ArrowTool_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ArrowTool_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ArrowTool={icon:Object(jsx_runtime.jsx)(ArrowRightBoldIcon.a,{}),id:constants.a,tooltip:"Arrow Tool",onDrawStart:function onDrawStart(data){var div=data.container.div,lineWidth=parseInt(data.style.lineWidth),newSvg=createSvg(lineWidth,lineWidth,data.style.opacity),newPath=createCircle(lineWidth/2,data.style.color);newSvg.appendChild(newPath),div.append(newSvg),data.element=newSvg},onDrawing:function onDrawing(data,_ref){_ref.viewContainer;Object(utils.m)(data);var orientation=calcOrientation(data.coords[0],data.coords[data.coords.length-1]);data.customData.set("orientation",orientation);var newSvg=makeArrowSvg(data,orientation),div=data.container.div;div.innerHTML="",div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},onDrawEnd:function onDrawEnd(data,ctx){saveCreateToUndoStack(data,ctx),ctx.shouldSelectAfterCreate&&ctx.selectObject(data)},onResize:function onResize(data,ctx){var orientation=data.customData.get("orientation");if(!orientation)throw new Error("orientation not set");var newSvg=makeArrowSvg(data,orientation),div=data.container.div;div.removeChild(data.element),div.appendChild(newSvg),data.element=newSvg,data.coords.splice(1)},undoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},redoHandlers:{create:undoCreate,delete:redoDelete,color:undoSvgPathColor,lineWidth:undoSvgPathWidth,opacity:undoEleOpacity},styleHandlers:{color:function color(data,value,_ctx){return updateSvgPathStroke(data,value)},lineWidth:function lineWidth(data,value,_ctx){return updateSvgPathWidth(data,value)},opacity:function opacity(data,value,_ctx){return updateEleOpacity(data,value)}}};function makeArrowSvg(data,orientation){var lineWidth=parseInt(data.style.lineWidth),bounds=data.container.bounds,width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,_getStartAndEndPoint2=ArrowTool_slicedToArray(getStartAndEndPoint(width,height,orientation),2),start=_getStartAndEndPoint2[0],end=_getStartAndEndPoint2[1],newSvg=createSvg(width+lineWidth,height+lineWidth,data.style.opacity);newSvg.style.overflow="visible";var arrowLine=function makeArrowPath(data,pointA,pointB){var _pointA=ArrowTool_slicedToArray(pointA,2),x1=_pointA[0],y1=_pointA[1],_pointB=ArrowTool_slicedToArray(pointB,2),x2=_pointB[0],y2=_pointB[1],arrow=createPathSvg(data.style),D=[x1-x2,y1-y2],dx=D[0],dy=D[1],mag=Math.sqrt(dx*dx+dy*dy),uD=[dx/mag,dy/mag],uDx=uD[0],uDy=uD[1],axNormed=uDx*(Math.sqrt(3)/2)-.5*uDy,ayNormed=1*uDx/2+uDy*(Math.sqrt(3)/2),bxNormed=uDx*(Math.sqrt(3)/2)+.5*uDy,byNormed=.5*-uDx+uDy*(Math.sqrt(3)/2),lineLength=20,ax=-axNormed*lineLength,ay=-ayNormed*lineLength,bx=-bxNormed*lineLength,by=-byNormed*lineLength;return arrow.setAttribute("d","M "+x1+" "+y1+" L "+x2+" "+y2+" L "+(x2-ax)+" "+(y2-ay)+" L "+x2+" "+y2+" L "+(x2-bx)+" "+(y2-by)),arrow}(data,start,end);return newSvg.appendChild(arrowLine),newSvg}var _templateObject,TrashCanIcon=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/TrashCanIcon.js");var StyledButton=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").b.button(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  width: 180px;\n  font-size: 16px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 5px;\n  cursor: pointer;\n  border: none;\n  padding: 7px 10px;\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"])),constants.d.primary.light,constants.d.primary.main),ClearAllButton_ClearAllButton=function ClearAllButton(_ref){var getContext=_ref.getContext,buttonId=react_default.a.useRef(Object(utils.j)(6));return Object(jsx_runtime.jsxs)(StyledButton,{id:buttonId.current,onClick:function handleClearAll(){var ctx=getContext();if(0!==ctx.objectsMap.size){var objectKeys=ctx.objectsMap.keys();Object(utils_utils.b)(Array.from(objectKeys),ctx)}},children:[Object(jsx_runtime.jsx)("div",{style:{padding:"0px 5px",height:20},children:Object(jsx_runtime.jsx)(TrashCanIcon.a,{width:15,height:20})}),Object(jsx_runtime.jsx)("label",{htmlFor:buttonId.current,style:{padding:"0px 10px",pointerEvents:"none"},children:"Clear All"})]})};ClearAllButton_ClearAllButton.displayName="ClearAllButton";var MenuComponents_ClearAllButton=ClearAllButton_ClearAllButton},"./src/utils/alertAfterUpdate.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return alertAfterUpdate}));__webpack_require__("./node_modules/core-js/modules/es.array.find.js");function alertAfterUpdate(data,ctx){var toolId=data.toolId,tool=ctx.drawingTools.find((function(t){return t.id===toolId}));tool&&tool.onAfterUpdate&&tool.onAfterUpdate(data,ctx)}},"./src/utils/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return makeid})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isBrowser})),__webpack_require__.d(__webpack_exports__,"i",(function(){return makeNewBoundingDiv})),__webpack_require__.d(__webpack_exports__,"l",(function(){return scaleSvg})),__webpack_require__.d(__webpack_exports__,"k",(function(){return mapPointToRect})),__webpack_require__.d(__webpack_exports__,"c",(function(){return expandContainer})),__webpack_require__.d(__webpack_exports__,"m",(function(){return setContainerRect})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getElementsThatBoundsAreWithin})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isRectBounding})),__webpack_require__.d(__webpack_exports__,"b",(function(){return distance})),__webpack_require__.d(__webpack_exports__,"h",(function(){return makeBoundingRect})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addPointToBounds})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getBoxSize}));__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeid(length){for(var result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}function isBrowser(){return void 0!==typeof window}function makeNewBoundingDiv(relativePoint,globalStyles,toolId){if(!isBrowser())throw new Error("new bounding div called on the server.");var lineWidth=parseInt(globalStyles.lineWidth),_relativePoint=_slicedToArray(relativePoint,2),_makeNewDiv=function makeNewDiv(pointX,pointY,lineWidth,toolId){var id=makeid(6),div=document.createElement("div"),left=pointX-lineWidth,top=pointY-lineWidth;return div.id=toolId+"-"+id,div.style.width=2*lineWidth+"px",div.style.height=2*lineWidth+"px",div.style.position="absolute",div.style.left=left+"px",div.style.top=top+"px",div.style.pointerEvents="none",div.style.zIndex="1",div.style.boxSizing="border-box",{div:div,id:id,top:top,left:left,right:left+lineWidth+lineWidth,bottom:top+lineWidth+lineWidth}}(_relativePoint[0],_relativePoint[1],lineWidth,toolId);return{coords:[relativePoint],element:null,toolId:toolId,container:{id:_makeNewDiv.id,div:_makeNewDiv.div,bounds:{top:_makeNewDiv.top,left:_makeNewDiv.left,right:_makeNewDiv.right,bottom:_makeNewDiv.bottom}},style:globalStyles,customData:new Map}}function scaleSvg(svgEle,bounds){var _getOriginalDimension=function getOriginalDimensions(svg){var viewBox=svg.getAttribute("viewbox");if(!viewBox)throw new Error("no viewbox found on ele");var each=viewBox.split(" ");return{width:parseFloat(each[2]),height:parseFloat(each[3])}}(svgEle),width=_getOriginalDimension.width,height=_getOriginalDimension.height,widthDiff=(bounds.right-bounds.left)/width,heightDiff=(bounds.bottom-bounds.top)/height;svgEle.lastElementChild.style.transform="scale("+widthDiff+", "+heightDiff+")"}function mapPointToRect(point,container,viewContainer){var containerBounds=container.div.getBoundingClientRect(),viewBounds=viewContainer.getBoundingClientRect(),topOfCotainerRelativeToView=containerBounds.top-viewBounds.top,pointYRelativeToContainer=point[1]-topOfCotainerRelativeToView,leftOfContainerRelativeToView=containerBounds.left-viewBounds.left;return[point[0]-leftOfContainerRelativeToView,pointYRelativeToContainer]}function expandContainer(data){var didExapnd=!1,_data$coords=_slicedToArray(data.coords[data.coords.length-1],2),newX=_data$coords[0],newY=_data$coords[1],container=data.container,bounds=container.bounds,lineWidth=parseInt(data.style.lineWidth);return newX-lineWidth<=bounds.left?(bounds.left=newX-lineWidth,container.div.style.left=newX-lineWidth+"px",container.div.style.width=bounds.right+2*lineWidth-newX+"px",didExapnd=!0):newX+lineWidth>=bounds.right&&(bounds.right=newX+lineWidth,container.div.style.width=newX+2*lineWidth-bounds.left+"px",didExapnd=!0),newY+lineWidth>=bounds.bottom?(bounds.bottom=newY+lineWidth,container.div.style.height=newY+2*lineWidth-bounds.top+"px",didExapnd=!0):newY-lineWidth<=bounds.top&&(bounds.top=newY-lineWidth,container.div.style.top=newY-lineWidth+"px",container.div.style.height=bounds.bottom+2*lineWidth-newY+"px",didExapnd=!0),didExapnd}function setContainerRect(data){if(data.coords.length<2)throw new Error("data coords must be at least length 2");var _data$coords$=_slicedToArray(data.coords[0],2),firstX=_data$coords$[0],firstY=_data$coords$[1],_data$coords2=_slicedToArray(data.coords[data.coords.length-1],2),lastX=_data$coords2[0],lastY=_data$coords2[1],lineWidth=parseInt(data.style.lineWidth),minX=Math.min(firstX,lastX),minY=Math.min(firstY,lastY),maxX=Math.max(firstX,lastX),maxY=Math.max(firstY,lastY),_data$container=data.container,bounds=_data$container.bounds,div=_data$container.div;return bounds.left=minX,bounds.right=maxX,bounds.top=minY,bounds.bottom=maxY,div.style.top=minY+"px",div.style.left=minX+"px",div.style.width=maxX-minX+lineWidth+"px",div.style.height=maxY-minY+lineWidth+"px",data.coords}function getElementsThatBoundsAreWithin(renderedMap,bounds){var _step,itemToSelect=null,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(renderedMap.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _itemToSelect$style$z,_itemToSelect,_ref2=_slicedToArray(_step.value,2),eleData=(_ref2[0],_ref2[1]),zIndex=parseInt(eleData.style.zIndex);if(isRectBounding(eleData.container.bounds,bounds))(null!==(_itemToSelect$style$z=null===(_itemToSelect=itemToSelect)||void 0===_itemToSelect?void 0:_itemToSelect.style.zIndex)&&void 0!==_itemToSelect$style$z?_itemToSelect$style$z:0<zIndex)&&(itemToSelect=eleData)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return itemToSelect}function isRectBounding(bounds,object){return bounds.top<=object.top&&bounds.bottom>=object.bottom&&bounds.left<=object.left&&bounds.right>=object.right}function distance(pointA,pointB){return Math.sqrt(Math.pow(Math.abs(pointA[0]-pointB[0]),2)+Math.pow(Math.abs(pointA[1]-pointB[1]),2))}function makeBoundingRect(point){var _point=_slicedToArray(point,2),x=_point[0],y=_point[1];return{top:y,right:x,bottom:y,left:x}}function addPointToBounds(bounds,point){var top=bounds.top,right=bounds.right,bottom=bounds.bottom,left=bounds.left,_point2=_slicedToArray(point,2),x=_point2[0],y=_point2[1];return y>bottom?bottom=y:y<top&&(top=y),x<left?left=x:x>right&&(right=x),{top:top,right:right,bottom:bottom,left:left}}function getBoxSize(data){var bounds=data.container.bounds;return{width:bounds.right-bounds.left,height:bounds.bottom-bounds.top}}},"./src/utils/pushActionToStack.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return pushActionToStack}));__webpack_require__("./node_modules/core-js/modules/es.array.splice.js");function pushActionToStack(action,ctx){ctx.shouldKeepHistory&&(ctx.undoStack.push(action),ctx.redoStack.splice(0))}},"./src/utils/select/getRotateFromDiv.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getRotateFromDiv}));__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js");var rotateNumRegex=/-{0,1}\d+\.*\d*/g;function getRotateFromDiv(div){var rotateStyle=div.style.transform;if(!rotateStyle)return 0;var match=rotateStyle.match(rotateNumRegex);return match?parseFloat(match[0]):0}},"./src/utils/select/getSelectedDrawingObjects.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getSelectedDrawingObjects}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js");function getSelectedDrawingObjects(selectedIds,objects){return selectedIds.map((function(id){var object=objects.get(id);if(!object)throw new Error("object not found in map");return object}))}},"./src/utils/select/unselectElement.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return unselectElement}));__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _constants__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/constants.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function unselectElement(data,ctx){var objectId=data.container.id,div=data.container.div,state=ctx.fullState[_constants__WEBPACK_IMPORTED_MODULE_13__.h],handlers=state.handlers[objectId];if(handlers){var _step,_iterator=_createForOfIteratorHelper(handlers);try{for(_iterator.s();!(_step=_iterator.n()).done;){var handler=_step.value;handler.ele.removeEventListener(handler.eventName,handler.fn)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}var selectFrame=div.querySelector('[id^="select-frame"');state.handlers[objectId]=[],null!==selectFrame&&div.removeChild(selectFrame);var indexInSelectedIds=state.selectedIds.indexOf(objectId);indexInSelectedIds>=0&&state.selectedIds.splice(indexInSelectedIds,1)}},"./src/utils/select/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return selectManyElements})),__webpack_require__.d(__webpack_exports__,"f",(function(){return unselectEverythingAndReturnPrevious})),__webpack_require__.d(__webpack_exports__,"b",(function(){return notifyTool})),__webpack_require__.d(__webpack_exports__,"e",(function(){return unselectAll})),__webpack_require__.d(__webpack_exports__,"c",(function(){return selectElement})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getSelectedIdsFromFullState}));__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var constants=__webpack_require__("./src/constants.ts"),getRotateFromDiv=__webpack_require__("./src/utils/select/getRotateFromDiv.ts"),utils=__webpack_require__("./src/utils/utils.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getDiffCoords(data,ctx){var _getCenterPoint2=_slicedToArray(Object(utils.f)(data.container.bounds),2),centerX=_getCenterPoint2[0],centerY=_getCenterPoint2[1],currRotation=Object(getRotateFromDiv.a)(data.container.div);if(0===currRotation)return[ctx.newPoint[0]-ctx.previousPoint[0],ctx.newPoint[1]-ctx.previousPoint[1]];var rotatedPrev=rotatePoint(centerX,centerY,-(currRotation+10)*Math.PI/180,ctx.previousPoint),rotatedNew=rotatePoint(centerX,centerY,-(currRotation+10)*Math.PI/180,ctx.newPoint);return[rotatedNew[0]-rotatedPrev[0],rotatedNew[1]-rotatedPrev[1]]}function rotatePoint(cx,cy,angle,point){var s=Math.sin(angle),c=Math.cos(angle),px=point[0]-cx,py=point[1]-cy;return[px*c-py*s+cx,px*s+py*c+cy]}function resizeNE(data,ctx){var _getDiffCoords2=_slicedToArray(getDiffCoords(data,ctx),2),xDiff=_getDiffCoords2[0],yDiff=_getDiffCoords2[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.right+=xDiff,div.style.top=bounds.top+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeNW(data,ctx){var _getDiffCoords4=_slicedToArray(getDiffCoords(data,ctx),2),xDiff=_getDiffCoords4[0],yDiff=_getDiffCoords4[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom-5<=bounds.top+yDiff||(bounds.top+=yDiff,bounds.left+=xDiff,div.style.top=bounds.top+"px",div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeSE(data,ctx){var _getDiffCoords6=_slicedToArray(getDiffCoords(data,ctx),2),xDiff=_getDiffCoords6[0],yDiff=_getDiffCoords6[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+5>=bounds.right+xDiff||bounds.bottom+yDiff<=bounds.top+5||(bounds.right+=xDiff,bounds.bottom+=yDiff,div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}function resizeSW(data,ctx){var _getDiffCoords8=_slicedToArray(getDiffCoords(data,ctx),2),xDiff=_getDiffCoords8[0],yDiff=_getDiffCoords8[1],container=data.container,bounds=container.bounds,div=container.div;bounds.left+xDiff>=bounds.right-5||bounds.bottom+yDiff<=bounds.top+5||(bounds.bottom+=yDiff,bounds.left+=xDiff,div.style.left=bounds.left+"px",div.style.width=bounds.right-bounds.left+"px",div.style.height=bounds.bottom-bounds.top+"px")}var ROTATE_BUTTON_STYLES={top:"-45px",cursor:"grab",left:"calc(50% - 8px)"},SELECT_FRAME_DIV_STYLES={width:"calc(100% + 16px)",height:"calc(100% + 16px)",position:"absolute",border:"2px dotted "+constants.d.primary.main,top:"-6px",left:"-6px",cursor:"all-scroll",pointerEvents:"all",boxSizing:"border-box"},ROTATE_DOTTED_LINE_STYLES={width:"0px",height:"35px",borderLeft:"2px dotted black",position:"absolute",left:"5px",pointerEvents:"none"},SELECTED_CORNER_BUTTON={position:"absolute",borderRadius:"50%",width:"16px",height:"16px"},getSelectedDrawingObjects=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./src/utils/select/getSelectedDrawingObjects.ts")),alertAfterUpdate=__webpack_require__("./src/utils/alertAfterUpdate.ts"),pushActionToStack=__webpack_require__("./src/utils/pushActionToStack.ts");function dragDivs_slicedToArray(arr,i){return function dragDivs_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function dragDivs_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||dragDivs_unsupportedIterableToArray(arr,i)||function dragDivs_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dragDivs_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return dragDivs_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dragDivs_arrayLikeToArray(o,minLen):void 0}}function dragDivs_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function dragDivs(objects,prevPoint,newPoint){var _step,_newPoint=dragDivs_slicedToArray(newPoint,2),currentMouseX=_newPoint[0],currentMouseY=_newPoint[1],_prevPoint=dragDivs_slicedToArray(prevPoint,2),newLeft=currentMouseX-_prevPoint[0],newTop=currentMouseY-_prevPoint[1],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=dragDivs_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(objects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _obj$container=_step.value.container,bounds=_obj$container.bounds,div=_obj$container.div,left=bounds.left,top=bounds.top,right=bounds.right,bottom=bounds.bottom;bounds.left=left+newLeft,bounds.top=top+newTop,bounds.right=bounds.left+(right-left),bounds.bottom=bounds.top+(bottom-top),div.style.top=bounds.top+"px",div.style.left=bounds.left+"px"}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function startDragging(ctx,relativePoint){var state=ctx.fullState[constants.h],prevPoint=state.prevPoint;if(prevPoint){var selectedObjects=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap);dragDivs(selectedObjects,prevPoint,relativePoint),state.prevPoint=relativePoint,1===selectedObjects.length&&Object(alertAfterUpdate.a)(selectedObjects[0],ctx)}else console.error("handleDrag prev point not set")}function startDrag(ctx,relativePoint){ctx.fullState[constants.h].prevPoint=relativePoint,function pushDragToUndoStack(ctx){var state=ctx.fullState[constants.h],selectedObjects=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap),action={objectId:"",toolId:constants.h,toolType:"top-bar-tool",action:"drag",data:selectedObjects.map((function(o){return{objectId:o.container.id,top:o.container.bounds.top,left:o.container.bounds.left}}))};Object(pushActionToStack.a)(action,ctx)}(ctx)}function stopDrag(ctx){ctx.fullState[constants.h].prevPoint=null}function addHandlersToSelectFrame(selectFrame,objectId,ctx){var handleStartDrag=function handleStartDrag(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("mousemove",handleDrag),window.addEventListener("mouseup",handleStopDrag)},handleDrag=function handleDrag(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDrag=function handleStopDrag(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("mousemove",handleDrag),window.removeEventListener("mouseup",handleStopDrag)},handleStartDragTouch=function handleStartDragTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startDrag(ctx,relativePoint),window.addEventListener("touchmove",handleDragTouch),window.addEventListener("touchend",handleStopDragTouch),window.addEventListener("touchcancel",handleStopDragTouch)},handleDragTouch=function handleDragTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startDragging(ctx,relativePoint)},handleStopDragTouch=function handleStopDragTouch(e){e.stopPropagation(),stopDrag(ctx),window.removeEventListener("touchmove",handleDragTouch),window.removeEventListener("touchend",handleStopDragTouch),window.removeEventListener("touchcancel",handleStopDragTouch)},customState=ctx.fullState[constants.h],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartDrag}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartDragTouch}),selectFrame.addEventListener("mousedown",handleStartDrag),selectFrame.addEventListener("touchstart",handleStartDragTouch)}function startResizing(ctx,relativePoint,resizeFn){var state=ctx.fullState[constants.h],prevPoint=state.prevPoint;if(prevPoint){var selectedObject=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0],toolUsed=Object(utils.i)(ctx.drawingTools,data.toolId),newResizeCtx={viewContainer:ctx.viewContainer,newPoint:relativePoint,previousPoint:prevPoint};toolUsed.doResize?toolUsed.doResize(data,newResizeCtx):resizeFn(data,newResizeCtx),toolUsed.onResize(data,newResizeCtx),state.prevPoint=relativePoint}}function startResize(ctx,relativePoint){ctx.fullState[constants.h].prevPoint=relativePoint,function pushResizeToUndoStack(ctx){var state=ctx.fullState[constants.h],selectedObjects=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap);if(1!==selectedObjects.length)throw new Error("resize push to stack expects 1 object selected");var _selectedObjects$0$co=selectedObjects[0].container,id=_selectedObjects$0$co.id,bounds=_selectedObjects$0$co.bounds,action={objectId:id,toolId:constants.h,toolType:"top-bar-tool",action:"resize",data:{bounds:{top:bounds.top,left:bounds.left,right:bounds.right,bottom:bounds.bottom}}};Object(pushActionToStack.a)(action,ctx)}(ctx)}function stopResize(ctx){ctx.fullState[constants.h].prevPoint=null}function addHandlersToCornerButton(buttonEle,objectId,ctx,resizeFn){var handleStartResizeMouse=function handleStartResizeMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("mousemove",handleResizeMouse),window.addEventListener("mouseup",handleStopResizeMouse)},handleResizeMouse=function handleResizeMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeMouse=function handleStopResizeMouse(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("mousemove",handleResizeMouse),window.removeEventListener("mouseup",handleStopResizeMouse)},handleStartResizeTouch=function handleStartResizeTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startResize(ctx,relativePoint),window.addEventListener("touchmove",handleResizeTouch),window.addEventListener("touchend",handleStopResizeTouch),window.addEventListener("touchcancel",handleStopResizeTouch)},handleResizeTouch=function handleResizeTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startResizing(ctx,relativePoint,resizeFn)},handleStopResizeTouch=function handleStopResizeTouch(e){e.stopPropagation(),stopResize(ctx),window.removeEventListener("touchmove",handleResizeTouch),window.removeEventListener("touchend",handleStopResizeTouch),window.removeEventListener("touchcancel",handleStopResizeTouch)},customState=ctx.fullState[constants.h],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:buttonEle,eventName:"mousedown",fn:handleStartResizeMouse}),handlers.push({ele:buttonEle,eventName:"touchstart",fn:handleStartResizeTouch}),buttonEle.addEventListener("mousedown",handleStartResizeMouse),buttonEle.addEventListener("touchstart",handleStartResizeTouch)}function startRotating(ctx,relativePoint){var state=ctx.fullState[constants.h];if(state.prevPoint){var selectedObject=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap);if(1!==selectedObject.length)throw new Error("start rotating got incorrect number of objects to handle");var data=selectedObject[0];!function rotateDiv(object,newPoint,referenceCenter){var div=object.container.div,x=newPoint[0]-referenceCenter[0],y=newPoint[1]-referenceCenter[1],angleDeg=180*Math.atan2(y,x)/Math.PI+90;div.style.transform="rotate("+angleDeg+"deg)"}(data,relativePoint,Object(utils.f)(data.container.bounds)),state.prevPoint=relativePoint,Object(alertAfterUpdate.a)(data,ctx)}}function startRotate(ctx,relativePoint){ctx.fullState[constants.h].prevPoint=relativePoint,function pushRotateToUndoStack(ctx){var state=ctx.fullState[constants.h],selectedObjects=Object(getSelectedDrawingObjects.a)(state.selectedIds,ctx.objectsMap),action={objectId:"",toolId:constants.h,toolType:"top-bar-tool",action:"rotate",data:selectedObjects.map((function(o){return{objectId:o.container.id,rotate:Object(getRotateFromDiv.a)(o.container.div)}}))};Object(pushActionToStack.a)(action,ctx)}(ctx)}function stopRotate(ctx){ctx.fullState[constants.h].prevPoint=null}var unselectElement=__webpack_require__("./src/utils/select/unselectElement.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return utils_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||utils_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function utils_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function utils_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?utils_arrayLikeToArray(o,minLen):void 0}}function utils_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function selectManyElements(selectObjects,ctx){var _step,_iterator=utils_createForOfIteratorHelper(selectObjects);try{for(_iterator.s();!(_step=_iterator.n()).done;){var data=_step.value,selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.container.id,ctx),data.container.div.appendChild(selectFrame))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}function makeSelectFrameDiv(data){var containerDiv=data.container.div,eleId=data.container.id;if(function isElementSelected(div){return null!==div.querySelector('[id^="select-frame"')}(containerDiv))return null;var div=document.createElement("div");return div.setAttribute("id","select-frame-"+eleId),Object(utils.m)(div,SELECT_FRAME_DIV_STYLES),div}function unselectEverythingAndReturnPrevious(ctx){var selectedIds=_toConsumableArray(ctx.fullState[constants.h].selectedIds),objectsMap=ctx.objectsMap,prevMousePosition=ctx.prevMousePosition,objects=Object(getSelectedDrawingObjects.a)(selectedIds,objectsMap);if(unselectAll(objects,ctx),1===objects.length){var tool=Object(utils.i)(ctx.drawingTools,objects[0].toolId);tool&&ctx&&tool.onUnSelect&&tool.onUnSelect(objects[0],ctx)}return prevMousePosition.current=null,{ids:selectedIds.splice(0,selectedIds.length),objects:objects}}function notifyTool(tools,data,ctx){var tool=Object(utils.i)(tools,data.toolId);tool&&ctx&&tool.onSelect&&tool.onSelect(data,ctx)}function unselectAll(selectedObjects,ctx){var _step2,_iterator2=utils_createForOfIteratorHelper(selectedObjects);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value;Object(unselectElement.a)(obj,ctx)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}function selectElement(data,ctx){var selectFrame=makeSelectFrameDiv(data);selectFrame&&(addHandlersToSelectFrame(selectFrame,data.container.id,ctx),function addToolsToSelectionDiv(div,data,ctx){var eleId=data.container.id,topLeftCorner=cornerButton(eleId,!0,!1,!1,!0);addHandlersToCornerButton(topLeftCorner,eleId,ctx,resizeNW);var topRightCorner=cornerButton(eleId,!0,!0);addHandlersToCornerButton(topRightCorner,eleId,ctx,resizeNE);var bottomRightCorner=cornerButton(eleId,!1,!0,!0);addHandlersToCornerButton(bottomRightCorner,eleId,ctx,resizeSE);var bottomLeftCorner=cornerButton(eleId,!1,!1,!0,!0);addHandlersToCornerButton(bottomLeftCorner,eleId,ctx,resizeSW),div.appendChild(topLeftCorner),div.appendChild(topRightCorner),div.appendChild(bottomRightCorner),div.appendChild(bottomLeftCorner);var rotateButton=cornerButton(eleId);rotateButton.id="button-rotate-"+eleId,Object(utils.m)(rotateButton,ROTATE_BUTTON_STYLES),function addHandlersToRotateButton(selectFrame,objectId,ctx){var handleStartRotateMouse=function handleStartRotateMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("mousemove",handleRotateMouse),window.addEventListener("mouseup",handleStopRotateMouse)},handleRotateMouse=function handleRotateMouse(e){e.stopPropagation();var point=[e.clientX,e.clientY],relativePoint=Object(utils.h)(point,ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateMouse=function handleStopRotateMouse(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("mousemove",handleRotateMouse),window.removeEventListener("mouseup",handleStopRotateMouse)},handleStartRotateTouch=function handleStartRotateTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startRotate(ctx,relativePoint),window.addEventListener("touchmove",handleRotatingTouch),window.addEventListener("touchend",handleStopRotateTouch),window.addEventListener("touchcancel",handleStopRotateTouch)},handleRotatingTouch=function handleRotatingTouch(e){e.stopPropagation();var startPoint=Object(utils.j)(e),relativePoint=Object(utils.h)(startPoint,ctx.viewContainer);startRotating(ctx,relativePoint)},handleStopRotateTouch=function handleStopRotateTouch(e){e.stopPropagation(),stopRotate(ctx),window.removeEventListener("touchmove",handleRotatingTouch),window.removeEventListener("touchend",handleStopRotateTouch),window.removeEventListener("touchcancel",handleStopRotateTouch)},customState=ctx.fullState[constants.h],handlers=customState.handlers[objectId]||[];customState.handlers[objectId]=handlers,handlers.push({ele:selectFrame,eventName:"mousedown",fn:handleStartRotateMouse}),handlers.push({ele:selectFrame,eventName:"touchstart",fn:handleStartRotateTouch}),selectFrame.addEventListener("mousedown",handleStartRotateMouse),selectFrame.addEventListener("touchstart",handleStartRotateTouch)}(rotateButton,eleId,ctx);var divLine=document.createElement("div");Object(utils.m)(divLine,ROTATE_DOTTED_LINE_STYLES),divLine.id="line-div-"+eleId,rotateButton.appendChild(divLine),div.appendChild(rotateButton)}(selectFrame,data,ctx),data.container.div.appendChild(selectFrame))}function cornerButton(eleId,top,right,bottom,left){var button=document.createElement("button");Object(utils.m)(button,SELECTED_CORNER_BUTTON);var buttonId="";return top?(button.style.top="-12px",buttonId+="n"):bottom&&(button.style.bottom="-12px",buttonId+="s"),right?(button.style.right="-12px",buttonId+="e"):left&&(button.style.left="-12px",buttonId+="w"),button.id="corner-button-"+buttonId+"-"+eleId,button.style.cursor=buttonId+"-resize",button}function getSelectedIdsFromFullState(ctx){var selectState=ctx.fullState[constants.h];if(!selectState)throw new Error("no select state present");return _toConsumableArray(selectState.selectedIds)}},"./src/utils/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"m",(function(){return setStyles})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getToolById})),__webpack_require__.d(__webpack_exports__,"e",(function(){return deleteObjectAndNotify})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getObjectFromMap})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getRelativePoint})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getTouchCoords})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getCenterPoint})),__webpack_require__.d(__webpack_exports__,"l",(function(){return makeSureArtifactsGone})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isNotUndefined})),__webpack_require__.d(__webpack_exports__,"b",(function(){return batchDelete})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createNewObject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return centerObject}));__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _select_unselectElement__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/utils/select/unselectElement.ts"),_pushActionToStack__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/utils/pushActionToStack.ts"),___WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/utils/index.ts");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function setStyles(div,styles){for(var key in styles)div.style[key]=styles[key];return div}function getToolById(tools,toolId){var tool=tools.find((function(t){return t.id===toolId}));if(!tool)throw new Error("could not find the used tool");return tool}function deleteObjectAndNotify(objectId,ctx){var objectsMap=ctx.objectsMap,viewContainer=ctx.viewContainer,object=getObjectFromMap(ctx.objectsMap,objectId);Object(_select_unselectElement__WEBPACK_IMPORTED_MODULE_19__.a)(object,ctx);var _object$container=object.container,div=_object$container.div,id=_object$container.id;viewContainer.removeChild(div),objectsMap.delete(id);var tool=getToolById(ctx.drawingTools,object.toolId);tool.onDeleteObject&&tool.onDeleteObject(object,ctx)}function getObjectFromMap(map,objectId){var object=map.get(objectId);if(!object)throw new Error("could not get object from map");return object}function getRelativePoint(point,container){if(!container)throw new Error("Container not set.");var rect=container.getBoundingClientRect();return[point[0]-rect.left,point[1]-rect.top]}function getTouchCoords(e){var touch=e.touches[0];return touch||(touch=e.targetTouches[0]),touch||(touch=e.changedTouches[0]),[touch.clientX,touch.clientY]}function getCenterPoint(bounds){var height=bounds.bottom-bounds.top,y=bounds.top+height/2,width=bounds.right-bounds.left;return[bounds.left+width/2,y]}function makeSureArtifactsGone(query,container){var objects=container.querySelectorAll(query);objects.length>0&&objects.forEach((function(obj){container.removeChild(obj)}))}function isNotUndefined(item){return void 0!==item}function batchDelete(deleteIds,ctx){var _step,action={action:"batch",toolType:"batch",toolId:"",objectId:"",data:[]},couldNotDeleteToolsSet=new Set,_iterator=_createForOfIteratorHelper(deleteIds);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _tool$undoHandlers,objectId=_step.value,object=getObjectFromMap(ctx.objectsMap,objectId),toolId=object.toolId,tool=getToolById(ctx.drawingTools,toolId);if(ctx.shouldKeepHistory&&null!=tool&&null!==(_tool$undoHandlers=tool.undoHandlers)&&void 0!==_tool$undoHandlers&&_tool$undoHandlers.delete){var toolAction={action:"delete",toolType:"top-bar-tool",toolId:toolId,objectId:objectId,data:object};action.data.push(toolAction)}else couldNotDeleteToolsSet.add(toolId);deleteObjectAndNotify(objectId,ctx)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(ctx.shouldKeepHistory){if(Object(_pushActionToStack__WEBPACK_IMPORTED_MODULE_20__.a)(action,ctx),couldNotDeleteToolsSet.size>0){console.log("removing items from undo stack since they do not implement undoDelete",couldNotDeleteToolsSet);for(var i=ctx.undoStack.length-1;i>=0;i--)couldNotDeleteToolsSet.has(ctx.undoStack[i].toolId)&&(ctx.undoStack.splice(i,1),i++)}}else ctx.undoStack.splice(0)}function createNewObject(ctx,point,toolId){var styles=Object.assign({},ctx.globalStyles);return Object(___WEBPACK_IMPORTED_MODULE_21__.i)(point,styles,toolId)}function addObject(ctx,obj){var _obj$container=obj.container,div=_obj$container.div,id=_obj$container.id;ctx.viewContainer.appendChild(div),ctx.objectsMap.set(id,obj)}function centerObject(ctx,obj,w,h){var viewBox=ctx.viewContainer.getBoundingClientRect(),_obj$container2=obj.container,div=_obj$container2.div,bounds=_obj$container2.bounds;if(!w||!h){var _div$getBoundingClien=div.getBoundingClientRect(),width=_div$getBoundingClien.width,height=_div$getBoundingClien.height;w=w||width,h=h||height}var top=viewBox.height/2-h/2,left=viewBox.width/2-w/2;bounds.top=top,bounds.left=left,bounds.right=bounds.left+w,bounds.bottom=bounds.top+h,div.style.top=top+"px",div.style.left=left+"px",div.style.height=h+"px",div.style.width=w+"px"}},"./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./AddImages.stories.tsx":"./stories/AddImages.stories.tsx","./ReactDraw.stories.tsx":"./stories/ReactDraw.stories.tsx","./SaveCanvas.stories.tsx":"./stories/SaveCanvas.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$":function(module,exports,__webpack_require__){var map={"./DrawingTools.stories.mdx":"./stories/DrawingTools.stories.mdx","./Introduction.stories.mdx":"./stories/Introduction.stories.mdx","./TypeDescriptions.stories.mdx":"./stories/TypeDescriptions.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|[\\\\/]|(?:(?:(?!(?:^|[\\\\/])\\.).)*?)[\\\\/])(?!\\.)(?=.)[^\\\\/]*?\\.stories\\.mdx)$"},"./stories/AddImages.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AddImagesToCanvas",(function(){return AddImagesToCanvas}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/web.url.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _templateObject,_src__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/index.ts"),_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PhotographBoldIcon.js"),styled_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Customization Examples/Add Images To Canvas"};var imageTool={id:"my-image-tool-id",onDrawEnd:function onDrawEnd(){},onDrawing:function onDrawing(){},onDrawStart:function onDrawStart(){},onResize:function onResize(){}},topBarTools=[_src__WEBPACK_IMPORTED_MODULE_9__.u,_src__WEBPACK_IMPORTED_MODULE_9__.s,imageTool];var StyledButton=styled_components__WEBPACK_IMPORTED_MODULE_11__.b.label(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  width: 180px;\n  font-size: 16px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 5px;\n  cursor: pointer;\n  border: none;\n  padding: 7px 10px;\n  background-color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  border: 1px solid ",";\n  &:hover {\n    background-color: ",";\n  }\n"])),_src__WEBPACK_IMPORTED_MODULE_9__.b.primary.main,_src__WEBPACK_IMPORTED_MODULE_9__.b.primary.light),AddImageMenuComponent=function AddImageMenuComponent(_ref){var getContext=_ref.getContext;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(StyledButton,{htmlFor:"my-button-id",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{style:{padding:"0px 10px 0px 5px",height:20},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_10__.a,{height:15,width:20})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("input",{id:"my-button-id",style:{display:"none"},type:"file",accept:"jpg,png,jpeg",onChange:function handleAddImage(e){var files=e.target.files;if(files&&files[0]){var ctx=getContext(),_viewContainer$getBou=ctx.viewContainer.getBoundingClientRect(),width=_viewContainer$getBou.width,height=_viewContainer$getBou.height,newData=Object(_src__WEBPACK_IMPORTED_MODULE_9__.o)(ctx,[width/2,height/2],"my-image-tool-id");Object(_src__WEBPACK_IMPORTED_MODULE_9__.i)(ctx,newData);var toUrl=URL.createObjectURL(files[0]),img=new Image;img.style.width="100%",img.style.height="100%",img.onload=function(){newData.element=img,newData.container.div.appendChild(img);var _getDimensions=function getDimensions(img){var naturalWidth=img.naturalWidth,naturalHeight=img.naturalHeight,ratio=naturalWidth/naturalHeight;return naturalWidth>200?{width:200,height:200/ratio}:naturalHeight>200?{width:200*ratio,height:200}:{width:naturalWidth,height:naturalHeight}}(img),width=_getDimensions.width,height=_getDimensions.height;Object(_src__WEBPACK_IMPORTED_MODULE_9__.m)(ctx,newData,width,height),ctx.shouldSelectAfterCreate&&ctx.selectObject(newData)},img.src=toUrl}}}),"Add Image"]})};AddImageMenuComponent.displayName="AddImageMenuComponent";var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_src__WEBPACK_IMPORTED_MODULE_9__.h,Object.assign({},args))};Template.displayName="Template";var AddImagesToCanvas=Template.bind({});AddImagesToCanvas.args={topBarTools:topBarTools,shouldSelectAfterCreate:!0,menuComponents:[AddImageMenuComponent,_src__WEBPACK_IMPORTED_MODULE_9__.c],shouldKeepHistory:!1},AddImagesToCanvas.parameters={docs:{source:{code:'\nimport {\n\tReactDraw,\n\tselectTool,\n\tfreeDrawTool,\n\tClearAllButton,\n\tDrawingTools,\n\tMenuComponent,\n\tReactDrawProps,\n\tCOLORS,\n\tcreateNewObject,\n\taddObject,\n\tcenterObject,\n} from "@jzohdi/react-draw";\nimport { PhotographBoldIcon } from "@jzohdi/jsx-icons";\nimport styled from "styled-components";\n\nconst inputId = "my-button-id";\nconst imageToolId = "my-image-tool-id";\n\nconst imageTool: DrawingTools = {\n  id: imageToolId,\n  onDrawEnd() {},\n  onDrawing() {},\n  onDrawStart() {},\n  onResize() {},\n};\n\nconst topBarTools: DrawingTools[] = [selectTool, freeDrawTool, imageTool];\n\nexport default function ExampleProject() {\n\n\treturn <ReactDraw \n\t\ttopBarTools={topBarTools}\n\t\tshouldSelectAfterCreate={true}\n\t\tmenuComponents={[AddImageMenuComponent, ClearAllButton]}\n\t\tshouldKeepHistory={false}\n\t\t/>\n\n}\n\nfunction getDimensions(img: HTMLImageElement) {\n  return { width: img.naturalWidth, height: img.naturalHeight };\n}\n\nconst StyledButton = styled.label`\n  width: 180px;\n  font-size: 16px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 5px;\n  cursor: pointer;\n  border: none;\n  padding: 7px 10px;\n  background-color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  border: 1px solid ${COLORS.primary.main};\n  &:hover {\n    background-color: ${COLORS.primary.light};\n  }\n`;\nconst AddImageMenuComponent: MenuComponent = ({ getContext }) => {\n  const handleAddImage = (e: ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || !files[0]) {\n      return;\n    }\n    const ctx = getContext();\n    const viewContainer = ctx.viewContainer;\n    const { width, height } = viewContainer.getBoundingClientRect();\n    const newData = createNewObject(ctx, [width / 2, height / 2], imageToolId);\n    addObject(ctx, newData);\n    const toUrl = URL.createObjectURL(files[0]);\n    const img = new Image();\n    img.style.width = "100%";\n    img.style.height = "100%";\n    img.onload = function () {\n\t  newData.element = img;\n      newData.container.div.appendChild(img);\n      const { width, height } = getDimensions(img);\n      centerObject(ctx, newData, width, height);\n      if (ctx.shouldSelectAfterCreate) {\n          ctx.selectObject(newData);\n      }\n    };\n    img.src = toUrl;\n  };\n  return (\n    <StyledButton htmlFor={inputId}>\n      <div style={{ padding: "0px 10px 0px 5px", height: 20 }}>\n        <PhotographBoldIcon height={15} width={20} />\n      </div>\n      <input\n        id={inputId}\n        style={{ display: "none" }}\n        type="file"\n        accept="jpg,png,jpeg"\n        onChange={handleAddImage}\n      />\n      Add Image\n    </StyledButton>\n  );\n};\t  \n\t \n\t  ',language:"tsx",type:"auto"},description:{component:"In this example we create a menu component that can load an image to the canvas. \n\t  First we create a new topBarTool with no icon. This is so that we can have a tool that will be responsible for the objects added to the canvas. \n\t  The tool can not be selected as it will not be displayed on the top bar, but it is necessary if we wanted to handle things like updating the object's styles or \n\t  handling undo/redo capabilities. In the `handleAddImage` function, we do a few things: \n\t1. createNewObject which will create the DrawingData at the coordinate given. \n\t2. addObject actually places the data onto the canvas (it will be an empty div element at the coords). \n\t3. we load a new img element. \n\t4. once the image is loaded, add it as a child of the wrapper div. \n\t5. recenter the object to the middle of the canvas. \n\t6. if the shouldSelectAfterCreate prop is set, select the newly added image object.  "}}},AddImagesToCanvas.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},AddImagesToCanvas.parameters)},"./stories/DrawingTools.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Drawing Tools",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Top Bar Tools (Drawing Tools)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"ReactDraw uses a plugin system for drawing tools.\nThis allows you to have full control over the functionality of the component.\nYou can import the tools you want, hook in to the drawing stages, and create your own tools.\nThe type definition of a drawing tool is described by the typescript below."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"icon: ")," the icon to be displayed in the top bar tools"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"id")," required so that react draw can identify objects created by this id"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"cursor")," sets the the cursor of the mouse while over the viewContainer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawStart")," called on mousedown/touchstart. includes data like the coordinates, etc. (see more below)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawing")," called during each new point. (mousemove)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onDrawEnd")," called after mouseup/touchend"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"onResize")," called when the object is being resized (corner expand action while using select tool)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"DrawingData")," includes the mouse coordinates, the container div, current styles, etc."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("strong",null,"viewContainer")," the div that is the react-draw full drawing area. This is used to help calculate relative coordinates.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"More of the types included in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"Type Descriptions")," page."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingTools = {\n  icon: JSX.Element;\n  tooltip?: string;\n  id: string;\n  setupCustomState?: (state: CustomState) => any;\n  onPickTool?: (ctx: ReactDrawContext) => void;\n  onUnPickTool?: (ctx: ReactDrawContext) => void;\n  onDrawStart: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDrawing: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDrawEnd: (data: DrawingData, ctx: ReactDrawContext) => void;\n  doResize?: (data: DrawingData, ctx: OnResizeContext) => void;\n  onResize: (data: DrawingData, ctx: OnResizeContext) => void;\n  onSelect?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onAfterUpdate?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onUnSelect?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onDeleteObject?: (data: DrawingData, ctx: ReactDrawContext) => void;\n  onKeyPress?: (event: KeyboardEvent, ctx: ReactDrawContext) => void;\n  onUnMount?: (ctx: ReactDrawContext) => void;\n  onDuplicate?: (newData: DrawingData, ctx: ReactDrawContext) => DrawingData;\n  undoHandlers?: {\n    [action: ActionKey]: UndoHandler;\n  };\n  redoHandlers?: {\n    [action: ActionKey]: UndoHandler;\n  };\n  styleHandlers?: {\n    [key: keyof ToolPropertiesMap]: UpdateStyleHandler;\n  };\n  cursor?: string;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Free Draw Tool"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"For example here is the free draw tool implementation."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawStart")," the free draw tool creates a circle since there is only a single ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords `Point`"),". An svg element is created and then appended a child to the object container. The object container is a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"div"),"element that is created for you at the correct position in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,'"viewContainer"')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawing")," the tool must expand the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,'"viewContainer" div')," to be the correct dimensions. Then a new svg is created based on the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords")," information. It's important to note that the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"data.coords")," points are ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[x, y]")," coordinates relative to the"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"viewContainer"),". Drawing in the top left corner of the drawing area will be represented by ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[0, 0]")," and the bottom right corner is represented by"," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"[width, height]"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onDrawEnd")," no more work needs to be done."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"During ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("b",null,"onResize")," the div has been set to the correct dimensions for you and so we need to take care of scaling the svg inside."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'const freeDrawTool: DrawingTools = {\n  id: "free-draw-tool",\n  tooltip: "Free draw tool",\n  icon: <PencilBoldIcon />,\n  onDrawStart: (data) => {\n    const lineWidth = parseInt(data.style.lineWidth);\n    const newSvg = createSvg(lineWidth, lineWidth, data.style.opacity);\n    newSvg.style.overflow = "visible";\n    const newPath = createCircle(lineWidth / 2, data.style.color);\n    newSvg.appendChild(newPath);\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawing: (data, { viewContainer }) => {\n    smoothCoords(data.coords);\n    expandContainer(data);\n    const boxSize = getBoxSize(data);\n    const newSvg = createSvg(boxSize.width, boxSize.height, data.style.opacity);\n    newSvg.style.overflow = "visible";\n    const path = svgPathFromData(data, viewContainer);\n    newSvg.appendChild(path);\n    data.container.div.innerHTML = "";\n    data.container.div.appendChild(newSvg);\n    data.element = newSvg;\n  },\n  onDrawEnd: (data, ctx) => {\n    saveCreateToUndoStack(data, ctx);\n    if (ctx.shouldSelectAfterCreate) {\n      ctx.selectObject(data);\n    }\n  },\n  onResize: (data, ctx) => {\n    if (!data.element) {\n      return;\n    }\n    scaleSvg(data.element as SVGSVGElement, data.container.bounds);\n  },\n  undoHandlers: {\n    create: undoCreate,\n    delete: redoDelete,\n    color: undoSvgPathColor,\n    lineWidth: undoSvgPathWidth,\n    opacity: undoEleOpacity,\n  },\n  redoHandlers: {\n    create: undoCreate,\n    delete: redoDelete,\n    color: undoSvgPathColor,\n    lineWidth: undoSvgPathWidth,\n    opacity: undoEleOpacity,\n  },\n  styleHandlers: {\n    color: (data, value, _ctx) => updateSvgPathStroke(data, value),\n    lineWidth: (data, value, _ctx) => updateSvgPathWidth(data, value),\n    opacity: (data, value, _ctx) => updateEleOpacity(data, value),\n  },\n  cursor: `url(data:image/svg+xml;base64,${cursorPencilBase64}) 0 16, pointer`,\n};\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Drawing Tools",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Introduction.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Introduction",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Welcome to @jzohdi/react-draw Storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"This is a fully customizable drawing area library written in react + typescript.\nIncluded only the tools you want for the smallest bundle size or add your own."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Installation"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"Install using ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"npm")," or ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("inlineCode",{parentName:"p"},"yarn")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"npm install @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{className:"shell"},"yarn add @jzohdi/react-draw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Example"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport {\n  circleTool,\n  squareTool,\n  selectTool,\n  freeDrawTool,\n  diamondTool,\n  straightLineTool,\n  textAreaTool,\n  eraseTool,\n  undoTool,\n  redoTool,\n  trashTool,\n  duplicateTool,\n  bringBackTool,\n  bringForwardTool,\n  ColorStyle,\n  BackgroundStyle,\n  LineWidthStyle,\n  OpacityStyle,\n  arrowTool,\n  ClearAllButton,\n  FontSizeStyle,\n} from "../src";\n\nexport default function MyComponent() {\n  <div>\n    <h1>Example page title</h1>\n    <ReactDraw\n      topBarTools={[\n        selectTool,\n        freeDrawTool,\n        squareTool,\n        circleTool,\n        diamondTool,\n        straightLineTool,\n        arrowTool,\n      ]}\n      bottomBarTools={[\n        undoTool,\n        redoTool,\n        trashTool,\n        duplicateTool,\n        bringBackTool,\n        bringForwardTool,\n      ]}\n      shouldSelectAfterCreate={true}\n      styleComponents={{\n        color: { order: 3, component: ColorStyle },\n        background: { order: 4, component: BackgroundStyle },\n        lineWidth: { order: 1, component: LineWidthStyle },\n        opacity: { order: 0, component: OpacityStyle },\n        fontSize: { order: 2, component: FontSizeStyle },\n      }}\n      menuComponents={[ClearAllButton]}\n    >\n      ... any child you want can go inside the drawing area.\n    </ReactDraw>\n  </div>;\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Prop Type"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'type ReactDrawProps = {\n  children?: ReactChild;\n  layout?: LayoutOption;\n  topBarTools: DrawingTools[];\n  hideTopBar?: boolean;\n  bottomBarTools: ActionTools[];\n  hideBottomBar?: boolean;\n  shouldKeepHistory?: boolean;\n  shouldSelectAfterCreate?: boolean;\n  id: string;\n  styleComponents?: StyleComponents;\n  menuComponents?: MenuComponent[];\n};\n\ntype LayoutOption = "default" | LayoutAbsolute | "fit";\n\ntype LayoutAbsolute = {\n  width: number | string;\n  height: number | string;\n};\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Roadmap"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","duplicate action"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","reorder (back front) actions"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","tooltips"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","optional tool labels"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","clear all"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","text area font size update"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","forward ref"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","tool bar overflow"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","styles/classnames props"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","remove bounds and derive bounds from div instead"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","improve docs"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","responsive mode?"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","save/load?"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","fix select object when rotated (correctly calculate the new bounds if rotated) (maybe fix getCenterPoint too)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","provide utils as part of package"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","give example of to image"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","remove dep on styled components - used for hover and animations"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul"},"[-][free draw bezier curve]",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("a",{parentName:"li",href:"https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74"},"1")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul"},"[-]"," fix resize when rotated")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Stack"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("ul",{className:"contains-task-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","react"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","typescript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","styled-components"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("li",{parentName:"ul",className:"task-list-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","rollup")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactDraw.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultLayoutAllTools",(function(){return DefaultLayoutAllTools})),__webpack_require__.d(__webpack_exports__,"FreeDrawOnly",(function(){return FreeDrawOnly})),__webpack_require__.d(__webpack_exports__,"DefaultLayoutWithChildren",(function(){return DefaultLayoutWithChildren})),__webpack_require__.d(__webpack_exports__,"FitLayoutWithChildren",(function(){return FitLayoutWithChildren}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _src_ReactDraw__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/ReactDraw/index.tsx"),_src__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js"),layoutOptions={fit:"fit",default:"default",AbsoluteLayout:{width:500,height:500}};__webpack_exports__.default={title:"ReactDraw",component:_src_ReactDraw__WEBPACK_IMPORTED_MODULE_4__.a,argTypes:{topBarTools:{type:{name:"object",required:!0},defaultValue:null,description:"Drawing tools that will be displayed at the top of the canvas and can be selected if they have an icon property. These tools are of type `DrawingTools`. Not implementing an icon on the tool can be useful if you want a tool in the background that can still handle object updates.",control:{type:"object"}},layout:{options:Object.keys(layoutOptions),mapping:layoutOptions,description:"if default sets absolute size of width: 500, height: 500. fit will simply wrap the children to <ReactDraw>{children}</ReactDraw>. layout can also be passed an object of { width: number, height: number }",defaultValue:"default",control:{type:"select",labels:{default:"default",fit:"fit",AbsoluteLayout:"{ width: 500, height: 500 }"}}}}};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src_ReactDraw__WEBPACK_IMPORTED_MODULE_4__.a,Object.assign({},args))};Template.displayName="Template";var topBarTools=[_src__WEBPACK_IMPORTED_MODULE_5__.u,_src__WEBPACK_IMPORTED_MODULE_5__.s,_src__WEBPACK_IMPORTED_MODULE_5__.v,_src__WEBPACK_IMPORTED_MODULE_5__.n,_src__WEBPACK_IMPORTED_MODULE_5__.p,_src__WEBPACK_IMPORTED_MODULE_5__.w,_src__WEBPACK_IMPORTED_MODULE_5__.x,_src__WEBPACK_IMPORTED_MODULE_5__.j,_src__WEBPACK_IMPORTED_MODULE_5__.r],bottomBarTools=[_src__WEBPACK_IMPORTED_MODULE_5__.z,_src__WEBPACK_IMPORTED_MODULE_5__.t,_src__WEBPACK_IMPORTED_MODULE_5__.y,_src__WEBPACK_IMPORTED_MODULE_5__.q,_src__WEBPACK_IMPORTED_MODULE_5__.k,_src__WEBPACK_IMPORTED_MODULE_5__.l],DefaultLayoutAllTools=Template.bind({});DefaultLayoutAllTools.args={topBarTools:topBarTools,bottomBarTools:bottomBarTools,shouldSelectAfterCreate:!0,styleComponents:{color:{order:3,component:_src__WEBPACK_IMPORTED_MODULE_5__.d},background:{order:4,component:_src__WEBPACK_IMPORTED_MODULE_5__.a},lineWidth:{order:1,component:_src__WEBPACK_IMPORTED_MODULE_5__.f},opacity:{order:0,component:_src__WEBPACK_IMPORTED_MODULE_5__.g},fontSize:{order:2,component:_src__WEBPACK_IMPORTED_MODULE_5__.e}},menuComponents:[_src__WEBPACK_IMPORTED_MODULE_5__.c]};var FreeDrawOnly=Template.bind({});FreeDrawOnly.args={topBarTools:[_src__WEBPACK_IMPORTED_MODULE_5__.s],hideTopBar:!0,bottomBarTools:[],hideBottomBar:!0,shouldSelectAfterCreate:!1,shouldKeepHistory:!1};var DefaultLayoutWithChildren=Template.bind({});DefaultLayoutWithChildren.args={topBarTools:topBarTools,bottomBarTools:bottomBarTools,shouldSelectAfterCreate:!0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{children:" hello world"})})};var FitLayoutWithChildren=Template.bind({});FitLayoutWithChildren.args={topBarTools:topBarTools,bottomBarTools:bottomBarTools,shouldSelectAfterCreate:!0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{children:" hello world"})}),layout:"fit"},DefaultLayoutAllTools.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutAllTools.parameters),FreeDrawOnly.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FreeDrawOnly.parameters),DefaultLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},DefaultLayoutWithChildren.parameters),FitLayoutWithChildren.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},FitLayoutWithChildren.parameters)},"./stories/SaveCanvas.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SaveCanvasAsImage",(function(){return SaveCanvasAsImage}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _templateObject,react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/index.js"),_src__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/index.ts"),_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@jzohdi/jsx-icons/dist/src/PhotographBoldIcon.js"),styled_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Customization Examples/Save Canvas As Image"};var topBarTools=[_src__WEBPACK_IMPORTED_MODULE_7__.u,_src__WEBPACK_IMPORTED_MODULE_7__.s],StyledButton=styled_components__WEBPACK_IMPORTED_MODULE_9__.b.button(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n  width: 180px;\n  font-size: 16px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 5px;\n  cursor: pointer;\n  border: none;\n  padding: 7px 10px;\n  background-color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  border: 1px solid ",";\n  &:hover {\n    background-color: ",";\n  }\n"])),_src__WEBPACK_IMPORTED_MODULE_7__.b.primary.main,_src__WEBPACK_IMPORTED_MODULE_7__.b.primary.light),SaveCanvas=function SaveCanvas(_ref){var getContext=_ref.getContext,ref=Object(react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null);Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){var scriptTag=document.createElement("script");scriptTag.async=!0,scriptTag.integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==",scriptTag.crossOrigin="anonymous",scriptTag.referrerPolicy="no-referrer",scriptTag.onload=function(){console.log("loaded html2canvas")},scriptTag.src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js",ref.current&&ref.current.appendChild(scriptTag)}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(StyledButton,{id:"my-id",onClick:function handleSaveCanvas(){var container=getContext().viewContainer;window.html2canvas&&(0,window.html2canvas)(container).then((function(canvas){var base64image=canvas.toDataURL("image/png"),downloadLink=document.createElement("a");document.body.appendChild(downloadLink),downloadLink.href=base64image,downloadLink.target="_self",downloadLink.download="react-draw-saved-"+(new Date).toLocaleDateString()+"_"+(new Date).toLocaleTimeString().replace(/\s/g,"").replace(/:/g,"_")+".png",downloadLink.click()}))},ref:ref,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{style:{padding:"0px 5px",height:15},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_jzohdi_jsx_icons__WEBPACK_IMPORTED_MODULE_8__.a,{height:15,width:20})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("label",{htmlFor:"my-id",style:{padding:"0px 10px",pointerEvents:"none"},children:"Save Canvas"})]})};SaveCanvas.displayName="SaveCanvas";var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_src__WEBPACK_IMPORTED_MODULE_7__.h,Object.assign({},args))};Template.displayName="Template";var SaveCanvasAsImage=Template.bind({});SaveCanvasAsImage.args={topBarTools:topBarTools,shouldSelectAfterCreate:!0,menuComponents:[SaveCanvas,_src__WEBPACK_IMPORTED_MODULE_7__.c],shouldKeepHistory:!1},SaveCanvasAsImage.parameters={docs:{source:{code:'\nimport {\n\tReactDraw,\n\tselectTool,\n\tfreeDrawTool,\n\tClearAllButton,\n\tDrawingTools,\n\tMenuComponent,\n\tReactDrawProps,\n\tCOLORS,\n} from "@jzohdi/react-draw";\nimport { PhotographBoldIcon } from "@jzohdi/jsx-icons";\nimport styled from "styled-components";\n\nconst topBarTools: DrawingTools[] = [selectTool, freeDrawTool];\n\nexport default function ExampleProject() {\n\n\treturn <ReactDraw \n\t\ttopBarTools={topBarTools}\n\t\tshouldSelectAfterCreate={true}\n\t\tmenuComponents={[SaveCanvas, ClearAllButton]}\n\t\tshouldKeepHistory={false}\n\t\t/>\n\n}\n\nconst StyledButton = styled.button`\n  width: 180px;\n  font-size: 16px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 5px;\n  cursor: pointer;\n  border: none;\n  padding: 7px 10px;\n  background-color: white;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  border: 1px solid ${COLORS.primary.main};\n  &:hover {\n    background-color: ${COLORS.primary.light};\n  }\n`;\n\ndeclare global {\n  var html2canvas: (src: HTMLElement) => Promise<HTMLCanvasElement>;\n}\nconst inputId = "my-id";\n\nconst SaveCanvas: MenuComponent = ({ getContext }) => {\n  const ref = useRef<HTMLButtonElement>(null);\n  // could also do a loading state\n  useEffect(() => {\n    const scriptTag = document.createElement("script");\n    scriptTag.async = true;\n    scriptTag.integrity =\n      "sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==";\n    scriptTag.crossOrigin = "anonymous";\n    scriptTag.referrerPolicy = "no-referrer";\n    scriptTag.onload = function () {\n      console.log("loaded html2canvas");\n    };\n    scriptTag.src =\n      "https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js";\n    if (ref.current) {\n      ref.current.appendChild(scriptTag);\n    }\n  }, []);\n\n  const handleSaveCanvas = () => {\n    const ctx = getContext();\n    const container = ctx.viewContainer;\n    if (window.html2canvas) {\n      const html2canvas = window.html2canvas;\n      html2canvas(container).then((canvas) => {\n        const base64image = canvas.toDataURL("image/png");\n        const downloadLink = document.createElement("a");\n        document.body.appendChild(downloadLink);\n\n        downloadLink.href = base64image;\n        downloadLink.target = "_self";\n        downloadLink.download =\n          "react-draw-saved-" +\n          new Date().toLocaleDateString() +\n          "_" +\n          new Date()\n            .toLocaleTimeString()\n            .replace(/s/g, "")\n            .replace(/:/g, "_") +\n          ".png";\n        downloadLink.click();\n      });\n    }\n  };\n  return (\n    <StyledButton id={inputId} onClick={handleSaveCanvas} ref={ref}>\n      <div style={{ padding: "0px 5px", height: 15 }}>\n        <PhotographBoldIcon height={15} width={20} />\n      </div>\n      <label\n        htmlFor={inputId}\n        style={{ padding: "0px 10px", pointerEvents: "none" }}\n      >\n        Save Canvas\n      </label>\n    </StyledButton>\n  );\n};\n\t  ',language:"tsx",type:"auto"},description:{component:'In this example we create a menu component that saves the canvas to an image. This loades the <a href="https://html2canvas.hertzen.com">html2canvas library</a> and saves the DOM as a jpg'}}},SaveCanvasAsImage.parameters=Object.assign({storySource:{source:"(args) => <ReactDraw {...args} />"}},SaveCanvasAsImage.parameters)},"./stories/TypeDescriptions.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.b,{title:"Type Descriptions",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h1",null,"Type Descriptions"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("p",null,"This document contains descriptions and explanations of the different objects seen in ReactDraw"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"Point"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type Point = [number, number];\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"RectBounds"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type RectBounds = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"DrawingContainer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingContainer = {\n  div: HTMLDivElement;\n  id: string;\n  bounds: RectBounds;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"DrawingData"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type DrawingData = {\n  coords: Point[];\n  container: DrawingContainer;\n  element: HTMLElement | SVGSVGElement | null;\n  style: {\n    lineWidth: number;\n    zIndex: number;\n  };\n  toolId: string;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"OnResizeContext"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},"type OnResizeContext = {\n  viewContainer: HTMLDivElement;\n  previousPoint: Point;\n  newPoint: Point;\n  mode: SelectMode;\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("h2",null,"SelectMode"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)("code",{parentName:"pre",className:"language-typescript"},'type SelectMode =\n  | "drag"\n  | "rotate"\n  | "resize-nw"\n  | "resize-ne"\n  | "resize-se"\n  | "resize-sw";\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Type Descriptions",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_7__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,4,5]]]);